"use strict";var JG=Object.defineProperty,XG=Object.defineProperties,eW=Object.getOwnPropertyDescriptors,wF=Object.getOwnPropertySymbols,tW=Object.prototype.hasOwnProperty,nW=Object.prototype.propertyIsEnumerable,EF=(Xe,Ee,O)=>Ee in Xe?JG(Xe,Ee,{enumerable:!0,configurable:!0,writable:!0,value:O}):Xe[Ee]=O,CF=(Xe,Ee)=>{for(var O in Ee||(Ee={}))tW.call(Ee,O)&&EF(Xe,O,Ee[O]);if(wF)for(var O of wF(Ee))nW.call(Ee,O)&&EF(Xe,O,Ee[O]);return Xe},bF=(Xe,Ee)=>XG(Xe,eW(Ee));(self.webpackChunkAds_app=self.webpackChunkAds_app||[]).push([[179],{2011:(Xe,Ee,O)=>{O.d(Ee,{hO:()=>We,xv:()=>ce,Dh:()=>oe,GT:()=>me,cc:()=>Re,on:()=>W,pX:()=>ie});var p=O(5e3),ee=O(127),F=O(5813);Xe=O.hmd(Xe);const ue=["ngOnDestroy"],ie=(Te,qe,Qe,Se={})=>new Proxy(Te,{get:(be,Ie)=>Qe.runOutsideAngular(()=>{var je;if(Te[Ie])return(null===(je=null==Se?void 0:Se.spy)||void 0===je?void 0:je.get)&&Se.spy.get(Ie,Te[Ie]),Te[Ie];if(ue.indexOf(Ie)>-1)return()=>{};const He=qe.toPromise().then(G=>{const Ce=G&&G[Ie];return"function"==typeof Ce?Ce.bind(G):Ce&&Ce.then?Ce.then(Y=>Qe.run(()=>Y)):Qe.run(()=>Ce)});return new Proxy(()=>{},{get:(G,Ce)=>He[Ce],apply:(G,Ce,Y)=>He.then(se=>{var te;const ve=se&&se(...Y);return(null===(te=null==Se?void 0:Se.spy)||void 0===te?void 0:te.apply)&&Se.spy.apply(Ie,Y,ve),ve})})})}),me=(Te,qe)=>{qe.forEach(Qe=>{Object.getOwnPropertyNames(Qe.prototype||Qe).forEach(Se=>{Object.defineProperty(Te.prototype,Se,Object.getOwnPropertyDescriptor(Qe.prototype||Qe,Se))})})};class le{constructor(qe){return qe}}const oe=new p.OlP("angularfire2.app.options"),ce=new p.OlP("angularfire2.app.name");function W(Te,qe,Qe){const be="object"==typeof Qe&&Qe||{};be.name=be.name||"string"==typeof Qe&&Qe||"[DEFAULT]";const je=ee.Z.apps.filter(He=>He&&He.name===be.name)[0]||qe.runOutsideAngular(()=>ee.Z.initializeApp(Te,be));try{JSON.stringify(Te)!==JSON.stringify(je.options)&&$("error",`${je.name} Firebase App already initialized with different options${Xe.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(He){}return new le(je)}const $=(Te,...qe)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[Te](...qe)},ne={provide:le,useFactory:W,deps:[oe,p.R0b,[new p.FiY,ce]]};let We=(()=>{class Te{constructor(Qe){ee.Z.registerVersion("angularfire",F.q4.full,"core"),ee.Z.registerVersion("angularfire",F.q4.full,"app-compat"),ee.Z.registerVersion("angular",p.q4F.full,Qe.toString())}static initializeApp(Qe,Se){return{ngModule:Te,providers:[{provide:oe,useValue:Qe},{provide:ce,useValue:Se}]}}}return Te.\u0275fac=function(Qe){return new(Qe||Te)(p.LFG(p.Lbi))},Te.\u0275mod=p.oAB({type:Te}),Te.\u0275inj=p.cJS({providers:[ne]}),Te})();function Re(Te,qe,Qe,Se,be){const[,Ie,je]=globalThis.\u0275AngularfireInstanceCache.find(He=>He[0]===Te)||[];if(Ie)return function ke(Te,qe){try{return Te.toString()===qe.toString()}catch(Qe){return Te===qe}}(be,je)||(pe("error",`${qe} was already initialized on the ${Qe} Firebase App with different settings.${Be?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:be,was:je})),Ie;{const He=Se();return globalThis.\u0275AngularfireInstanceCache.push([Te,He,be]),He}}const Be=!!Xe.hot,pe=(Te,...qe)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[Te](...qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Xe,Ee,O)=>{O.d(Ee,{q4:()=>To,iC:()=>ga,fc:()=>er,HU:()=>Wd,vb:()=>Gd,JM:()=>nm});var p=O(5e3),ee=O(5867),F=O(5861),ue=O(9681),ie=O(2090),me=O(4859),le=O(1877),oe=O(8766);const ce="@firebase/installations",W="0.5.9",ne=`w:${W}`,We="FIS_v2",qe=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Qe(I){return I instanceof ie.ZR&&I.code.includes("request-failed")}function Se({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function be(I){return{token:I.token,requestStatus:2,expiresIn:se(I.expiresIn),creationTime:Date.now()}}function Ie(I,T){return je.apply(this,arguments)}function je(){return(je=(0,F.Z)(function*(I,T){const U=(yield T.json()).error;return qe.create("request-failed",{requestName:I,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function He({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function G(I,{refreshToken:T}){const M=He(I);return M.append("Authorization",function te(I){return`${We} ${I}`}(T)),M}function Ce(I){return Y.apply(this,arguments)}function Y(){return(Y=(0,F.Z)(function*(I){const T=yield I();return T.status>=500&&T.status<600?I():T})).apply(this,arguments)}function se(I){return Number(I.replace("s","000"))}function ve(I,T){return ae.apply(this,arguments)}function ae(){return(ae=(0,F.Z)(function*({appConfig:I,heartbeatServiceProvider:T},{fid:M}){const U=Se(I),Q=He(I),re=T.getImmediate({optional:!0});if(re){const ft=yield re.getHeartbeatsHeader();ft&&Q.append("x-firebase-client",ft)}const Ue={method:"POST",headers:Q,body:JSON.stringify({fid:M,authVersion:We,appId:I.appId,sdkVersion:ne})},It=yield Ce(()=>fetch(U,Ue));if(It.ok){const ft=yield It.json();return{fid:ft.fid||M,registrationStatus:2,refreshToken:ft.refreshToken,authToken:be(ft.authToken)}}throw yield Ie("Create Installation",It)})).apply(this,arguments)}function Oe(I){return new Promise(T=>{setTimeout(T,I)})}const Ut=/^[cdef][\w-]{21}$/;function Je(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const M=function Jt(I){return function dt(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Ut.test(M)?M:""}catch(I){return""}}function Pn(I){return`${I.appName}!${I.appId}`}const tn=new Map;function Zt(I,T){const M=Pn(I);Ft(M,T),function Bi(I,T){const M=function yr(){return!ii&&"BroadcastChannel"in self&&(ii=new BroadcastChannel("[Firebase] FID Change"),ii.onmessage=I=>{Ft(I.data.key,I.data.fid)}),ii}();M&&M.postMessage({key:I,fid:T}),function Rr(){0===tn.size&&ii&&(ii.close(),ii=null)}()}(M,T)}function Ft(I,T){const M=tn.get(I);if(M)for(const U of M)U(T)}let ii=null;const Wr="firebase-installations-store";let Hi=null;function mt(){return Hi||(Hi=(0,oe.X3)("firebase-installations-database",1,{upgrade:(I,T)=>{0===T&&I.createObjectStore(Wr)}})),Hi}function si(I,T){return In.apply(this,arguments)}function In(){return(In=(0,F.Z)(function*(I,T){const M=Pn(I),Q=(yield mt()).transaction(Wr,"readwrite"),re=Q.objectStore(Wr),_e=yield re.get(M);return yield re.put(T,M),yield Q.done,(!_e||_e.fid!==T.fid)&&Zt(I,T.fid),T})).apply(this,arguments)}function kn(I){return ks.apply(this,arguments)}function ks(){return(ks=(0,F.Z)(function*(I){const T=Pn(I),U=(yield mt()).transaction(Wr,"readwrite");yield U.objectStore(Wr).delete(T),yield U.done})).apply(this,arguments)}function qr(I,T){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,F.Z)(function*(I,T){const M=Pn(I),Q=(yield mt()).transaction(Wr,"readwrite"),re=Q.objectStore(Wr),_e=yield re.get(M),Ue=T(_e);return void 0===Ue?yield re.delete(M):yield re.put(Ue,M),yield Q.done,Ue&&(!_e||_e.fid!==Ue.fid)&&Zt(I,Ue.fid),Ue})).apply(this,arguments)}function On(I){return oi.apply(this,arguments)}function oi(){return(oi=(0,F.Z)(function*(I){let T;const M=yield qr(I.appConfig,U=>{const Q=uo(U),re=Bt(I,Q);return T=re.registrationPromise,re.installationEntry});return""===M.fid?{installationEntry:yield T}:{installationEntry:M,registrationPromise:T}})).apply(this,arguments)}function uo(I){return lo(I||{fid:Je(),registrationStatus:0})}function Bt(I,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(qe.create("app-offline"))};const M={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},U=function at(I,T){return wt.apply(this,arguments)}(I,M);return{installationEntry:M,registrationPromise:U}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:vr(I)}:{installationEntry:T}}function wt(){return(wt=(0,F.Z)(function*(I,T){try{const M=yield ve(I,T);return si(I.appConfig,M)}catch(M){throw Qe(M)&&409===M.customData.serverCode?yield kn(I.appConfig):yield si(I.appConfig,{fid:T.fid,registrationStatus:0}),M}})).apply(this,arguments)}function vr(I){return ai.apply(this,arguments)}function ai(){return(ai=(0,F.Z)(function*(I){let T=yield Lt(I.appConfig);for(;1===T.registrationStatus;)yield Oe(100),T=yield Lt(I.appConfig);if(0===T.registrationStatus){const{installationEntry:M,registrationPromise:U}=yield On(I);return U||M}return T})).apply(this,arguments)}function Lt(I){return qr(I,T=>{if(!T)throw qe.create("installation-not-found");return lo(T)})}function lo(I){return function wr(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Er(I,T){return B.apply(this,arguments)}function B(){return(B=(0,F.Z)(function*({appConfig:I,heartbeatServiceProvider:T},M){const U=z(I,M),Q=G(I,M),re=T.getImmediate({optional:!0});if(re){const ft=yield re.getHeartbeatsHeader();ft&&Q.append("x-firebase-client",ft)}const Ue={method:"POST",headers:Q,body:JSON.stringify({installation:{sdkVersion:ne,appId:I.appId}})},It=yield Ce(()=>fetch(U,Ue));if(It.ok)return be(yield It.json());throw yield Ie("Generate Auth Token",It)})).apply(this,arguments)}function z(I,{fid:T}){return`${Se(I)}/${T}/authTokens:generate`}function K(I){return De.apply(this,arguments)}function De(){return(De=(0,F.Z)(function*(I,T=!1){let M;const U=yield qr(I.appConfig,re=>{if(!bt(re))throw qe.create("not-registered");const _e=re.authToken;if(!T&&hn(_e))return re;if(1===_e.requestStatus)return M=q(I,T),re;{if(!navigator.onLine)throw qe.create("app-offline");const Ue=Hn(re);return M=et(I,Ue),Ue}});return M?yield M:U.authToken})).apply(this,arguments)}function q(I,T){return X.apply(this,arguments)}function X(){return(X=(0,F.Z)(function*(I,T){let M=yield Ne(I.appConfig);for(;1===M.authToken.requestStatus;)yield Oe(100),M=yield Ne(I.appConfig);const U=M.authToken;return 0===U.requestStatus?K(I,T):U})).apply(this,arguments)}function Ne(I){return qr(I,T=>{if(!bt(T))throw qe.create("not-registered");return function Mr(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function et(I,T){return pt.apply(this,arguments)}function pt(){return(pt=(0,F.Z)(function*(I,T){try{const M=yield Er(I,T),U=Object.assign(Object.assign({},T),{authToken:M});return yield si(I.appConfig,U),M}catch(M){if(!Qe(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const U=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield si(I.appConfig,U)}else yield kn(I.appConfig);throw M}})).apply(this,arguments)}function bt(I){return void 0!==I&&2===I.registrationStatus}function hn(I){return 2===I.requestStatus&&!function Et(I){const T=Date.now();return T<I.creationTime||I.creationTime+I.expiresIn<T+36e5}(I)}function Hn(I){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:T})}function Fa(){return(Fa=(0,F.Z)(function*(I){const T=I,{installationEntry:M,registrationPromise:U}=yield On(T);return U?U.catch(console.error):K(T).catch(console.error),M.fid})).apply(this,arguments)}function La(){return(La=(0,F.Z)(function*(I,T=!1){const M=I;return yield $n(M),(yield K(M,T)).token})).apply(this,arguments)}function $n(I){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,F.Z)(function*(I){const{registrationPromise:T}=yield On(I);T&&(yield T)})).apply(this,arguments)}function Wo(I){return qe.create("missing-app-config-values",{valueName:I})}const Kr="installations",ct=I=>{const T=I.getProvider("app").getImmediate(),M=function ar(I){if(!I||!I.options)throw Wo("App Configuration");if(!I.name)throw Wo("App Name");const T=["projectId","apiKey","appId"];for(const M of T)if(!I.options[M])throw Wo(M);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(T);return{app:T,appConfig:M,heartbeatServiceProvider:(0,ue._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},nn=I=>{const T=I.getProvider("app").getImmediate(),M=(0,ue._getProvider)(T,Kr).getImmediate();return{getId:()=>function Lu(I){return Fa.apply(this,arguments)}(M),getToken:Q=>function Vu(I){return La.apply(this,arguments)}(M,Q)}};(function Zr(){(0,ue._registerComponent)(new me.wA(Kr,ct,"PUBLIC")),(0,ue._registerComponent)(new me.wA("installations-internal",nn,"PRIVATE"))})(),(0,ue.registerVersion)(ce,W),(0,ue.registerVersion)(ce,W,"esm2017");const $i="@firebase/remote-config",Fn=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Gg{constructor(T,M,U,Q){this.client=T,this.storage=M,this.storageCache=U,this.logger=Q}isCachedDataFresh(T,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-M,Q=U<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${Q}.`),Q}fetch(T){var M=this;return(0,F.Z)(function*(){const[U,Q]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(Q&&M.isCachedDataFresh(T.cacheMaxAgeMillis,U))return Q;T.eTag=Q&&Q.eTag;const re=yield M.client.fetch(T),_e=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===re.status&&_e.push(M.storage.setLastSuccessfulFetchResponse(re)),yield Promise.all(_e),re})()}}function bd(I=navigator){return I.languages&&I.languages[0]||I.language}class Cr{constructor(T,M,U,Q,re,_e){this.firebaseInstallations=T,this.sdkVersion=M,this.namespace=U,this.projectId=Q,this.apiKey=re,this.appId=_e}fetch(T){var M=this;return(0,F.Z)(function*(){const[U,Q]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),_e=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Ue={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},It={sdk_version:M.sdkVersion,app_instance_id:U,app_instance_id_token:Q,app_id:M.appId,language_code:bd()},ft={method:"POST",headers:Ue,body:JSON.stringify(It)},Vt=fetch(_e,ft),Ct=new Promise((_i,yi)=>{T.signal.addEventListener(()=>{const sl=new Error("The operation was aborted.");sl.name="AbortError",yi(sl)})});let Ir;try{yield Promise.race([Vt,Ct]),Ir=yield Vt}catch(_i){let yi="fetch-client-network";throw"AbortError"===_i.name&&(yi="fetch-timeout"),Fn.create(yi,{originalErrorMessage:_i.message})}let tr=Ir.status;const vs=Ir.headers.get("ETag")||void 0;let ei,mi;if(200===Ir.status){let _i;try{_i=yield Ir.json()}catch(yi){throw Fn.create("fetch-client-parse",{originalErrorMessage:yi.message})}ei=_i.entries,mi=_i.state}if("INSTANCE_STATE_UNSPECIFIED"===mi?tr=500:"NO_CHANGE"===mi?tr=304:("NO_TEMPLATE"===mi||"EMPTY_CONFIG"===mi)&&(ei={}),304!==tr&&200!==tr)throw Fn.create("fetch-status",{httpStatus:tr});return{status:tr,eTag:vs,config:ei}})()}}class Wg{constructor(T,M){this.client=T,this.storage=M}fetch(T){var M=this;return(0,F.Z)(function*(){const U=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(T,U)})()}attemptFetch(T,{throttleEndTimeMillis:M,backoffCount:U}){var Q=this;return(0,F.Z)(function*(){yield function Us(I,T){return new Promise((M,U)=>{const Q=Math.max(T-Date.now(),0),re=setTimeout(M,Q);I.addEventListener(()=>{clearTimeout(re),U(Fn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,M);try{const re=yield Q.client.fetch(T);return yield Q.storage.deleteThrottleMetadata(),re}catch(re){if(!function Id(I){if(!(I instanceof ie.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}(re))throw re;const _e={throttleEndTimeMillis:Date.now()+(0,ie.$s)(U),backoffCount:U+1};return yield Q.storage.setThrottleMetadata(_e),Q.attemptFetch(T,_e)}})()}}class Dd{constructor(T,M,U,Q,re){this.app=T,this._client=M,this._storageCache=U,this._storage=Q,this._logger=re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function nc(I,T){const M=I.target.error||void 0;return Fn.create(T,{originalErrorMessage:M&&M.message})}const Bs="app_namespace_store";class Zg{constructor(T,M,U,Q=function Kg(){return new Promise((I,T)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=U=>{T(nc(U,"storage-open"))},M.onsuccess=U=>{I(U.target.result)},M.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore(Bs,{keyPath:"compositeKey"})}}catch(M){T(Fn.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=T,this.appName=M,this.namespace=U,this.openDbPromise=Q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var M=this;return(0,F.Z)(function*(){const U=yield M.openDbPromise;return new Promise((Q,re)=>{const Ue=U.transaction([Bs],"readonly").objectStore(Bs),It=M.createCompositeKey(T);try{const ft=Ue.get(It);ft.onerror=Vt=>{re(nc(Vt,"storage-get"))},ft.onsuccess=Vt=>{const Ct=Vt.target.result;Q(Ct?Ct.value:void 0)}}catch(ft){re(Fn.create("storage-get",{originalErrorMessage:ft&&ft.message}))}})})()}set(T,M){var U=this;return(0,F.Z)(function*(){const Q=yield U.openDbPromise;return new Promise((re,_e)=>{const It=Q.transaction([Bs],"readwrite").objectStore(Bs),ft=U.createCompositeKey(T);try{const Vt=It.put({compositeKey:ft,value:M});Vt.onerror=Ct=>{_e(nc(Ct,"storage-set"))},Vt.onsuccess=()=>{re()}}catch(Vt){_e(Fn.create("storage-set",{originalErrorMessage:Vt&&Vt.message}))}})})()}delete(T){var M=this;return(0,F.Z)(function*(){const U=yield M.openDbPromise;return new Promise((Q,re)=>{const Ue=U.transaction([Bs],"readwrite").objectStore(Bs),It=M.createCompositeKey(T);try{const ft=Ue.delete(It);ft.onerror=Vt=>{re(nc(Vt,"storage-delete"))},ft.onsuccess=()=>{Q()}}catch(ft){re(Fn.create("storage-delete",{originalErrorMessage:ft&&ft.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Sd{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,F.Z)(function*(){const M=T.storage.getLastFetchStatus(),U=T.storage.getLastSuccessfulFetchTimestampMillis(),Q=T.storage.getActiveConfig(),re=yield M;re&&(T.lastFetchStatus=re);const _e=yield U;_e&&(T.lastSuccessfulFetchTimestampMillis=_e);const Ue=yield Q;Ue&&(T.activeConfig=Ue)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Hu(){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,F.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(I){return!1}})).apply(this,arguments)}!function zo(){(0,ue._registerComponent)(new me.wA("remote-config",function I(T,{instanceIdentifier:M}){const U=T.getProvider("app").getImmediate(),Q=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Fn.create("registration-window");if(!(0,ie.hl)())throw Fn.create("indexed-db-unavailable");const{projectId:re,apiKey:_e,appId:Ue}=U.options;if(!re)throw Fn.create("registration-project-id");if(!_e)throw Fn.create("registration-api-key");if(!Ue)throw Fn.create("registration-app-id");const It=new Zg(Ue,U.name,M=M||"firebase"),ft=new Sd(It),Vt=new le.Yd($i);Vt.logLevel=le.in.ERROR;const Ct=new Cr(Q,ue.SDK_VERSION,M,re,_e,Ue),Ir=new Wg(Ct,It),tr=new Gg(Ir,It,ft,Vt),vs=new Dd(U,tr,ft,It,Vt);return function on(I){const T=(0,ie.m9)(I);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(vs),vs},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)($i,"0.3.8"),(0,ue.registerVersion)($i,"0.3.8","esm2017")}();const xd="/firebase-messaging-sw.js",br="/firebase-cloud-messaging-push-scope",fo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ko="google.c.a.c_id",Rd="google.c.a.c_l",Af="google.c.a.ts",Md="google.c.a.e";var Zo=(()=>{return(I=Zo||(Zo={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Zo;var I})();function Pr(I){const T=new Uint8Array(I);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Nd(I){const M=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(M),Q=new Uint8Array(U.length);for(let re=0;re<U.length;++re)Q[re]=U.charCodeAt(re);return Q}const kr="fcm_token_details_db",ui="fcm_token_object_Store";function rc(I){return Pd.apply(this,arguments)}function Pd(){return Pd=(0,F.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(re=>re.name).includes(kr))return null;let T=null;return(yield(0,oe.X3)(kr,5,{upgrade:(U=(0,F.Z)(function*(Q,re,_e,Ue){var It;if(re<2||!Q.objectStoreNames.contains(ui))return;const ft=Ue.objectStore(ui),Vt=yield ft.index("fcmSenderId").get(I);if(yield ft.clear(),Vt)if(2===re){const Ct=Vt;if(!Ct.auth||!Ct.p256dh||!Ct.endpoint)return;T={token:Ct.fcmToken,createTime:null!==(It=Ct.createTime)&&void 0!==It?It:Date.now(),subscriptionOptions:{auth:Ct.auth,p256dh:Ct.p256dh,endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:"string"==typeof Ct.vapidKey?Ct.vapidKey:Pr(Ct.vapidKey)}}}else if(3===re){const Ct=Vt;T={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:Pr(Ct.auth),p256dh:Pr(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:Pr(Ct.vapidKey)}}}else if(4===re){const Ct=Vt;T={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:Pr(Ct.auth),p256dh:Pr(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:Pr(Ct.vapidKey)}}}}),function(re,_e,Ue,It){return U.apply(this,arguments)})})).close(),yield(0,oe.Lj)(kr),yield(0,oe.Lj)("fcm_vapid_details_db"),yield(0,oe.Lj)("undefined"),ic(T)?T:null;var U}),Pd.apply(this,arguments)}function ic(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:T}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Zi="firebase-messaging-store";let xf=null;function rn(){return xf||(xf=(0,oe.X3)("firebase-messaging-database",1,{upgrade:(I,T)=>{0===T&&I.createObjectStore(Zi)}})),xf}function ja(I){return go.apply(this,arguments)}function go(){return(go=(0,F.Z)(function*(I){const T=lr(I),U=yield(yield rn()).transaction(Zi).objectStore(Zi).get(T);if(U)return U;{const Q=yield rc(I.appConfig.senderId);if(Q)return yield Yt(I,Q),Q}})).apply(this,arguments)}function Yt(I,T){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,F.Z)(function*(I,T){const M=lr(I),Q=(yield rn()).transaction(Zi,"readwrite");return yield Q.objectStore(Zi).put(T,M),yield Q.done,T})).apply(this,arguments)}function $u(I){return js.apply(this,arguments)}function js(){return(js=(0,F.Z)(function*(I){const T=lr(I),U=(yield rn()).transaction(Zi,"readwrite");yield U.objectStore(Zi).delete(T),yield U.done})).apply(this,arguments)}function lr({appConfig:I}){return I.appId}const vn=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Yi(I,T){return cr.apply(this,arguments)}function cr(){return(cr=(0,F.Z)(function*(I,T){const M=yield Jo(I),U=Xo(T),Q={method:"POST",headers:M,body:JSON.stringify(U)};let re;try{re=yield(yield fetch(Qi(I.appConfig),Q)).json()}catch(_e){throw vn.create("token-subscribe-failed",{errorInfo:_e})}if(re.error)throw vn.create("token-subscribe-failed",{errorInfo:re.error.message});if(!re.token)throw vn.create("token-subscribe-no-token");return re.token})).apply(this,arguments)}function mo(I,T){return ps.apply(this,arguments)}function ps(){return(ps=(0,F.Z)(function*(I,T){const M=yield Jo(I),U=Xo(T.subscriptionOptions),Q={method:"PATCH",headers:M,body:JSON.stringify(U)};let re;try{re=yield(yield fetch(`${Qi(I.appConfig)}/${T.token}`,Q)).json()}catch(_e){throw vn.create("token-update-failed",{errorInfo:_e})}if(re.error)throw vn.create("token-update-failed",{errorInfo:re.error.message});if(!re.token)throw vn.create("token-update-no-token");return re.token})).apply(this,arguments)}function $a(I,T){return Si.apply(this,arguments)}function Si(){return(Si=(0,F.Z)(function*(I,T){const U={method:"DELETE",headers:yield Jo(I)};try{const re=yield(yield fetch(`${Qi(I.appConfig)}/${T}`,U)).json();if(re.error)throw vn.create("token-unsubscribe-failed",{errorInfo:re.error.message})}catch(Q){throw vn.create("token-unsubscribe-failed",{errorInfo:Q})}})).apply(this,arguments)}function Qi({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Jo(I){return gt.apply(this,arguments)}function gt(){return(gt=(0,F.Z)(function*({appConfig:I,installations:T}){const M=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Xo({p256dh:I,auth:T,endpoint:M,vapidKey:U}){const Q={web:{endpoint:M,auth:T,p256dh:I}};return U!==fo&&(Q.web.applicationPubKey=U),Q}const Gu=6048e5;function Ga(I){return ac.apply(this,arguments)}function ac(){return(ac=(0,F.Z)(function*(I){const T=yield mn(I.swRegistration,I.vapidKey),M={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:T.endpoint,auth:Pr(T.getKey("auth")),p256dh:Pr(T.getKey("p256dh"))},U=yield ja(I.firebaseDependencies);if(U){if(_o(U.subscriptionOptions,M))return Date.now()>=U.createTime+Gu?lc(I,{token:U.token,createTime:Date.now(),subscriptionOptions:M}):U.token;try{yield $a(I.firebaseDependencies,U.token)}catch(Q){console.warn(Q)}return Nt(I.firebaseDependencies,M)}return Nt(I.firebaseDependencies,M)})).apply(this,arguments)}function Wa(I){return uc.apply(this,arguments)}function uc(){return(uc=(0,F.Z)(function*(I){const T=yield ja(I.firebaseDependencies);T&&(yield $a(I.firebaseDependencies,T.token),yield $u(I.firebaseDependencies));const M=yield I.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function lc(I,T){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,F.Z)(function*(I,T){try{const M=yield mo(I.firebaseDependencies,T),U=Object.assign(Object.assign({},T),{token:M,createTime:Date.now()});return yield Yt(I.firebaseDependencies,U),M}catch(M){throw yield Wa(I),M}})).apply(this,arguments)}function Nt(I,T){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,F.Z)(function*(I,T){const U={token:yield Yi(I,T),createTime:Date.now(),subscriptionOptions:T};return yield Yt(I,U),U.token})).apply(this,arguments)}function mn(I,T){return ea.apply(this,arguments)}function ea(){return(ea=(0,F.Z)(function*(I,T){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Nd(T)})})).apply(this,arguments)}function _o(I,T){return T.vapidKey===I.vapidKey&&T.endpoint===I.endpoint&&T.auth===I.auth&&T.p256dh===I.p256dh}function li(I){const T={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function qa(I,T){if(!T.notification)return;I.notification={};const M=T.notification.title;M&&(I.notification.title=M);const U=T.notification.body;U&&(I.notification.body=U);const Q=T.notification.image;Q&&(I.notification.image=Q)}(T,I),function cc(I,T){!T.data||(I.data=T.data)}(T,I),function Yg(I,T){if(!T.fcmOptions)return;I.fcmOptions={};const M=T.fcmOptions.link;M&&(I.fcmOptions.link=M);const U=T.fcmOptions.analytics_label;U&&(I.fcmOptions.analyticsLabel=U)}(T,I),T}function qu(I){return"object"==typeof I&&!!I&&Ko in I}function za(I,T){const M=[];for(let U=0;U<I.length;U++)M.push(I.charAt(U)),U<T.length&&M.push(T.charAt(U));return M.join("")}function Ln(I){return vn.create("missing-app-config-values",{valueName:I})}za("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),za("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class gs{constructor(T,M,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Q=function zu(I){if(!I||!I.options)throw Ln("App Configuration Object");if(!I.name)throw Ln("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:M}=I;for(const U of T)if(!M[U])throw Ln(U);return{appName:I.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:Q,installations:M,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Ka(I){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,F.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(xd,{scope:br}),I.swRegistration.update().catch(()=>{})}catch(T){throw vn.create("failed-service-worker-registration",{browserErrorMessage:T.message})}})).apply(this,arguments)}function Ai(I,T){return dc.apply(this,arguments)}function dc(){return(dc=(0,F.Z)(function*(I,T){if(!T&&!I.swRegistration&&(yield Ka(I)),T||!I.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw vn.create("invalid-sw-registration");I.swRegistration=T}})).apply(this,arguments)}function Ku(I,T){return hc.apply(this,arguments)}function hc(){return(hc=(0,F.Z)(function*(I,T){T?I.vapidKey=T:I.vapidKey||(I.vapidKey=fo)})).apply(this,arguments)}function Za(){return(Za=(0,F.Z)(function*(I,T){if(!navigator)throw vn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw vn.create("permission-blocked");return yield Ku(I,null==T?void 0:T.vapidKey),yield Ai(I,null==T?void 0:T.serviceWorkerRegistration),Ga(I)})).apply(this,arguments)}function Ya(I,T,M){return fc.apply(this,arguments)}function fc(){return(fc=(0,F.Z)(function*(I,T,M){const U=Qa(T);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:M[Ko],message_name:M[Rd],message_time:M[Af],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Qa(I){switch(I){case Zo.NOTIFICATION_CLICKED:return"notification_open";case Zo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function pc(){return(pc=(0,F.Z)(function*(I,T){const M=T.data;if(!M.isFirebaseMessaging)return;I.onMessageHandler&&M.messageType===Zo.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(li(M)):I.onMessageHandler.next(li(M)));const U=M.data;qu(U)&&"1"===U[Md]&&(yield Ya(I,M.messageType,U))})).apply(this,arguments)}const ta="@firebase/messaging",kd=I=>{const T=new gs(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Qg(I,T){return pc.apply(this,arguments)}(T,M)),T},na=I=>{const T=I.getProvider("messaging").getImmediate();return{getToken:U=>function Zu(I,T){return Za.apply(this,arguments)}(T,U)}};function ra(){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,F.Z)(function*(){try{yield(0,ie.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Od(){(0,ue._registerComponent)(new me.wA("messaging",kd,"PUBLIC")),(0,ue._registerComponent)(new me.wA("messaging-internal",na,"PRIVATE")),(0,ue.registerVersion)(ta,"0.9.13"),(0,ue.registerVersion)(ta,"0.9.13","esm2017")}();const Fd="analytics",Jg="firebase_id",ms="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ia="https://www.googletagmanager.com/gtag/js",Jn=new le.Yd("@firebase/analytics");function Nf(I){return Promise.all(I.map(T=>T.catch(M=>M)))}function yo(I,T){const M=document.createElement("script");M.src=`${ia}?l=${I}&id=${T}`,M.async=!0,document.head.appendChild(M)}function Vd(I,T,M,U,Q,re){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,F.Z)(function*(I,T,M,U,Q,re){const _e=U[Q];try{if(_e)yield T[_e];else{const It=(yield Nf(M)).find(ft=>ft.measurementId===Q);It&&(yield T[It.appId])}}catch(Ue){Jn.error(Ue)}I("config",Q,re)})).apply(this,arguments)}function Ju(I,T,M,U,Q){return vo.apply(this,arguments)}function vo(){return(vo=(0,F.Z)(function*(I,T,M,U,Q){try{let re=[];if(Q&&Q.send_to){let _e=Q.send_to;Array.isArray(_e)||(_e=[_e]);const Ue=yield Nf(M);for(const It of _e){const ft=Ue.find(Ct=>Ct.measurementId===It),Vt=ft&&T[ft.appId];if(!Vt){re=[];break}re.push(Vt)}}0===re.length&&(re=Object.values(T)),yield Promise.all(re),I("event",U,Q||{})}catch(re){Jn.error(re)}})).apply(this,arguments)}function un(){const I=window.document.getElementsByTagName("script");for(const T of Object.values(I))if(T.src&&T.src.includes(ia))return T;return null}const tt=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),gc=new class wn{constructor(T={},M=1e3){this.throttleMetadata=T,this.intervalMillis=M}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,M){this.throttleMetadata[T]=M}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Bd(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function es(I){return mc.apply(this,arguments)}function mc(){return(mc=(0,F.Z)(function*(I){var T;const{appId:M,apiKey:U}=I,Q={method:"GET",headers:Bd(U)},re=ms.replace("{app-id}",M),_e=yield fetch(re,Q);if(200!==_e.status&&304!==_e.status){let Ue="";try{const It=yield _e.json();(null===(T=It.error)||void 0===T?void 0:T.message)&&(Ue=It.error.message)}catch(It){}throw tt.create("config-fetch-failed",{httpStatus:_e.status,responseMessage:Ue})}return _e.json()})).apply(this,arguments)}function ln(I){return eu.apply(this,arguments)}function eu(){return(eu=(0,F.Z)(function*(I,T=gc,M){const{appId:U,apiKey:Q,measurementId:re}=I.options;if(!U)throw tt.create("no-app-id");if(!Q){if(re)return{measurementId:re,appId:U};throw tt.create("no-api-key")}const _e=T.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ue=new Hd;return setTimeout((0,F.Z)(function*(){Ue.abort()}),void 0!==M?M:6e4),hi({appId:U,apiKey:Q,measurementId:re},_e,Ue,T)})).apply(this,arguments)}function hi(I,T,M){return _t.apply(this,arguments)}function _t(){return(_t=(0,F.Z)(function*(I,{throttleEndTimeMillis:T,backoffCount:M},U,Q=gc){const{appId:re,measurementId:_e}=I;try{yield Xu(U,T)}catch(Ue){if(_e)return Jn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${_e} provided in the "measurementId" field in the local Firebase config. [${Ue.message}]`),{appId:re,measurementId:_e};throw Ue}try{const Ue=yield es(I);return Q.deleteThrottleMetadata(re),Ue}catch(Ue){if(!jd(Ue)){if(Q.deleteThrottleMetadata(re),_e)return Jn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${_e} provided in the "measurementId" field in the local Firebase config. [${Ue.message}]`),{appId:re,measurementId:_e};throw Ue}const It=503===Number(Ue.customData.httpStatus)?(0,ie.$s)(M,Q.intervalMillis,30):(0,ie.$s)(M,Q.intervalMillis),ft={throttleEndTimeMillis:Date.now()+It,backoffCount:M+1};return Q.setThrottleMetadata(re,ft),Jn.debug(`Calling attemptFetch again in ${It} millis`),hi(I,ft,U,Q)}})).apply(this,arguments)}function Xu(I,T){return new Promise((M,U)=>{const Q=Math.max(T-Date.now(),0),re=setTimeout(M,Q);I.addEventListener(()=>{clearTimeout(re),U(tt.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function jd(I){if(!(I instanceof ie.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Hd{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}function _c(){return pn.apply(this,arguments)}function pn(){return(pn=(0,F.Z)(function*(){if(!(0,ie.hl)())return Jn.warn(tt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(I){return Jn.warn(tt.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function aa(){return(aa=(0,F.Z)(function*(I,T,M,U,Q,re,_e){var Ue;const It=ln(I);It.then(tr=>{M[tr.measurementId]=tr.appId,I.options.measurementId&&tr.measurementId!==I.options.measurementId&&Jn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${tr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(tr=>Jn.error(tr)),T.push(It);const ft=_c().then(tr=>{if(tr)return U.getId()}),[Vt,Ct]=yield Promise.all([It,ft]);un()||yo(re,Vt.measurementId),Q("js",new Date);const Ir=null!==(Ue=null==_e?void 0:_e.config)&&void 0!==Ue?Ue:{};return Ir.origin="firebase",Ir.update=!0,null!=Ct&&(Ir[Jg]=Ct),Q("config",Vt.measurementId,Ir),Vt.measurementId})).apply(this,arguments)}class $s{constructor(T){this.app=T}_delete(){return delete dr[this.app.options.appId],Promise.resolve()}}let dr={},el=[];const Gs={};let la,wo,ua="dataLayer",ca=!1;function tu(I,T,M){!function da(){const I=[];if((0,ie.ru)()&&I.push("This is a browser extension environment."),(0,ie.zI)()||I.push("Cookies are not available."),I.length>0){const T=I.map((U,Q)=>`(${Q+1}) ${U}`).join(" "),M=tt.create("invalid-analytics-context",{errorInfo:T});Jn.warn(M.message)}}();const U=I.options.appId;if(!U)throw tt.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw tt.create("no-api-key");Jn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=dr[U])throw tt.create("already-exists",{id:U});if(!ca){!function Yu(I){let T=[];Array.isArray(window[I])?T=window[I]:window[I]=T}(ua);const{wrappedGtag:re,gtagCore:_e}=function Xg(I,T,M,U,Q){let re=function(..._e){window[U].push(arguments)};return window[Q]&&"function"==typeof window[Q]&&(re=window[Q]),window[Q]=function Ud(I,T,M,U){function re(){return(re=(0,F.Z)(function*(_e,Ue,It){try{"event"===_e?yield Ju(I,T,M,Ue,It):"config"===_e?yield Vd(I,T,M,U,Ue,It):I("set",Ue)}catch(ft){Jn.error(ft)}})).apply(this,arguments)}return function Q(_e,Ue,It){return re.apply(this,arguments)}}(re,I,T,M),{gtagCore:re,wrappedGtag:window[Q]}}(dr,el,Gs,ua,"gtag");wo=re,la=_e,ca=!0}return dr[U]=function oa(I,T,M,U,Q,re,_e){return aa.apply(this,arguments)}(I,el,Gs,T,la,ua,M),new $s(I)}function jn(){return(jn=(0,F.Z)(function*(I,T,M,U,Q){if(Q&&Q.global)I("event",M,U);else{const re=yield T;I("event",M,Object.assign(Object.assign({},U),{send_to:re}))}})).apply(this,arguments)}function nu(){return ru.apply(this,arguments)}function ru(){return(ru=(0,F.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(I){return!1}})).apply(this,arguments)}const Jr="@firebase/analytics";!function zs(){(0,ue._registerComponent)(new me.wA(Fd,(T,{options:M})=>tu(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ue._registerComponent)(new me.wA("analytics-internal",function I(T){try{const M=T.getProvider(Fd).getImmediate();return{logEvent:(U,Q,re)=>function ha(I,T,M,U){I=(0,ie.m9)(I),function qs(I,T,M,U,Q){return jn.apply(this,arguments)}(wo,dr[I.app.options.appId],T,M,U).catch(Q=>Jn.error(Q))}(M,U,Q,re)}}catch(M){throw tt.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ue.registerVersion)(Jr,"0.7.9"),(0,ue.registerVersion)(Jr,"0.7.9","esm2017")}();var Io=O(4408),Cn=O(7565);const Do=new class yc extends Cn.v{}(class nl extends Io.o{constructor(T,M){super(T,M),this.scheduler=T,this.work=M}schedule(T,M=0){return M>0?super.schedule(T,M):(this.delay=M,this.state=T,this.scheduler.flush(this),this)}execute(T,M){return M>0||this.closed?super.execute(T,M):this._execute(T,M)}requestAsyncId(T,M,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(T,M,U):T.flush(this)}});var vc=O(4986),gi=O(8505),Xr=O(5363),fa=O(9468);const To=new p.GfV("7.3.0"),So="__angularfire_symbol__analyticsIsSupportedValue",pa="__angularfire_symbol__analyticsIsSupported",Ao="__angularfire_symbol__remoteConfigIsSupportedValue",ys="__angularfire_symbol__remoteConfigIsSupported",iu="__angularfire_symbol__messagingIsSupportedValue",Rt="__angularfire_symbol__messagingIsSupported";function nm(I,T,M){if(T){if(1===T.length)return T[0];const re=T.filter(_e=>_e.app===M);if(1===re.length)return re[0]}return M.container.getProvider(I).getImmediate({optional:!0})}globalThis[pa]||(globalThis[pa]=nu().then(I=>globalThis[So]=I).catch(()=>globalThis[So]=!1)),globalThis[Rt]||(globalThis[Rt]=ra().then(I=>globalThis[iu]=I).catch(()=>globalThis[iu]=!1)),globalThis[ys]||(globalThis[ys]=Hu().then(I=>globalThis[Ao]=I).catch(()=>globalThis[Ao]=!1));const Gd=(I,T)=>{const M=T?[T]:(0,ee.C6)(),U=[];return M.forEach(Q=>{Q.container.getProvider(I).instances.forEach(_e=>{U.includes(_e)||U.push(_e)})}),U};function Zs(){}class xi{constructor(T,M=Do){this.zone=T,this.delegate=M}now(){return this.delegate.now()}schedule(T,M,U){const Q=this.zone;return this.delegate.schedule(function(_e){Q.runGuarded(()=>{T.apply(this,[_e])})},M,U)}}class il{constructor(T){this.zone=T,this.task=null}call(T,M){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zs,{},Zs,Zs)),M.pipe((0,gi.b)({next:U,complete:U,error:U})).subscribe(T).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Wd=(()=>{class I{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new xi(Zone.current)),this.insideAngular=M.run(()=>new xi(Zone.current,vc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(M){return new(M||I)(p.LFG(p.R0b))},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function ns(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function er(I){return I.pipe((0,Xr.Q)(ns().outsideAngular))}function ga(I){return ns(),function ma(I){return function(M){return(M=M.lift(new il(I.ngZone))).pipe((0,fa.R)(I.outsideAngular),(0,Xr.Q)(I.insideAngular))}}(ns())(I)}},2090:(Xe,Ee,O)=>{O.d(Ee,{BH:()=>We,LL:()=>ae,ZR:()=>ve,gQ:()=>Wr,zI:()=>Y,hu:()=>ee,g5:()=>F,US:()=>me,tV:()=>ce,h$:()=>le,L:()=>oe,$s:()=>Lt,r3:()=>xr,Sg:()=>Re,ne:()=>Hi,p$:()=>W,vZ:()=>ii,ZB:()=>$,gK:()=>qr,pd:()=>Ps,m9:()=>Er,z$:()=>ke,GJ:()=>Zt,jU:()=>Te,ru:()=>qe,d:()=>Se,xb:()=>Ft,w1:()=>be,hl:()=>G,uI:()=>Be,UG:()=>pe,Yr:()=>je,b$:()=>Qe,G6:()=>He,Mn:()=>Ie,w9:()=>tn,cI:()=>Ut,UI:()=>Bi,xO:()=>Rr,zd:()=>ji,DV:()=>$t,ug:()=>Bt,dS:()=>uo,Pz:()=>Ot,Dv:()=>ks,Wj:()=>On,lb:()=>oi,eu:()=>Ce});const ee=function(B,z){if(!B)throw F(z)},F=function(B){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+B)},ue=function(B){const z=[];let K=0;for(let De=0;De<B.length;De++){let q=B.charCodeAt(De);q<128?z[K++]=q:q<2048?(z[K++]=q>>6|192,z[K++]=63&q|128):55296==(64512&q)&&De+1<B.length&&56320==(64512&B.charCodeAt(De+1))?(q=65536+((1023&q)<<10)+(1023&B.charCodeAt(++De)),z[K++]=q>>18|240,z[K++]=q>>12&63|128,z[K++]=q>>6&63|128,z[K++]=63&q|128):(z[K++]=q>>12|224,z[K++]=q>>6&63|128,z[K++]=63&q|128)}return z},me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,z){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,De=[];for(let q=0;q<B.length;q+=3){const X=B[q],Ne=q+1<B.length,et=Ne?B[q+1]:0,pt=q+2<B.length,bt=pt?B[q+2]:0;let Hn=(15&et)<<2|bt>>6,Mr=63&bt;pt||(Mr=64,Ne||(Hn=64)),De.push(K[X>>2],K[(3&X)<<4|et>>4],K[Hn],K[Mr])}return De.join("")},encodeString(B,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(B):this.encodeByteArray(ue(B),z)},decodeString(B,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(B):function(B){const z=[];let K=0,De=0;for(;K<B.length;){const q=B[K++];if(q<128)z[De++]=String.fromCharCode(q);else if(q>191&&q<224){const X=B[K++];z[De++]=String.fromCharCode((31&q)<<6|63&X)}else if(q>239&&q<365){const pt=((7&q)<<18|(63&B[K++])<<12|(63&B[K++])<<6|63&B[K++])-65536;z[De++]=String.fromCharCode(55296+(pt>>10)),z[De++]=String.fromCharCode(56320+(1023&pt))}else{const X=B[K++],Ne=B[K++];z[De++]=String.fromCharCode((15&q)<<12|(63&X)<<6|63&Ne)}}return z.join("")}(this.decodeStringToByteArray(B,z))},decodeStringToByteArray(B,z){this.init_();const K=z?this.charToByteMapWebSafe_:this.charToByteMap_,De=[];for(let q=0;q<B.length;){const X=K[B.charAt(q++)],et=q<B.length?K[B.charAt(q)]:0;++q;const bt=q<B.length?K[B.charAt(q)]:64;++q;const Et=q<B.length?K[B.charAt(q)]:64;if(++q,null==X||null==et||null==bt||null==Et)throw Error();De.push(X<<2|et>>4),64!==bt&&(De.push(et<<4&240|bt>>2),64!==Et&&De.push(bt<<6&192|Et))}return De},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}},le=function(B){const z=ue(B);return me.encodeByteArray(z,!0)},oe=function(B){return le(B).replace(/\./g,"")},ce=function(B){try{return me.decodeString(B,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function W(B){return $(void 0,B)}function $(B,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return z}for(const K in z)!z.hasOwnProperty(K)||!ne(K)||(B[K]=$(B[K],z[K]));return B}function ne(B){return"__proto__"!==B}class We{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,K)=>{this.resolve=z,this.reject=K})}wrapCallback(z){return(K,De)=>{K?this.reject(K):this.resolve(De),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(K):z(K,De))}}}function Re(B,z){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const De=z||"demo-project",q=B.iat||0,X=B.sub||B.user_id;if(!X)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ne=Object.assign({iss:`https://securetoken.google.com/${De}`,aud:De,iat:q,exp:q+3600,auth_time:q,sub:X,user_id:X,firebase:{sign_in_provider:"custom",identities:{}}},B);return[oe(JSON.stringify({alg:"none",type:"JWT"})),oe(JSON.stringify(Ne)),""].join(".")}function ke(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Be(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function pe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(B){return!1}}function Te(){return"object"==typeof self&&self.self===self}function qe(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function Qe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Se(){return ke().indexOf("Electron/")>=0}function be(){const B=ke();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function Ie(){return ke().indexOf("MSAppHost/")>=0}function je(){return!1}function He(){return!pe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function G(){return"object"==typeof indexedDB}function Ce(){return new Promise((B,z)=>{try{let K=!0;const De="validate-browser-context-for-indexeddb-analytics-module",q=self.indexedDB.open(De);q.onsuccess=()=>{q.result.close(),K||self.indexedDB.deleteDatabase(De),B(!0)},q.onupgradeneeded=()=>{K=!1},q.onerror=()=>{var X;z((null===(X=q.error)||void 0===X?void 0:X.message)||"")}}catch(K){z(K)}})}function Y(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ve extends Error{constructor(z,K,De){super(K),this.code=z,this.customData=De,this.name="FirebaseError",Object.setPrototypeOf(this,ve.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ae.prototype.create)}}class ae{constructor(z,K,De){this.service=z,this.serviceName=K,this.errors=De}create(z,...K){const De=K[0]||{},q=`${this.service}/${z}`,X=this.errors[z],Ne=X?function Oe(B,z){return B.replace(dt,(K,De)=>{const q=z[De];return null!=q?String(q):`<${De}?>`})}(X,De):"Error";return new ve(q,`${this.serviceName}: ${Ne} (${q}).`,De)}}const dt=/\{\$([^}]+)}/g;function Ut(B){return JSON.parse(B)}function Ot(B){return JSON.stringify(B)}const Je=function(B){let z={},K={},De={},q="";try{const X=B.split(".");z=Ut(ce(X[0])||""),K=Ut(ce(X[1])||""),q=X[2],De=K.d||{},delete K.d}catch(X){}return{header:z,claims:K,data:De,signature:q}},tn=function(B){const K=Je(B).claims;return!!K&&"object"==typeof K&&K.hasOwnProperty("iat")},Zt=function(B){const z=Je(B).claims;return"object"==typeof z&&!0===z.admin};function xr(B,z){return Object.prototype.hasOwnProperty.call(B,z)}function $t(B,z){if(Object.prototype.hasOwnProperty.call(B,z))return B[z]}function Ft(B){for(const z in B)if(Object.prototype.hasOwnProperty.call(B,z))return!1;return!0}function Bi(B,z,K){const De={};for(const q in B)Object.prototype.hasOwnProperty.call(B,q)&&(De[q]=z.call(K,B[q],q,B));return De}function ii(B,z){if(B===z)return!0;const K=Object.keys(B),De=Object.keys(z);for(const q of K){if(!De.includes(q))return!1;const X=B[q],Ne=z[q];if(yr(X)&&yr(Ne)){if(!ii(X,Ne))return!1}else if(X!==Ne)return!1}for(const q of De)if(!K.includes(q))return!1;return!0}function yr(B){return null!==B&&"object"==typeof B}function Rr(B){const z=[];for(const[K,De]of Object.entries(B))Array.isArray(De)?De.forEach(q=>{z.push(encodeURIComponent(K)+"="+encodeURIComponent(q))}):z.push(encodeURIComponent(K)+"="+encodeURIComponent(De));return z.length?"&"+z.join("&"):""}function ji(B){const z={};return B.replace(/^\?/,"").split("&").forEach(De=>{if(De){const[q,X]=De.split("=");z[decodeURIComponent(q)]=decodeURIComponent(X)}}),z}function Ps(B){const z=B.indexOf("?");if(!z)return"";const K=B.indexOf("#",z);return B.substring(z,K>0?K:void 0)}class Wr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,K){K||(K=0);const De=this.W_;if("string"==typeof z)for(let Et=0;Et<16;Et++)De[Et]=z.charCodeAt(K)<<24|z.charCodeAt(K+1)<<16|z.charCodeAt(K+2)<<8|z.charCodeAt(K+3),K+=4;else for(let Et=0;Et<16;Et++)De[Et]=z[K]<<24|z[K+1]<<16|z[K+2]<<8|z[K+3],K+=4;for(let Et=16;Et<80;Et++){const Hn=De[Et-3]^De[Et-8]^De[Et-14]^De[Et-16];De[Et]=4294967295&(Hn<<1|Hn>>>31)}let bt,hn,q=this.chain_[0],X=this.chain_[1],Ne=this.chain_[2],et=this.chain_[3],pt=this.chain_[4];for(let Et=0;Et<80;Et++){Et<40?Et<20?(bt=et^X&(Ne^et),hn=1518500249):(bt=X^Ne^et,hn=1859775393):Et<60?(bt=X&Ne|et&(X|Ne),hn=2400959708):(bt=X^Ne^et,hn=3395469782);const Hn=(q<<5|q>>>27)+bt+pt+hn+De[Et]&4294967295;pt=et,et=Ne,Ne=4294967295&(X<<30|X>>>2),X=q,q=Hn}this.chain_[0]=this.chain_[0]+q&4294967295,this.chain_[1]=this.chain_[1]+X&4294967295,this.chain_[2]=this.chain_[2]+Ne&4294967295,this.chain_[3]=this.chain_[3]+et&4294967295,this.chain_[4]=this.chain_[4]+pt&4294967295}update(z,K){if(null==z)return;void 0===K&&(K=z.length);const De=K-this.blockSize;let q=0;const X=this.buf_;let Ne=this.inbuf_;for(;q<K;){if(0===Ne)for(;q<=De;)this.compress_(z,q),q+=this.blockSize;if("string"==typeof z){for(;q<K;)if(X[Ne]=z.charCodeAt(q),++Ne,++q,Ne===this.blockSize){this.compress_(X),Ne=0;break}}else for(;q<K;)if(X[Ne]=z[q],++Ne,++q,Ne===this.blockSize){this.compress_(X),Ne=0;break}}this.inbuf_=Ne,this.total_+=K}digest(){const z=[];let K=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let q=this.blockSize-1;q>=56;q--)this.buf_[q]=255&K,K/=256;this.compress_(this.buf_);let De=0;for(let q=0;q<5;q++)for(let X=24;X>=0;X-=8)z[De]=this.chain_[q]>>X&255,++De;return z}}function Hi(B,z){const K=new mt(B,z);return K.subscribe.bind(K)}class mt{constructor(z,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{z(this)}).catch(De=>{this.error(De)})}next(z){this.forEachObserver(K=>{K.next(z)})}error(z){this.forEachObserver(K=>{K.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,K,De){let q;if(void 0===z&&void 0===K&&void 0===De)throw new Error("Missing Observer.");q=function In(B,z){if("object"!=typeof B||null===B)return!1;for(const K of z)if(K in B&&"function"==typeof B[K])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:K,complete:De},void 0===q.next&&(q.next=kn),void 0===q.error&&(q.error=kn),void 0===q.complete&&(q.complete=kn);const X=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch(Ne){}}),this.observers.push(q),X}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,z)}sendOne(z,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{K(this.observers[z])}catch(De){"undefined"!=typeof console&&console.error&&console.error(De)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kn(){}const ks=function(B,z,K,De){let q;if(De<z?q="at least "+z:De>K&&(q=0===K?"none":"no more than "+K),q)throw new Error(B+" failed: Was called with "+De+(1===De?" argument.":" arguments.")+" Expects "+q+".")};function qr(B,z){return`${B} failed: ${z} argument `}function On(B,z,K,De){if((!De||K)&&"function"!=typeof K)throw new Error(qr(B,z)+"must be a valid function.")}function oi(B,z,K,De){if((!De||K)&&("object"!=typeof K||null===K))throw new Error(qr(B,z)+"must be a valid context object.")}const uo=function(B){const z=[];let K=0;for(let De=0;De<B.length;De++){let q=B.charCodeAt(De);if(q>=55296&&q<=56319){const X=q-55296;De++,ee(De<B.length,"Surrogate pair missing trail surrogate."),q=65536+(X<<10)+(B.charCodeAt(De)-56320)}q<128?z[K++]=q:q<2048?(z[K++]=q>>6|192,z[K++]=63&q|128):q<65536?(z[K++]=q>>12|224,z[K++]=q>>6&63|128,z[K++]=63&q|128):(z[K++]=q>>18|240,z[K++]=q>>12&63|128,z[K++]=q>>6&63|128,z[K++]=63&q|128)}return z},Bt=function(B){let z=0;for(let K=0;K<B.length;K++){const De=B.charCodeAt(K);De<128?z++:De<2048?z+=2:De>=55296&&De<=56319?(z+=4,K++):z+=3}return z};function Lt(B,z=1e3,K=2){const De=z*Math.pow(K,B),q=Math.round(.5*De*(Math.random()-.5)*2);return Math.min(144e5,De+q)}function Er(B){return B&&B._delegate?B._delegate:B}},6003:(Xe,Ee,O)=>{var p=O(5e3);let ee=null;function F(){return ee}const le=new p.OlP("DocumentToken");let oe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function ce(){return(0,p.LFG)($)}()},providedIn:"platform"}),n})();const W=new p.OlP("Location Initialized");let $=(()=>{class n extends oe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ne()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ne()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(le))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function We(){return new $((0,p.LFG)(le))}()},providedIn:"platform"}),n})();function ne(){return!!window.history.pushState}function Re(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ke(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Be(n){return n&&"?"!==n[0]?"?"+n:n}let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Te(n){const e=(0,p.LFG)(le).location;return new Qe((0,p.LFG)(oe),e&&e.origin||"")}()},providedIn:"root"}),n})();const qe=new p.OlP("appBaseHref");let Qe=(()=>{class n extends pe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Re(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Be(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+Be(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+Be(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(oe),p.LFG(qe,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n extends pe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Re(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+Be(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+Be(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(oe),p.LFG(qe,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),be=(()=>{class n{constructor(t,r){this._subject=new p.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=ke(He(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Be(r))}normalize(t){return n.stripTrailingSlash(function je(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,He(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Be,n.joinWithSlash=Re,n.stripTrailingSlash=ke,n.\u0275fac=function(t){return new(t||n)(p.LFG(pe),p.LFG(oe))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Ie(){return new be((0,p.LFG)(pe),(0,p.LFG)(oe))}()},providedIn:"root"}),n})();function He(n){return n.replace(/\/index.html$/,"")}function qo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}class Ls{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Yn=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Ls(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const h=r.get(a);r.move(h,l),ho(h,i)}});for(let i=0,a=r.length;i<a;i++){const h=r.get(i).context;h.index=i,h.count=a,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{ho(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function ho(n,e){n.context.$implicit=e.item}let ur=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new on,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Bu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Bu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class on{constructor(){this.$implicit=null,this.ngIf=null}}function Bu(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,p.AaK)(e)}'.`)}let Md=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function Yo(n){return"server"===n}let ic=(()=>{class n{}return n.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new Qo((0,p.LFG)(le),window)}),n})();class Qo{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Zi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=sc(this.window.history)||sc(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function sc(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class rn{}class go extends class ja extends class me{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ie(n){ee||(ee=n)}(new go)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ha(){return Yt=Yt||document.querySelector("base"),Yt?Yt.getAttribute("href"):null}();return null==t?null:function js(n){$u=$u||document.createElement("a"),$u.setAttribute("href",n);const e=$u.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Yt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return qo(document.cookie,e)}}let $u,Yt=null;const lr=new p.OlP("TRANSITION_ID"),vn=[{provide:p.ip1,useFactory:function oc(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const r=F(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[lr,le,p.zs3],multi:!0}];class Yi{static init(){(0,p.VLi)(new Yi)}addToWindow(e){p.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const i=p.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const h=function(_){l=l||_,a--,0==a&&r(l)};i.forEach(function(_){_.whenStable(h)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let cr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const mo=new p.OlP("EventManagerPlugins");let ps=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(mo),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class $a{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=F().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Si=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Qi=(()=>{class n extends Si{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Jo),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Jo))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(le))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Jo(n){F().remove(n)}const gt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Xo=/%COMP%/g;function Ae(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ae(n,i,t):(i=i.replace(Xo,n),t.push(i))}return t}function Nt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let mn=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new ea(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case p.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new qa(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case p.ifc.ShadowDom:return new cc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ae(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ps),p.LFG(Qi),p.LFG(p.AFp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class ea{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(gt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=gt[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=gt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,i&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Nt(r)):this.eventManager.addEventListener(e,t,Nt(r))}}class qa extends ea{constructor(e,t,r,i){super(e),this.component=r;const a=Ae(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function uc(n){return"_ngcontent-%COMP%".replace(Xo,n)}(i+"-"+r.id),this.hostAttr=function lc(n){return"_nghost-%COMP%".replace(Xo,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class cc extends ea{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Ae(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const h=document.createElement("style");h.textContent=a[l],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Yg=(()=>{class n extends $a{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(le))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const qu=["alt","control","meta","shift"],zu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ln={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},gs={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ka=(()=>{class n extends $a{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="";if(qu.forEach(_=>{const w=r.indexOf(_);w>-1&&(r.splice(w,1),l+=_+".")}),l+=a,0!=r.length||0===a.length)return null;const h={};return h.domEventName=i,h.fullKey=l,h}static getEventFullKey(t){let r="",i=function Hs(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Ln.hasOwnProperty(e)&&(e=Ln[e]))}return zu[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),qu.forEach(a=>{a!=i&&gs[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(le))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Zu=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function Ai(){go.makeCurrent(),Yi.init()},multi:!0},{provide:le,useFactory:function Ku(){return(0,p.RDi)(document),document},deps:[]}]),Za=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function dc(){return new p.qLn},deps:[]},{provide:mo,useClass:Yg,multi:!0,deps:[le,p.R0b,p.Lbi]},{provide:mo,useClass:Ka,multi:!0,deps:[le]},{provide:mn,useClass:mn,deps:[ps,Qi,p.AFp]},{provide:p.FYo,useExisting:mn},{provide:Si,useExisting:Qi},{provide:Qi,useClass:Qi,deps:[le]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b]},{provide:ps,useClass:ps,deps:[mo,p.R0b]},{provide:rn,useClass:cr,deps:[]}];let Ya=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:lr,useExisting:p.AFp},vn]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(n,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:Za,imports:[Md,p.hGG]}),n})();"undefined"!=typeof window&&window;var un=O(8996),sa=O(7669);function tt(...n){const e=(0,sa.yG)(n);return(0,un.D)(n,e)}var ci=O(7579);class di extends ci.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var wn=O(8306);const{isArray:gc}=Array,{getPrototypeOf:Bd,prototype:es,keys:mc}=Object;function ln(n){if(1===n.length){const e=n[0];if(gc(e))return{args:e,keys:null};if(function eu(n){return n&&"object"==typeof n&&Bd(n)===es}(e)){const t=mc(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var hi=O(4671),_t=O(4004);const{isArray:Xu}=Array;function Hd(n){return(0,_t.U)(e=>function jd(n,e){return Xu(e)?n(...e):n(e)}(n,e))}function _c(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var pn=O(5403),oa=O(9672);function dr(n,e,t){n?(0,oa.f)(t,n,e):e()}var el=O(576);function Gs(n,e){const t=(0,el.m)(n)?n:()=>n,r=i=>i.error(t());return new wn.y(e?i=>e.schedule(r,0,i):r)}const Ws=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var la=O(8189);function ca(...n){return function wo(){return(0,la.J)(1)}()((0,un.D)(n,(0,sa.yG)(n)))}var Eo=O(8421);function da(n){return new wn.y(e=>{(0,Eo.Xf)(n()).subscribe(e)})}var tu=O(515),qs=O(727),jn=O(4482);function Co(){return(0,jn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,pn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class tl extends wn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,jn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new qs.w0;const t=this.getSubject();e.add(this.source.subscribe((0,pn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=qs.w0.EMPTY)}return e}refCount(){return Co()(this)}}function En(n,e){return(0,jn.e)((t,r)=>{let i=null,a=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,pn.x)(r,_=>{null==i||i.unsubscribe();let w=0;const D=a++;(0,Eo.Xf)(n(_,D)).subscribe(i=(0,pn.x)(r,S=>r.next(e?e(_,S,D,w++):S),()=>{i=null,h()}))},()=>{l=!0,h()}))})}var bo=O(5698);function ts(...n){const e=(0,sa.yG)(n);return(0,jn.e)((t,r)=>{(e?ca(n,t,e):ca(n,t)).subscribe(r)})}function _s(n,e,t,r,i){return(a,l)=>{let h=t,_=e,w=0;a.subscribe((0,pn.x)(l,D=>{const S=w++;_=h?n(_,D,S):(h=!0,D),r&&l.next(_)},i&&(()=>{h&&l.next(_),l.complete()})))}}function fi(n,e){return(0,jn.e)(_s(n,e,arguments.length>=2,!0))}function Qr(n,e){return(0,jn.e)((t,r)=>{let i=0;t.subscribe((0,pn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}function pi(n){return(0,jn.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,pn.x)(t,void 0,void 0,l=>{a=(0,Eo.Xf)(n(l,pi(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var Tn=O(5577);function nu(n,e){return(0,el.m)(e)?(0,Tn.z)(n,e,1):(0,Tn.z)(n,1)}function ru(n){return n<=0?()=>tu.E:(0,jn.e)((e,t)=>{let r=[];e.subscribe((0,pn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function _n(n=em){return(0,jn.e)((e,t)=>{let r=!1;e.subscribe((0,pn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function em(){return new Ws}function tm(n){return(0,jn.e)((e,t)=>{let r=!1;e.subscribe((0,pn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ha(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qr((i,a)=>n(i,a,r)):hi.y,(0,bo.q)(1),t?tm(e):_n(()=>new Ws))}var Jr=O(8505);class zs{constructor(e,t){this.id=e,this.url=t}}class Io extends zs{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class nl extends zs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Cn extends zs{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class yc extends zs{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Do extends zs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ay extends zs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vc extends zs{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class gi extends zs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xr extends zs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fa{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class To{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class So{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pa{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ao{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ys{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iu{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Rt="primary";class rl{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Xn(n){return new rl(n)}const su="ngNavigationCancelingError";function Ks(n){const e=Error("NavigationCancelingError: "+n);return e[su]=!0,e}function Gd(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],h=n[a];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function xi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!il(n[i],e[i]))return!1;return!0}function il(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function Wd(n){return Array.prototype.concat.apply([],n)}function ns(n){return n.length>0?n[n.length-1]:null}function cn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function er(n){return(0,p.CqO)(n)?n:(0,p.QGY)(n)?(0,un.D)(Promise.resolve(n)):tt(n)}const ga={exact:function I(n,e,t){if(!ft(n.segments,e.segments)||!Q(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!I(n.children[r],e.children[r],t))return!1;return!0},subset:M},ma={exact:function qd(n,e){return xi(n,e)},subset:function T(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>il(n[t],e[t]))},ignored:()=>!0};function xo(n,e,t){return ga[t.paths](n.root,e.root,t.matrixParams)&&ma[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function M(n,e,t){return U(n,e,e.segments,t)}function U(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ft(i,t)||e.hasChildren()||!Q(i,t,r))}if(n.segments.length===t.length){if(!ft(n.segments,t)||!Q(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!M(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(ft(n.segments,i)&&Q(n.segments,i,r)&&n.children[Rt])&&U(n.children[Rt],e,a,r)}}function Q(n,e,t){return e.every((r,i)=>ma[t](n[i].parameters,r.parameters))}class re{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xn(this.queryParams)),this._queryParamMap}toString(){return tr.serialize(this)}}class _e{constructor(e,t){this.segments=e,this.children=t,this.parent=null,cn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vs(this)}}class Ue{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Xn(this.parameters)),this._parameterMap}toString(){return al(this)}}function ft(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Ct{}class Ir{parse(e){const t=new My(e);return new re(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ei(e.root,!0)}`,r=function im(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${_i(t)}=${_i(i)}`).join("&"):`${_i(t)}=${_i(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function yi(n){return encodeURI(n)}(e.fragment)}`:""}`}}const tr=new Ir;function vs(n){return n.segments.map(e=>al(e)).join("/")}function ei(n,e){if(!n.hasChildren())return vs(n);if(e){const t=n.children[Rt]?ei(n.children[Rt],!1):"",r=[];return cn(n.children,(i,a)=>{a!==Rt&&r.push(`${a}:${ei(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Vt(n,e){let t=[];return cn(n.children,(r,i)=>{i===Rt&&(t=t.concat(e(r,i)))}),cn(n.children,(r,i)=>{i!==Rt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Rt?[ei(n.children[Rt],!1)]:[`${i}:${ei(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Rt]?`${vs(n)}/${t[0]}`:`${vs(n)}/(${t.join("//")})`}}function mi(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _i(n){return mi(n).replace(/%3B/gi,";")}function sl(n){return mi(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ol(n){return decodeURIComponent(n)}function Ec(n){return ol(n.replace(/\+/g,"%20"))}function al(n){return`${sl(n.path)}${function rm(n){return Object.keys(n).map(e=>`;${sl(e)}=${sl(n[e])}`).join("")}(n.parameters)}`}const Pf=/^[^\/()?;=#]+/;function Ro(n){const e=n.match(Pf);return e?e[0]:""}const Cc=/^[^=?&#]+/,sm=/^[^&#]+/;class My{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new _e([],{}):new _e([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Rt]=new _e(e,t)),r}parseSegment(){const e=Ro(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ue(ol(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ro(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Ro(this.remaining);i&&(r=i,this.capture(r))}e[ol(t)]=ol(r)}parseQueryParam(e){const t=function Ry(n){const e=n.match(Cc);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function om(n){const e=n.match(sm);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=Ec(t),a=Ec(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ro(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Rt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Rt]:new _e([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class am{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=kf(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=kf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ul(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ul(e,this._root).map(t=>t.value)}}function kf(n,e){if(n===e.value)return e;for(const t of e.children){const r=kf(n,t);if(r)return r}return null}function ul(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ul(n,t);if(r.length)return r.unshift(e),r}return[]}class Mo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function No(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class zd extends am{constructor(e,t){super(e),this.snapshot=t,Zd(this,e)}toString(){return this.snapshot.toString()}}function ou(n,e){const t=function Ny(n,e){const l=new _a([],{},{},"",{},Rt,e,null,n.root,-1,{});return new Of("",new Mo(l,[]))}(n,e),r=new di([new Ue("",{})]),i=new di({}),a=new di({}),l=new di({}),h=new di(""),_=new ll(r,i,l,h,a,Rt,e,t.root);return _.snapshot=t.root,new zd(new Mo(_,[]),t)}class ll{constructor(e,t,r,i,a,l,h,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,_t.U)(e=>Xn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,_t.U)(e=>Xn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Py(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function Kd(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class _a{constructor(e,t,r,i,a,l,h,_,w,D,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Xn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Of extends am{constructor(e,t){super(t),this.url=e,Zd(this,t)}toString(){return Ff(this._root)}}function Zd(n,e){e.value._routerState=n,e.children.forEach(t=>Zd(n,t))}function Ff(n){const e=n.children.length>0?` { ${n.children.map(Ff).join(", ")} } `:"";return`${n.value}${e}`}function Yd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,xi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),xi(e.params,t.params)||n.params.next(t.params),function Zs(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!xi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),xi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Lf(n,e){const t=xi(n.params,e.params)&&function It(n,e){return ft(n,e)&&n.every((t,r)=>xi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Lf(n.parent,e.parent))}function bc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function ky(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return bc(n,r,i);return bc(n,r)})}(n,e,t);return new Mo(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>bc(n,h)),l}}const r=function Oy(n){return new ll(new di(n.url),new di(n.params),new di(n.queryParams),new di(n.fragment),new di(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>bc(n,a));return new Mo(r,i)}}function Ys(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ic(n){return"object"==typeof n&&null!=n&&n.outlets}function Qd(n,e,t,r,i){let a={};if(r&&cn(r,(h,_)=>{a[_]=Array.isArray(h)?h.map(w=>`${w}`):`${h}`}),n===e)return new re(t,a,i);const l=Fy(n,e,t);return new re(l,a,i)}function Fy(n,e,t){const r={};return cn(n.children,(i,a)=>{r[a]=i===e?t:Fy(i,e,t)}),new _e(n.segments,r)}class lm{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ys(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Ic);if(i&&i!==ns(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Jd{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function fm(n,e,t){if(n||(n=new _e([],{})),0===n.segments.length&&n.hasChildren())return Xd(n,e,t);const r=function xE(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],h=t[r];if(Ic(h))break;const _=`${h}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!ws(_,w,l))return a;r+=2}else{if(!ws(_,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new _e(n.segments.slice(0,r.pathIndex),{});return a.children[Rt]=new _e(n.segments.slice(r.pathIndex),n.children),Xd(a,0,i)}return r.match&&0===i.length?new _e(n.segments,{}):r.match&&!n.hasChildren()?pm(n,e,t):r.match?Xd(n,0,i):pm(n,e,t)}function Xd(n,e,t){if(0===t.length)return new _e(n.segments,{});{const r=function hm(n){return Ic(n[0])?n[0].outlets:{[Rt]:n}}(t),i={};return cn(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=fm(n.children[l],e,a))}),cn(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new _e(n.segments,i)}}function pm(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Ic(a)){const _=Qs(a.outlets);return new _e(r,_)}if(0===i&&Ys(t[0])){r.push(new Ue(n.segments[e].path,Vf(t[0]))),i++;continue}const l=Ic(a)?a.outlets[Rt]:`${a}`,h=i<t.length-1?t[i+1]:null;l&&h&&Ys(h)?(r.push(new Ue(l,Vf(h))),i+=2):(r.push(new Ue(l,{})),i++)}return new _e(r,{})}function Qs(n){const e={};return cn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=pm(new _e([],{}),0,t))}),e}function Vf(n){const e={};return cn(n,(t,r)=>e[r]=`${t}`),e}function ws(n,e,t){return n==t.path&&xi(e,t.parameters)}class gm{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Yd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=No(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),cn(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=No(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=No(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=No(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new ys(a.value.snapshot))}),e.children.length&&this.forwardEvent(new pa(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Yd(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),Yd(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=function eh(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=h?h.module.componentFactoryResolver:null;l.attachRef=null,l.route=i,l.resolver=_,l.outlet&&l.outlet.activateWith(i,_),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class th{constructor(e,t){this.routes=e,this.module=t}}function uu(n){return"function"==typeof n}function cl(n){return n instanceof re}const nh=Symbol("INITIAL_VALUE");function dl(){return En(n=>function aa(...n){const e=(0,sa.yG)(n),t=(0,sa.jO)(n),{args:r,keys:i}=ln(n);if(0===r.length)return(0,un.D)([],e);const a=new wn.y(function $s(n,e,t=hi.y){return r=>{dr(e,()=>{const{length:i}=n,a=new Array(i);let l=i,h=i;for(let _=0;_<i;_++)dr(e,()=>{const w=(0,un.D)(n[_],e);let D=!1;w.subscribe((0,pn.x)(r,S=>{a[_]=S,D||(D=!0,h--),h||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>_c(i,l):hi.y));return t?a.pipe(Hd(t)):a}(n.map(e=>e.pipe((0,bo.q)(1),ts(nh)))).pipe(fi((e,t)=>{let r=!1;return t.reduce((i,a,l)=>i!==nh?i:(a===nh&&(r=!0),r||!1!==a&&l!==t.length-1&&!cl(a)?i:a),e)},nh),Qr(e=>e!==nh),(0,_t.U)(e=>cl(e)?e:!0===e),(0,bo.q)(1)))}class Ly{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new hl,this.attachRef=null}}class hl{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Ly,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Tc=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=a||Rt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const l=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,_=new Vy(t,h,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(hl),p.Y36(p.s_b),p.Y36(p._Vd),p.$8M("name"),p.Y36(p.sBO))},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Vy{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ll?this.route:e===hl?this.childContexts:this.parent.get(e,t)}}let jf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},directives:[Tc],encapsulation:2}),n})();function lu(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Hf(r,$f(e,r))}}function Hf(n,e){n.children&&lu(n.children,e)}function $f(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Gf(n){const e=n.children&&n.children.map(Gf),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Rt&&(t.component=jf),t}function Gt(n){return n.outlet||Rt}function _m(n,e){const t=n.filter(r=>Gt(r)===e);return t.push(...n.filter(r=>Gt(r)!==e)),t}const ym={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function fl(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},ym):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const a=(e.matcher||Gd)(t,n,e);if(!a)return Object.assign({},ym);const l={};cn(a.posParams,(_,w)=>{l[w]=_.path});const h=a.consumed.length>0?Object.assign(Object.assign({},l),a.consumed[a.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:a.consumed,remainingSegments:t.slice(a.consumed.length),parameters:h,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function pl(n,e,t,r,i="corrected"){if(t.length>0&&function jy(n,e,t){return t.some(r=>cu(n,e,r)&&Gt(r)!==Rt)}(n,t,r)){const l=new _e(e,function By(n,e,t,r){const i={};i[Rt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Gt(a)!==Rt){const l=new _e([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Gt(a)]=l}return i}(n,e,r,new _e(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function Hy(n,e,t){return t.some(r=>cu(n,e,r))}(n,t,r)){const l=new _e(n.segments,function Uy(n,e,t,r,i,a){const l={};for(const h of r)if(cu(n,t,h)&&!i[Gt(h)]){const _=new _e([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[Gt(h)]=_}return Object.assign(Object.assign({},i),l)}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new _e(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function cu(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function $y(n,e,t,r){return!!(Gt(n)===r||r!==Rt&&cu(e,t,n))&&("**"===n.path||fl(e,n,t).matched)}function vm(n,e,t){return 0===e.length&&!n.children[t]}class va{constructor(e){this.segmentGroup=e||null}}class Or{constructor(e){this.urlTree=e}}function du(n){return Gs(new va(n))}function Wf(n){return Gs(new Or(n))}class rh{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(p.h0i)}apply(){const e=pl(this.urlTree.root,[],[],this.config).segmentGroup,t=new _e(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Rt).pipe((0,_t.U)(a=>this.createUrlTree(Sc(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(pi(a=>{if(a instanceof Or)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof va?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Rt).pipe((0,_t.U)(i=>this.createUrlTree(Sc(i),e.queryParams,e.fragment))).pipe(pi(i=>{throw i instanceof va?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new _e([],{[Rt]:e}):e;return new re(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,_t.U)(a=>new _e([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,un.D)(i).pipe(nu(a=>{const l=r.children[a],h=_m(t,a);return this.expandSegmentGroup(e,h,l,a).pipe((0,_t.U)(_=>({segment:_,outlet:a})))}),fi((a,l)=>(a[l.outlet]=l.segment,a),{}),function Sy(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qr((i,a)=>n(i,a,r)):hi.y,ru(1),t?tm(e):_n(()=>new Ws))}())}expandSegment(e,t,r,i,a,l){return(0,un.D)(r).pipe(nu(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,l).pipe(pi(w=>{if(w instanceof va)return tt(null);throw w}))),ha(h=>!!h),pi((h,_)=>{if(h instanceof Ws||"EmptyError"===h.name)return vm(t,i,a)?tt(new _e([],{})):du(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,l,h){return $y(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):du(t):du(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Wf(a):this.lineralizeSegments(r,a).pipe((0,Tn.z)(l=>{const h=new _e(l,{});return this.expandSegment(e,h,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:h,consumedSegments:_,remainingSegments:w,positionalParamSegments:D}=fl(t,i,a);if(!h)return du(t);const S=this.applyRedirectCommands(_,i.redirectTo,D);return i.redirectTo.startsWith("/")?Wf(S):this.lineralizeSegments(i,S).pipe((0,Tn.z)(N=>this.expandSegment(e,t,r,N.concat(w),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?tt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,_t.U)(S=>(r._loadedConfig=S,new _e(i,{})))):tt(new _e(i,{}));const{matched:l,consumedSegments:h,remainingSegments:_}=fl(t,r,i);return l?this.getChildConfig(e,r,i).pipe((0,Tn.z)(D=>{const S=D.module,N=D.routes,{segmentGroup:V,slicedSegments:j}=pl(t,h,_,N),fe=new _e(V.segments,V.children);if(0===j.length&&fe.hasChildren())return this.expandChildren(S,N,fe).pipe((0,_t.U)(ut=>new _e(h,ut)));if(0===N.length&&0===j.length)return tt(new _e(h,{}));const Me=Gt(r)===a;return this.expandSegment(S,fe,N,j,Me?Rt:a,!0).pipe((0,_t.U)(lt=>new _e(h.concat(lt.segments),lt.children)))})):du(t)}getChildConfig(e,t,r){return t.children?tt(new th(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?tt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Tn.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,_t.U)(a=>(t._loadedConfig=a,a))):function hr(n){return Gs(Ks(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):tt(new th([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?tt(i.map(l=>{const h=e.get(l);let _;if(function Uf(n){return n&&uu(n.canLoad)}(h))_=h.canLoad(t,r);else{if(!uu(h))throw new Error("Invalid CanLoad guard");_=h(t,r)}return er(_)})).pipe(dl(),(0,Jr.b)(l=>{if(!cl(l))return;const h=Ks(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw h.url=l,h}),(0,_t.U)(l=>!0===l)):tt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return tt(r);if(i.numberOfChildren>1||!i.children[Rt])return Gs(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[Rt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new re(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return cn(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return cn(t.children,(h,_)=>{l[_]=this.createSegmentGroup(e,h,r,i)}),new _e(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Sc(n){const e={};for(const r of Object.keys(n.children)){const a=Sc(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function Gy(n){if(1===n.numberOfChildren&&n.children[Rt]){const e=n.children[Rt];return new _e(n.segments.concat(e.segments),e.children)}return n}(new _e(n.segments,e))}class vi{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Po{constructor(e,t){this.component=e,this.route=t}}function Em(n,e,t){const r=n._root;return fu(r,e?e._root:null,t,[r.value])}function gl(n,e,t){const r=function zf(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function fu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=No(e);return n.children.forEach(l=>{(function bm(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const _=function Wy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ft(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ft(n.url,e.url)||!xi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Lf(n,e)||!xi(n.queryParams,e.queryParams);default:return!Lf(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new vi(r)):(a.data=l.data,a._resolvedData=l._resolvedData),fu(n,e,a.component?h?h.children:null:t,r,i),_&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new Po(h.outlet.component,l))}else l&&wi(e,h,i),i.canActivateChecks.push(new vi(r)),fu(n,null,a.component?h?h.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),cn(a,(l,h)=>wi(l,t.getContext(h),i)),i}function wi(n,e,t){const r=No(n),i=n.value;cn(r,(a,l)=>{wi(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Po(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Tm{}function Js(n){return new wn.y(e=>e.error(n))}class Sm{constructor(e,t,r,i,a,l){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=l}recognize(){const e=pl(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Rt);if(null===t)return null;const r=new _a([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Rt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Mo(r,t),a=new Of(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=Py(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const l=t.children[a],h=_m(e,a),_=this.processSegmentGroup(h,l,a);if(null===_)return null;r.push(..._)}const i=xm(r);return function Am(n){n.sort((e,t)=>e.value.outlet===Rt?-1:t.value.outlet===Rt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const l=this.processSegmentAgainstRoute(a,t,r,i);if(null!==l)return l}return vm(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!$y(e,t,r,i))return null;let a,l=[],h=[];if("**"===e.path){const V=r.length>0?ns(r).parameters:{};a=new _a(r,V,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),Gt(e),e.component,e,pu(t),Es(t)+r.length,f(e))}else{const V=fl(t,e,r);if(!V.matched)return null;l=V.consumedSegments,h=V.remainingSegments,a=new _a(l,V.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),Gt(e),e.component,e,pu(t),Es(t)+l.length,f(e))}const _=function Ky(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:w,slicedSegments:D}=pl(t,l,h,_.filter(V=>void 0===V.redirectTo),this.relativeLinkResolution);if(0===D.length&&w.hasChildren()){const V=this.processChildren(_,w);return null===V?null:[new Mo(a,V)]}if(0===_.length&&0===D.length)return[new Mo(a,[])];const S=Gt(e)===i,N=this.processSegment(_,w,D,S?Rt:i);return null===N?null:[new Mo(a,N)]}}function Yf(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function xm(n){const e=[],t=new Set;for(const r of n){if(!Yf(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=xm(r.children);e.push(new Mo(r.value,i))}return e.filter(r=>!t.has(r))}function pu(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Es(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function y(n){return n.data||{}}function f(n){return n.resolve||{}}function Z(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Ve(n){return En(e=>{const t=n(e);return t?(0,un.D)(t).pipe((0,_t.U)(()=>e)):tt(e)})}class ht extends class yt{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Sn=new p.OlP("ROUTES");class Ci{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,_t.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const l=a.create(e);return new th(Wd(l.injector.get(Sn,void 0,p.XFs.Self|p.XFs.Optional)).map(Gf),l)}),pi(a=>{throw t._loader$=void 0,a}));return t._loader$=new tl(i,()=>new ci.x).pipe(Co()),t._loader$}loadModuleFactory(e){return er(e()).pipe((0,Tn.z)(t=>t instanceof p.YKP?tt(t):(0,un.D)(this.compiler.compileModuleAsync(t))))}}class Zy{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function wa(n){throw n}function sh(n,e,t){return e.parse("/")}function oh(n,e){return tt(null)}const Qf={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ah={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Dr=(()=>{class n{constructor(t,r,i,a,l,h,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ci.x,this.errorHandler=wa,this.malformedUriErrorHandler=sh,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:oh,afterPreactivation:oh},this.urlHandlingStrategy=new Zy,this.routeReuseStrategy=new ht,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(p.h0i),this.console=l.get(p.c2e);const S=l.get(p.R0b);this.isNgZoneEnabled=S instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function xy(){return new re(new _e([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ci(l,h,N=>this.triggerEvent(new fa(N)),N=>this.triggerEvent(new To(N))),this.routerState=ou(this.currentUrlTree,this.rootComponentType),this.transitions=new di({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Qr(i=>0!==i.id),(0,_t.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),En(i=>{let a=!1,l=!1;return tt(i).pipe((0,Jr.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),En(h=>{const _=this.browserUrlTree.toString(),w=!this.navigated||h.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return Xf(h.source)&&(this.browserUrlTree=h.extractedUrl),tt(h).pipe(En(S=>{const N=this.transitions.getValue();return r.next(new Io(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),N!==this.transitions.getValue()?tu.E:Promise.resolve(S)}),function wm(n,e,t,r){return En(i=>function hu(n,e,t,r,i){return new rh(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,_t.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Jr.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function m(n,e,t,r,i){return(0,Tn.z)(a=>function Ac(n,e,t,r,i="emptyOnly",a="legacy"){try{const l=new Sm(n,e,t,r,i,a).recognize();return null===l?Js(new Tm):tt(l)}catch(l){return Js(l)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,_t.U)(l=>Object.assign(Object.assign({},a),{targetSnapshot:l}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Jr.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(V,S)}this.browserUrlTree=S.urlAfterRedirects}const N=new Do(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(N)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:N,extractedUrl:V,source:j,restoredState:fe,extras:Me}=h,nt=new Io(N,this.serializeUrl(V),j,fe);r.next(nt);const lt=ou(V,this.rootComponentType).snapshot;return tt(Object.assign(Object.assign({},h),{targetSnapshot:lt,urlAfterRedirects:V,extras:Object.assign(Object.assign({},Me),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),tu.E}),Ve(h=>{const{targetSnapshot:_,id:w,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:N,replaceUrl:V}}=h;return this.hooks.beforePreactivation(_,{navigationId:w,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!N,replaceUrl:!!V})}),(0,Jr.b)(h=>{const _=new Ay(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(_)}),(0,_t.U)(h=>Object.assign(Object.assign({},h),{guards:Em(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function Im(n,e){return(0,Tn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?tt(Object.assign(Object.assign({},t),{guardsResult:!0})):function qy(n,e,t,r){return(0,un.D)(n).pipe((0,Tn.z)(i=>function Zf(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?tt(a.map(h=>{const _=gl(h,e,i);let w;if(function RE(n){return n&&uu(n.canDeactivate)}(_))w=er(_.canDeactivate(n,e,t,r));else{if(!uu(_))throw new Error("Invalid CanDeactivate guard");w=er(_(n,e,t,r))}return w.pipe(ha())})).pipe(dl()):tt(!0)}(i.component,i.route,t,e,r)),ha(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Tn.z)(h=>h&&function mm(n){return"boolean"==typeof n}(h)?function ih(n,e,t,r){return(0,un.D)(e).pipe(nu(i=>ca(function Dm(n,e){return null!==n&&e&&e(new So(n)),tt(!0)}(i.route.parent,r),function zy(n,e){return null!==n&&e&&e(new Ao(n)),tt(!0)}(i.route,r),function Kf(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function Cm(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>da(()=>tt(l.guards.map(_=>{const w=gl(_,l.node,t);let D;if(function Bf(n){return n&&uu(n.canActivateChild)}(w))D=er(w.canActivateChild(r,n));else{if(!uu(w))throw new Error("Invalid CanActivateChild guard");D=er(w(r,n))}return D.pipe(ha())})).pipe(dl())));return tt(a).pipe(dl())}(n,i.path,t),function Ei(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return tt(!0);const i=r.map(a=>da(()=>{const l=gl(a,e,t);let h;if(function Dc(n){return n&&uu(n.canActivate)}(l))h=er(l.canActivate(e,n));else{if(!uu(l))throw new Error("Invalid CanActivate guard");h=er(l(e,n))}return h.pipe(ha())}));return tt(i).pipe(dl())}(n,i.route,t))),ha(i=>!0!==i,!0))}(r,a,n,e):tt(h)),(0,_t.U)(h=>Object.assign(Object.assign({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,Jr.b)(h=>{if(cl(h.guardsResult)){const w=Ks(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw w.url=h.guardsResult,w}const _=new vc(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(_)}),Qr(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),Ve(h=>{if(h.guards.canActivateChecks.length)return tt(h).pipe((0,Jr.b)(_=>{const w=new gi(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}),En(_=>{let w=!1;return tt(_).pipe(function E(n,e){return(0,Tn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return tt(t);let a=0;return(0,un.D)(i).pipe(nu(l=>function A(n,e,t,r){return function P(n,e,t,r){const i=Z(n);if(0===i.length)return tt({});const a={};return(0,un.D)(i).pipe((0,Tn.z)(l=>function ge(n,e,t,r){const i=gl(n,e,r);return er(i.resolve?i.resolve(e,t):i(e,t))}(n[l],e,t,r).pipe((0,Jr.b)(h=>{a[l]=h}))),ru(1),(0,Tn.z)(()=>Z(a).length===i.length?tt(a):tu.E))}(n._resolve,n,e,r).pipe((0,_t.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),Py(n,t).resolve),null)))}(l.route,r,n,e)),(0,Jr.b)(()=>a++),ru(1),(0,Tn.z)(l=>a===i.length?tt(t):tu.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Jr.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,Jr.b)(_=>{const w=new Xr(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}))}),Ve(h=>{const{targetSnapshot:_,id:w,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:N,replaceUrl:V}}=h;return this.hooks.afterPreactivation(_,{navigationId:w,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!N,replaceUrl:!!V})}),(0,_t.U)(h=>{const _=function um(n,e,t){const r=bc(n,e._root,t?t._root:void 0);return new zd(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:_})}),(0,Jr.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,_t.U)(r=>(new gm(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,Jr.b)({next(){a=!0},complete(){a=!0}}),function $d(n){return(0,jn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var h;a||l||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===i.id&&(this.currentNavigation=null)}),pi(h=>{if(l=!0,function nm(n){return n&&n[su]}(h)){const _=cl(h.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const w=new Cn(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(w),_?setTimeout(()=>{const D=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Xf(i.source)};this.scheduleNavigation(D,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new yc(i.id,this.serializeUrl(i.extractedUrl),h);r.next(_);try{i.resolve(this.errorHandler(h))}catch(w){i.reject(w)}}return tu.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},l=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(l){const _=Object.assign({},l);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(a.state=_)}const h=this.parseUrl(t.url);this.scheduleNavigation(h,r,l,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){lu(t),this.config=t.map(Gf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:h,preserveFragment:_}=r,w=i||this.routerState.root,D=_?this.currentUrlTree.fragment:l;let S=null;switch(h){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),function ya(n,e,t,r,i){if(0===t.length)return Qd(e.root,e.root,e.root,r,i);const a=function AE(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new lm(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return cn(a.outlets,(_,w)=>{h[w]="string"==typeof _?_.split("/"):_}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((h,_)=>{0==_&&"."===h||(0==_&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new lm(t,e,r)}(t);if(a.toRoot())return Qd(e.root,e.root,new _e([],{}),r,i);const l=function cm(n,e,t){if(n.isAbsolute)return new Jd(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new Jd(a,a===e.root,0)}const r=Ys(n.commands[0])?0:1;return function dm(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Jd(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),h=l.processChildren?Xd(l.segmentGroup,l.index,a.commands):fm(l.segmentGroup,l.index,a.commands);return Qd(e.root,l.segmentGroup,h,r,i)}(w,this.currentUrlTree,t,S,null!=D?D:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=cl(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Jf(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},Qf):!1===r?Object.assign({},ah):r,cl(t))return xo(this.currentUrlTree,t,i);const a=this.parseUrl(t);return xo(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new nl(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){var h,_;if(this.disposed)return Promise.resolve(!1);let w,D,S;l?(w=l.resolve,D=l.reject,S=l.promise):S=new Promise((j,fe)=>{w=j,D=fe});const N=++this.navigationId;let V;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),V=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(h=this.browserPageId)&&void 0!==h?h:0:(null!==(_=this.browserPageId)&&void 0!==_?_:0)+1):V=0,this.setTransition({id:N,targetPageId:V,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:w,reject:D,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(j=>Promise.reject(j))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===l?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===l&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Cn(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Xf(n){return"imperative"!==n}let uh=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.commands=null,this.onChanges=new ci.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:ml(this.skipLocationChange),replaceUrl:ml(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ml(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Dr),p.Y36(ll),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&p.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[p.TTD]}),n})(),ko=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new ci.x,this.subscription=t.events.subscribe(a=>{a instanceof nl&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,l){if(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:ml(this.skipLocationChange),replaceUrl:ml(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ml(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Dr),p.Y36(ll),p.Y36(pe))},n.\u0275dir=p.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&p.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&p.uIk("target",r.target)("href",r.href,p.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[p.TTD]}),n})();function ml(n){return""===n||!!n}class Qy{}class PE{preload(e,t){return tt(null)}}let kE=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new Ci(i,r,_=>t.triggerEvent(new fa(_)),_=>t.triggerEvent(new To(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(Qr(t=>t instanceof nl),nu(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(p.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const l=a._loadedConfig;i.push(this.processRoutes(l.module,l.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,un.D)(i).pipe((0,la.J)(),(0,_t.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?tt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Tn.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Dr),p.LFG(p.Sil),p.LFG(p.zs3),p.LFG(Qy))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Rm=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Io?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof nl&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof iu&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new iu(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Cs=new p.OlP("ROUTER_CONFIGURATION"),Xy=new p.OlP("ROUTER_FORROOT_GUARD"),OE=[be,{provide:Ct,useClass:Ir},{provide:Dr,useFactory:function tv(n,e,t,r,i,a,l={},h,_){const w=new Dr(null,n,e,t,r,i,Wd(a));return h&&(w.urlHandlingStrategy=h),_&&(w.routeReuseStrategy=_),function VE(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,w),l.enableTracing&&w.events.subscribe(D=>{var S,N;null===(S=console.group)||void 0===S||S.call(console,`Router Event: ${D.constructor.name}`),console.log(D.toString()),console.log(D),null===(N=console.groupEnd)||void 0===N||N.call(console)}),w},deps:[Ct,hl,be,p.zs3,p.Sil,Sn,Cs,[class xc{},new p.FiY],[class Ze{},new p.FiY]]},hl,{provide:ll,useFactory:function Mm(n){return n.routerState.root},deps:[Dr]},kE,PE,class Jy{preload(e,t){return t().pipe(pi(()=>tt(null)))}},{provide:Cs,useValue:{enableTracing:!1}}];function _T(){return new p.PXZ("Router",Dr)}let ep=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[OE,ev(t),{provide:Xy,useFactory:LE,deps:[[Dr,new p.FiY,new p.tp0]]},{provide:Cs,useValue:r||{}},{provide:pe,useFactory:FE,deps:[oe,[new p.tBr(qe),new p.FiY],Cs]},{provide:Rm,useFactory:yT,deps:[Dr,ic,Cs]},{provide:Qy,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:PE},{provide:p.PXZ,multi:!0,useFactory:_T},[lh,{provide:p.ip1,multi:!0,useFactory:UE,deps:[lh]},{provide:rv,useFactory:nv,deps:[lh]},{provide:p.tb,multi:!0,useExisting:rv}]]}}static forChild(t){return{ngModule:n,providers:[ev(t)]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Xy,8),p.LFG(Dr,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function yT(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Rm(n,e,t)}function FE(n,e,t={}){return t.useHash?new Se(n,e):new Qe(n,e)}function LE(n){return"guarded"}function ev(n){return[{provide:p.deG,multi:!0,useValue:n},{provide:Sn,multi:!0,useValue:n}]}let lh=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ci.x}appInitializer(){return this.injector.get(W,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),a=this.injector.get(Dr),l=this.injector.get(Cs);return"disabled"===l.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?tt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Cs),i=this.injector.get(kE),a=this.injector.get(Rm),l=this.injector.get(Dr),h=this.injector.get(p.z2F);t===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&l.initialNavigation(),i.setUpPreloading(),a.init(),l.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.zs3))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function UE(n){return n.appInitializer.bind(n)}function nv(n){return n.bootstrapListener.bind(n)}const rv=new p.OlP("Router Initializer");var ye=O(5861),Pm=O(4986),Xt=O(5813);function sv(){return(0,jn.e)((n,e)=>{let t,r=!1;n.subscribe((0,pn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function ov(n,e=hi.y){return n=null!=n?n:av,(0,jn.e)((t,r)=>{let i,a=!0;t.subscribe((0,pn.x)(r,l=>{const h=e(l);(a||!n(i,h))&&(a=!1,i=h,r.next(l))}))})}function av(n,e){return n===e}var rt,fr=O(2011),km=(O(7092),O(3942)),Ri=O(9681),Xs=O(4859),Oo=O(1877),k=O(2090),Fo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},gu={},uv=uv||{},At=Fo||self;function Om(){}function lv(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function ch(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var cv="closure_uid_"+(1e9*Math.random()>>>0),wT=0;function xt(n,e,t){return n.call.apply(n.bind,arguments)}function BE(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Fr(n,e,t){return(Fr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?xt:BE).apply(null,arguments)}function tp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function pr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function Lr(){this.s=this.s,this.o=this.o}var ET={};Lr.prototype.s=!1,Lr.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function vT(n){return Object.prototype.hasOwnProperty.call(n,cv)&&n[cv]||(n[cv]=++wT)}(this);delete ET[n]}},Lr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Fm=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Ea=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function hv(n){return Array.prototype.concat.apply([],arguments)}function np(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function fv(n){return/^[\s\xa0]*$/.test(n)}var Vr,pv=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function rs(n,e){return-1!=n.indexOf(e)}function dh(n,e){return n<e?-1:n>e?1:0}e:{var Lm=At.navigator;if(Lm){var Vm=Lm.userAgent;if(Vm){Vr=Vm;break e}}Vr=""}function rp(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function CT(n){const e={};for(const t in n)e[t]=n[t];return e}var HE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $E(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<HE.length;a++)t=HE[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function gv(n){return gv[" "](n),n}gv[" "]=Om;var hh,n,GE=rs(Vr,"Opera"),ip=rs(Vr,"Trident")||rs(Vr,"MSIE"),WE=rs(Vr,"Edge"),qE=WE||ip,mv=rs(Vr,"Gecko")&&!(rs(Vr.toLowerCase(),"webkit")&&!rs(Vr,"Edge"))&&!(rs(Vr,"Trident")||rs(Vr,"MSIE"))&&!rs(Vr,"Edge"),zE=rs(Vr.toLowerCase(),"webkit")&&!rs(Vr,"Edge");function KE(){var n=At.document;return n?n.documentMode:void 0}e:{var ZE="",YE=(n=Vr,mv?/rv:([^\);]+)(\)|;)/.exec(n):WE?/Edge\/([\d\.]+)/.exec(n):ip?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):zE?/WebKit\/(\S+)/.exec(n):GE?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(YE&&(ZE=YE?YE[1]:""),ip){var QE=KE();if(null!=QE&&QE>parseFloat(ZE)){hh=String(QE);break e}}hh=ZE}var uM={};var cM=At.document&&ip&&(KE()||parseInt(hh,10))||void 0,dM=function(){if(!At.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{At.addEventListener("test",Om,e),At.removeEventListener("test",Om,e)}catch(t){}return n}();function Mi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function eo(n,e){if(Mi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(mv){e:{try{gv(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:_v[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&eo.Z.h.call(this)}}Mi.prototype.h=function(){this.defaultPrevented=!0},pr(eo,Mi);var _v={2:"touch",3:"pen",4:"mouse"};eo.prototype.h=function(){eo.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var sp="closure_listenable_"+(1e6*Math.random()|0),XE=0;function yv(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++XE,this.ca=this.fa=!1}function op(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function fh(n){this.src=n,this.g={},this.h=0}function vv(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=Fm(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(op(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ca(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}fh.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=Ca(n,e,r,i);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new yv(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var Um="closure_lm_"+(1e6*Math.random()|0),wv={};function Bm(n,e,t,r,i){if(r&&r.once)return nC(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)Bm(n,e[a],t,r,i);return null}return t=yl(t),n&&n[sp]?n.N(e,t,ch(r)?!!r.capture:!!r,i):eC(n,e,t,!1,r,i)}function eC(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=ch(i)?!!i.capture:!!i,h=_l(n);if(h||(n[Um]=h=new fh(n)),(t=h.add(e,t,r,l,a)).proxy)return t;if(r=function tC(){var e=Ev;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)dM||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Mc(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function nC(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)nC(n,e[a],t,r,i);return null}return t=yl(t),n&&n[sp]?n.O(e,t,ch(r)?!!r.capture:!!r,i):eC(n,e,t,!0,r,i)}function rC(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)rC(n,e[a],t,r,i);else r=ch(r)?!!r.capture:!!r,t=yl(t),n&&n[sp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ca(a=n.g[e],t,r,i))&&(op(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=_l(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ca(e,t,r,i)),(t=-1<n?e[n]:null)&&Rc(t))}function Rc(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[sp])vv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Mc(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=_l(e))?(vv(t,n),0==t.h&&(t.src=null,e[Um]=null)):op(n)}}}function Mc(n){return n in wv?wv[n]:wv[n]="on"+n}function Ev(n,e){if(n.ca)n=!0;else{e=new eo(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Rc(n),n=t.call(r,e)}return n}function _l(n){return(n=n[Um])instanceof fh?n:null}var Nc="__closure_events_fn_"+(1e9*Math.random()>>>0);function yl(n){return"function"==typeof n?n:(n[Nc]||(n[Nc]=function(e){return n.handleEvent(e)}),n[Nc])}function Ur(){Lr.call(this),this.i=new fh(this),this.P=this,this.I=null}function Br(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Mi(e,n);else if(e instanceof Mi)e.target=e.target||n;else{var i=e;$E(e=new Mi(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=ap(l,r,!0,e)&&i}if(i=ap(l=e.g=n,r,!0,e)&&i,i=ap(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=ap(l=e.g=t[a],r,!1,e)&&i}function ap(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ca&&l.capture==t){var h=l.listener,_=l.ia||l.src;l.fa&&vv(n.i,l),i=!1!==h.call(_,r)&&i}}return i&&!r.defaultPrevented}pr(Ur,Lr),Ur.prototype[sp]=!0,Ur.prototype.removeEventListener=function(n,e,t,r){rC(this,n,e,t,r)},Ur.prototype.M=function(){if(Ur.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)op(t[r]);delete n.g[e],n.h--}}this.I=null},Ur.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ur.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var up=At.JSON.stringify;function Cv(){var n=Iv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var jm,lp=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new DT,n=>n.reset());class DT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function sC(n){At.setTimeout(()=>{throw n},0)}function oC(n,e){jm||function aC(){var n=At.Promise.resolve(void 0);jm=function(){n.then(TT)}}(),bv||(jm(),bv=!0),Iv.add(n,e)}var bv=!1,Iv=new class iC{constructor(){this.h=this.g=null}add(e,t){const r=lp.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function TT(){for(var n;n=Cv();){try{n.h.call(n.g)}catch(t){sC(t)}var e=lp;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}bv=!1}function Hm(n,e){Ur.call(this),this.h=n||1,this.g=e||At,this.j=Fr(this.kb,this),this.l=Date.now()}function Ni(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Dv(n,e,t){if("function"==typeof n)t&&(n=Fr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Fr(n.handleEvent,n)}return 2147483647<Number(e)?-1:At.setTimeout(n,e||0)}function uC(n){n.g=Dv(()=>{n.g=null,n.i&&(n.i=!1,uC(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}pr(Hm,Ur),(rt=Hm.prototype).da=!1,rt.S=null,rt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Br(this,"tick"),this.da&&(Ni(this),this.start()))}},rt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rt.M=function(){Hm.Z.M.call(this),Ni(this),delete this.g};class hM extends Lr{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:uC(this)}M(){super.M(),this.g&&(At.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $m(n){Lr.call(this),this.h=n,this.g={}}pr($m,Lr);var Tv=[];function ST(n,e,t,r){Array.isArray(t)||(t&&(Tv[0]=t.toString()),t=Tv);for(var i=0;i<t.length;i++){var a=Bm(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function lC(n){rp(n.g,function(e,t){this.g.hasOwnProperty(t)&&Rc(e)},n),n.g={}}function ph(){this.g=!0}function gh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function dC(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return up(t)}catch(h){return e}}(n,t)+(r?" "+r:"")})}$m.prototype.M=function(){$m.Z.M.call(this),lC(this)},$m.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ph.prototype.Aa=function(){this.g=!1},ph.prototype.info=function(){};var Pc={},Sv=null;function Gm(){return Sv=Sv||new Ur}function hC(n){Mi.call(this,Pc.Ma,n)}function mh(n){const e=Gm();Br(e,new hC(e,n))}function Av(n,e){Mi.call(this,Pc.STAT_EVENT,n),this.stat=e}function Pi(n){const e=Gm();Br(e,new Av(e,n))}function Lo(n,e){Mi.call(this,Pc.Na,n),this.size=e}function kc(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return At.setTimeout(function(){n()},e)}Pc.Ma="serverreachability",pr(hC,Mi),Pc.STAT_EVENT="statevent",pr(Av,Mi),Pc.Na="timingevent",pr(Lo,Mi);var Wm={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},fC={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function pC(){}function gC(){}pC.prototype.h=null;var Mv,cp={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Rv(){Mi.call(this,"d")}function dp(){Mi.call(this,"c")}function qm(){}function vl(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new $m(this),this.P=RT,this.W=new Hm(n=qE?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new zm}function zm(){this.i=null,this.g="",this.h=!1}pr(Rv,Mi),pr(dp,Mi),pr(qm,pC),qm.prototype.g=function(){return new XMLHttpRequest},qm.prototype.i=function(){return{}},Mv=new qm;var RT=45e3,hp={},_h={};function Km(n,e,t){n.K=1,n.v=Xm(bs(e)),n.s=t,n.U=!0,mC(n,null)}function mC(n,e){n.F=Date.now(),fp(n),n.A=bs(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),e_(t.h,"t",r),n.C=0,t=n.l.H,n.h=new zm,n.g=Hc(n.l,t?e:null,!n.s),0<n.O&&(n.L=new hM(Fr(n.Ia,n,n.g),n.O)),ST(n.V,n.g,"readystatechange",n.gb),e=n.H?CT(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),mh(1),function cC(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",h=a.split("&"),_=0;_<h.length;_++){var w=h[_].split("=");if(1<w.length){var D=w[0];w=w[1];var S=D.split("_");l=2<=S.length&&"type"==S[1]?l+(D+"=")+w+"&":l+(D+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function _C(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Zm(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=fM(n,t),i==_h){4==e&&(n.o=4,Pi(14),r=!1),gh(n.j,n.m,null,"[Incomplete Response]");break}if(i==hp){n.o=4,Pi(15),gh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}gh(n.j,n.m,i,null),Ym(n,i)}_C(n)&&i!=_h&&i!=hp&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Pi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ep(e),e.L=!0,Pi(11))):(gh(n.j,n.m,t,"[Invalid Chunked Response]"),wl(n),yh(n))}function fM(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?_h:(t=Number(e.substring(t,r)),isNaN(t)?hp:(r+=1)+t>e.length?_h:(e=e.substr(r,t),n.C=r+t,e))}function fp(n){n.Y=Date.now()+n.P,Nv(n,n.P)}function Nv(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=kc(Fr(n.eb,n),e)}function pp(n){n.B&&(At.clearTimeout(n.B),n.B=null)}function yh(n){0==n.l.G||n.I||Vc(n.l,n)}function wl(n){pp(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Ni(n.W),lC(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Ym(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Vv(t.i,n)))if(t.I=n.N,!n.J&&Vv(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(w){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=kc(Fr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;vu(t),bl(t)}is(t),Pi(18)}if(1>=bC(t.i)&&t.ka){try{t.ka()}catch(w){}t.ka=void 0}}else no(t,11)}else if((n.J||t.g==n)&&vu(t),!fv(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.U=w[0],w=w[1],2==t.G)if("c"==w[0]){t.J=w[1],t.la=w[2];const D=w[3];null!=D&&(t.ma=D,t.h.info("VER="+t.ma));const S=w[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const N=w[5];null!=N&&"number"==typeof N&&0<N&&(t.K=r=1.5*N,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const j=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(j){var a=r.i;!a.g&&(rs(j,"spdy")||rs(j,"quic")||rs(j,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(t_(a,a.h),a.h=null))}if(r.D){const fe=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;fe&&(r.sa=fe,An(r.F,r.D,fe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((r=t).oa=jc(r,r.H?r.la:null,r.W),l.J){FT(r.i,l);var h=l,_=r.K;_&&h.setTimeout(_),h.B&&(pp(h),fp(h)),r.g=l}else wp(r);0<t.l.length&&Sh(t)}else"stop"!=w[0]&&"close"!=w[0]||no(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?no(t,7):$v(t):"noop"!=w[0]&&t.j&&t.j.wa(w),t.A=0)}mh(4)}catch(w){}}function vh(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(lv(n)||"string"==typeof n)Ea(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(lv(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function mu(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(lv(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function wh(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof wh)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Pv(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Eh(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Eh(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Eh(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(rt=vl.prototype).setTimeout=function(n){this.P=n},rt.gb=function(n){n=n.target;const e=this.L;e&&3==yu(n)?e.l():this.Ia(n)},rt.Ia=function(n){try{if(n==this.g)e:{const D=yu(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>D)&&(3!=D||qE||this.g&&(this.h.h||this.g.ga()||AC(this.g)))){this.I||4!=D||7==e||mh(8==e||0>=S?3:2),pp(this);var t=this.g.ba();this.N=t;t:if(_C(this)){var r=AC(this.g);n="";var i=r.length,a=4==yu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){wl(this),yh(this);var l="";break t}this.h.i=new At.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function AT(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.X,D,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,_=this.g;if((h=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fv(h)){var w=h;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,Pi(12),wl(this),yh(this);break e}gh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ym(this,t)}this.U?(Zm(this,D,l),qE&&this.i&&3==D&&(ST(this.V,this.W,"tick",this.fb),this.W.start())):(gh(this.j,this.m,l,null),Ym(this,l)),4==D&&wl(this),this.i&&!this.I&&(4==D?Vc(this.l,this):(this.i=!1,fp(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Pi(12)):(this.o=0,Pi(13)),wl(this),yh(this)}}}catch(D){}},rt.fb=function(){if(this.g){var n=yu(this.g),e=this.g.ga();this.C<e.length&&(pp(this),Zm(this,n,e),this.i&&4!=n&&fp(this))}},rt.cancel=function(){this.I=!0,wl(this)},rt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function xT(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(mh(3),Pi(17)),wl(this),this.o=2,yh(this)):Nv(this,this.Y-n)},(rt=wh.prototype).R=function(){Pv(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},rt.T=function(){return Pv(this),this.g.concat()},rt.get=function(n,e){return Eh(this.h,n)?this.h[n]:e},rt.set=function(n,e){Eh(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},rt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var Qm=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function _u(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof _u){this.g=void 0!==e?e:n.g,Jm(this,n.j),this.s=n.s,Ch(this,n.i),gp(this,n.m),this.l=n.l,e=n.h;var t=new _p;t.i=e.i,e.g&&(t.g=new wh(e.g),t.h=e.h),kv(this,t),this.o=n.o}else n&&(t=String(n).match(Qm))?(this.g=!!e,Jm(this,t[1]||"",!0),this.s=mp(t[2]||""),Ch(this,t[3]||"",!0),gp(this,t[4]),this.l=mp(t[5]||"",!0),kv(this,t[6]||"",!0),this.o=mp(t[7]||"")):(this.g=!!e,this.h=new _p(null,this.g))}function bs(n){return new _u(n)}function Jm(n,e,t){n.j=t?mp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Ch(n,e,t){n.i=t?mp(e,!0):e}function gp(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function kv(n,e,t){e instanceof _p?(n.h=e,function wC(n,e){e&&!n.j&&(El(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(vC(this,r),e_(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=bh(e,Dh)),n.h=new _p(e,n.g))}function An(n,e,t){n.h.set(e,t)}function Xm(n){return An(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function mp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function bh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Ih),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Ih(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}_u.prototype.toString=function(){var n=[],e=this.j;e&&n.push(bh(e,Fv,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(bh(e,Fv,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(bh(t,"/"==t.charAt(0)?PT:NT,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",bh(t,kT)),n.join("")};var Fv=/[#\/\?@]/g,NT=/[#\?:]/g,PT=/[#\?]/g,Dh=/[#\?@]/g,kT=/#/g;function _p(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function El(n){n.g||(n.g=new wh,n.h=0,n.i&&function yC(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function vC(n,e){El(n),e=Oc(n,e),Eh(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Eh((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Pv(n)))}function to(n,e){return El(n),e=Oc(n,e),Eh(n.g.h,e)}function e_(n,e,t){vC(n,e),0<t.length&&(n.i=null,n.g.set(Oc(n,e),np(t)),n.h+=t.length)}function Oc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Lv(n){this.l=n||OT,n=At.PerformanceNavigationTiming?0<(n=At.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(At.g&&At.g.Ea&&At.g.Ea()&&At.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(rt=_p.prototype).add=function(n,e){El(this),this.i=null,n=Oc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},rt.forEach=function(n,e){El(this),this.g.forEach(function(t,r){Ea(t,function(i){n.call(e,i,r,this)},this)},this)},rt.T=function(){El(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},rt.R=function(n){El(this);var e=[];if("string"==typeof n)to(this,n)&&(e=hv(e,this.g.get(Oc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=hv(e,n[t])}return e},rt.set=function(n,e){return El(this),this.i=null,to(this,n=Oc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},rt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},rt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var l=i;""!==r[a]&&(l+="="+encodeURIComponent(String(r[a]))),n.push(l)}}return this.i=n.join("&")};var OT=10;function CC(n){return!!n.h||!!n.g&&n.g.size>=n.j}function bC(n){return n.h?1:n.g?n.g.size:0}function Vv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function t_(n,e){n.g?n.g.add(e):n.h=e}function FT(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Uv(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return np(n.i)}function Bv(){}function LT(){this.g=new Bv}function pM(n,e,t){const r=t||"";try{vh(n,function(i,a){let l=i;ch(i)&&(l=up(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Th(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function yp(n){this.l=n.$b||null,this.j=n.ib||!1}function vp(n,e){Ur.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=n_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Lv.prototype.cancel=function(){if(this.i=Uv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Bv.prototype.stringify=function(n){return At.JSON.stringify(n,void 0)},Bv.prototype.parse=function(n){return At.JSON.parse(n,void 0)},pr(yp,pC),yp.prototype.g=function(){return new vp(this.l,this.j)},yp.prototype.i=function(n){return function(){return n}}({}),pr(vp,Ur);var n_=0;function VT(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function ki(n){n.readyState=4,n.l=null,n.j=null,n.A=null,r_(n)}function r_(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(rt=vp.prototype).open=function(n,e){if(this.readyState!=n_)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,r_(this)},rt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||At).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},rt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ki(this)),this.readyState=n_},rt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,r_(this)),this.g&&(this.readyState=3,r_(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==At.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;VT(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},rt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ki(this):r_(this),3==this.readyState&&VT(this)}},rt.Ua=function(n){this.g&&(this.response=this.responseText=n,ki(this))},rt.Ta=function(n){this.g&&(this.response=n,ki(this))},rt.ha=function(){this.g&&ki(this)},rt.setRequestHeader=function(n,e){this.v.append(n,e)},rt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},rt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(vp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var mM=At.JSON.parse;function nr(n){Ur.call(this),this.headers=new wh,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=jv,this.K=this.L=!1}pr(nr,Ur);var jv="",IC=/^https?$/i,UT=["POST","PUT"];function DC(n){return"content-type"==n.toLowerCase()}function i_(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,TC(n),o_(n)}function TC(n){n.D||(n.D=!0,Br(n,"complete"),Br(n,"error"))}function s_(n){if(n.h&&void 0!==uv&&(!n.C[1]||4!=yu(n)||2!=n.ba()))if(n.v&&4==yu(n))Dv(n.Fa,0,n);else if(Br(n,"readystatechange"),4==yu(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(Qm)[1]||null;if(!i&&At.self&&At.self.location){var a=At.self.location.protocol;i=a.substr(0,a.length-1)}r=!IC.test(i?i.toLowerCase():"")}t=r}if(t)Br(n,"complete"),Br(n,"success");else{n.m=6;try{var l=2<yu(n)?n.g.statusText:""}catch(_){l=""}n.j=l+" ["+n.ba()+"]",TC(n)}}finally{o_(n)}}}function o_(n,e){if(n.g){SC(n);const t=n.g,r=n.C[0]?Om:null;n.g=null,n.C=null,e||Br(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function SC(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(At.clearTimeout(n.A),n.A=null)}function yu(n){return n.g?n.g.readyState:0}function AC(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case jv:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Hv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function BT(n){let e="";return rp(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):An(n,e,t))}function Cl(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Fc(n){this.za=0,this.l=[],this.h=new ph,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Cl("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Cl("baseRetryDelayMs",5e3,n),this.$a=Cl("retryDelaySeedMs",1e4,n),this.Ya=Cl("forwardChannelMaxRetries",2,n),this.ra=Cl("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Lv(n&&n.concurrentRequestLimit),this.Ca=new LT,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function $v(n){if(xC(n),3==n.G){var e=n.V++,t=bs(n.F);An(t,"SID",n.J),An(t,"RID",e),An(t,"TYPE","terminate"),gr(n,t),(e=new vl(n,n.h,e,void 0)).K=2,e.v=Xm(bs(t)),t=!1,At.navigator&&At.navigator.sendBeacon&&(t=At.navigator.sendBeacon(e.v.toString(),"")),!t&&At.Image&&((new Image).src=e.v,t=!0),t||(e.g=Hc(e.l,null),e.g.ea(e.v)),e.F=Date.now(),fp(e)}Bc(n)}function bl(n){n.g&&(Ep(n),n.g.cancel(),n.g=null)}function xC(n){bl(n),n.u&&(At.clearTimeout(n.u),n.u=null),vu(n),n.i.cancel(),n.m&&("number"==typeof n.m&&At.clearTimeout(n.m),n.m=null)}function Gv(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Sh(n)}function Sh(n){CC(n.i)||n.m||(n.m=!0,oC(n.Ha,n),n.C=0)}function Ah(n,e){var t;t=e?e.m:n.V++;const r=bs(n.F);An(r,"SID",n.J),An(r,"RID",t),An(r,"AID",n.U),gr(n,r),n.o&&n.s&&Hv(r,n.o,n.s),t=new vl(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Il(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),t_(n.i,t),Km(t,r,e)}function gr(n,e){n.j&&vh({},function(t,r){An(e,r,t)})}function Il(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Fr(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let h=!0;for(let _=0;_<t;_++){let w=i[_].h;const D=i[_].g;if(w-=a,0>w)a=Math.max(0,i[_].h-100),h=!1;else try{pM(D,l,"req"+w+"_")}catch(S){r&&r(D)}}if(h){r=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function wp(n){n.g||n.u||(n.Y=1,oC(n.Ga,n),n.A=0)}function is(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=kc(Fr(n.Ga,n),Uc(n,n.A)),n.A++,0))}function Ep(n){null!=n.B&&(At.clearTimeout(n.B),n.B=null)}function Lc(n){n.g=new vl(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=bs(n.oa);An(e,"RID","rpc"),An(e,"SID",n.J),An(e,"CI",n.N?"0":"1"),An(e,"AID",n.U),gr(n,e),An(e,"TYPE","xmlhttp"),n.o&&n.s&&Hv(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Xm(bs(e)),t.s=null,t.U=!0,mC(t,n)}function vu(n){null!=n.v&&(At.clearTimeout(n.v),n.v=null)}function Vc(n,e){var t=null;if(n.g==e){vu(n),Ep(n),n.g=null;var r=2}else{if(!Vv(n.i,e))return;t=e.D,FT(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Br(r=Gm(),new Lo(r,t,e,i)),Sh(n)}else wp(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function ba(n,e){return!(bC(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=kc(Fr(n.Ha,n,e),Uc(n,n.C)),n.C++,0)))}(n,e)||2==r&&is(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:no(n,5);break;case 4:no(n,10);break;case 3:no(n,6);break;default:no(n,2)}}function Uc(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function no(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Fr(n.jb,n);t||(t=new _u("//www.google.com/images/cleardot.gif"),At.location&&"http"==At.location.protocol||Jm(t,"https"),Xm(t)),function gM(n,e){const t=new ph;if(At.Image){const r=new Image;r.onload=tp(Th,t,r,"TestLoadImage: loaded",!0,e),r.onerror=tp(Th,t,r,"TestLoadImage: error",!1,e),r.onabort=tp(Th,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=tp(Th,t,r,"TestLoadImage: timeout",!1,e),At.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Pi(2);n.G=0,n.j&&n.j.va(e),Bc(n),xC(n)}function Bc(n){n.G=0,n.I=-1,n.j&&((0!=Uv(n.i).length||0!=n.l.length)&&(n.i.i.length=0,np(n.l),n.l.length=0),n.j.ua())}function jc(n,e,t){let r=function Ov(n){return n instanceof _u?bs(n):new _u(n,void 0)}(t);if(""!=r.i)e&&Ch(r,e+"."+r.i),gp(r,r.m);else{const i=At.location;r=function MT(n,e,t,r){var i=new _u(null,void 0);return n&&Jm(i,n),e&&Ch(i,e),t&&gp(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&rp(n.aa,function(i,a){An(r,a,i)}),t=n.sa,(e=n.D)&&t&&An(r,e,t),An(r,"VER",n.ma),gr(n,r),r}function Hc(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new nr(t&&n.Ba&&!n.qa?new yp({ib:!0}):n.qa)).L=n.H,e}function $c(){}function Cp(){if(ip&&!(10<=Number(cM)))throw Error("Environmental error: no available transport.")}function ss(n,e){Ur.call(this),this.g=new Fc(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!fv(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!fv(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Gc(this)}function Wv(n){Rv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function qv(){dp.call(this),this.status=1}function Gc(n){this.g=n}(rt=nr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Mv.g(),this.C=function xv(n){return n.h||(n.h=n.i())}(this.u?this.u:Mv),this.g.onreadystatechange=Fr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void i_(this,a)}n=t||"";const i=new wh(this.headers);r&&vh(r,function(a,l){i.set(l,a)}),r=function dv(n){e:{var e=DC;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=At.FormData&&n instanceof At.FormData,!(0<=Fm(UT,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,l){this.g.setRequestHeader(l,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{SC(this),0<this.B&&((this.K=function _M(n){return ip&&function lM(){return function bT(n){var e=uM;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=pv(String(hh)).split("."),t=pv("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=dh(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||dh(0==i[2].length,0==a[2].length)||dh(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Fr(this.pa,this)):this.A=Dv(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){i_(this,a)}},rt.pa=function(){void 0!==uv&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Br(this,"timeout"),this.abort(8))},rt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Br(this,"complete"),Br(this,"abort"),o_(this))},rt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),o_(this,!0)),nr.Z.M.call(this)},rt.Fa=function(){this.s||(this.F||this.v||this.l?s_(this):this.cb())},rt.cb=function(){s_(this)},rt.ba=function(){try{return 2<yu(this)?this.g.status:-1}catch(n){return-1}},rt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},rt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),mM(e)}},rt.Da=function(){return this.m},rt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(rt=Fc.prototype).ma=8,rt.G=1,rt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},rt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new vl(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=CT(a),$E(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Il(this,i,e),An(t=bs(this.F),"RID",n),An(t,"CVER",22),this.D&&An(t,"X-HTTP-Session-Id",this.D),gr(this,t),this.o&&a&&Hv(t,this.o,a),t_(this.i,i),this.Ra&&An(t,"TYPE","init"),this.ja?(An(t,"$req",e),An(t,"SID","null"),i.$=!0,Km(i,t,null)):Km(i,t,e),this.G=2}}else 3==this.G&&(n?Ah(this,n):0==this.l.length||CC(this.i)||Ah(this))},rt.Ga=function(){if(this.u=null,Lc(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=kc(Fr(this.bb,this),n)}},rt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Pi(10),bl(this),Lc(this))},rt.ab=function(){null!=this.v&&(this.v=null,bl(this),is(this),Pi(19))},rt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Pi(2)):(this.h.info("Failed to ping google.com"),Pi(1))},(rt=$c.prototype).xa=function(){},rt.wa=function(){},rt.va=function(){},rt.ua=function(){},rt.Oa=function(){},Cp.prototype.g=function(n,e){return new ss(n,e)},pr(ss,Ur),ss.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),oC(Fr(n.hb,n,e))),Pi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=jc(n,null,n.W),Sh(n)},ss.prototype.close=function(){$v(this.g)},ss.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Gv(this.g,e)}else this.v?((e={}).__data__=up(n),Gv(this.g,e)):Gv(this.g,n)},ss.prototype.M=function(){this.g.j=null,delete this.j,$v(this.g),delete this.g,ss.Z.M.call(this)},pr(Wv,Rv),pr(qv,dp),pr(Gc,$c),Gc.prototype.xa=function(){Br(this.g,"a")},Gc.prototype.wa=function(n){Br(this.g,new Wv(n))},Gc.prototype.va=function(n){Br(this.g,new qv(n))},Gc.prototype.ua=function(){Br(this.g,"b")},Cp.prototype.createWebChannel=Cp.prototype.g,ss.prototype.send=ss.prototype.u,ss.prototype.open=ss.prototype.m,ss.prototype.close=ss.prototype.close,Wm.NO_ERROR=0,Wm.TIMEOUT=8,Wm.HTTP_ERROR=6,fC.COMPLETE="complete",gC.EventType=cp,cp.OPEN="a",cp.CLOSE="b",cp.ERROR="c",cp.MESSAGE="d",Ur.prototype.listen=Ur.prototype.N,nr.prototype.listenOnce=nr.prototype.O,nr.prototype.getLastError=nr.prototype.La,nr.prototype.getLastErrorCode=nr.prototype.Da,nr.prototype.getStatus=nr.prototype.ba,nr.prototype.getResponseJson=nr.prototype.Qa,nr.prototype.getResponseText=nr.prototype.ga,nr.prototype.send=nr.prototype.ea;var RC=gu.createWebChannelTransport=function(){return new Cp},MC=gu.getStatEventTarget=function(){return Gm()},a_=gu.ErrorCode=Wm,NC=gu.EventType=fC,jT=gu.Event=Pc,zv=gu.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},HT=gu.FetchXmlHttpFactory=yp,bp=gu.WebChannel=gC,PC=gu.XhrIo=nr;const kC="@firebase/firestore";class ti{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ti.UNAUTHENTICATED=new ti(null),ti.GOOGLE_CREDENTIALS=new ti("google-credentials-uid"),ti.FIRST_PARTY=new ti("first-party-uid"),ti.MOCK_USER=new ti("mock-user");let Wc="9.8.0";const Dl=new Oo.Yd("@firebase/firestore");function u_(){return Dl.logLevel}function Fe(n,...e){if(Dl.logLevel<=Oo.in.DEBUG){const t=e.map(Dp);Dl.debug(`Firestore (${Wc}): ${n}`,...t)}}function Tr(n,...e){if(Dl.logLevel<=Oo.in.ERROR){const t=e.map(Dp);Dl.error(`Firestore (${Wc}): ${n}`,...t)}}function Ip(n,...e){if(Dl.logLevel<=Oo.in.WARN){const t=e.map(Dp);Dl.warn(`Firestore (${Wc}): ${n}`,...t)}}function Dp(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${Wc}) INTERNAL ASSERTION FAILED: `+n;throw Tr(e),new Error(e)}function Tt(n,e){n||it()}function Ye(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Sr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class GT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ti.UNAUTHENTICATED))}shutdown(){}}class xh{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class qT{constructor(e){this.t=e,this.currentUser=ti.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let l=new Sr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Sr,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const w=l;e.enqueueRetryable((0,ye.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},_=w=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Sr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt("string"==typeof r.accessToken),new GT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Tt(null===e||"string"==typeof e),new ti(e)}}class OC{constructor(e,t,r){this.type="FirstParty",this.user=ti.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class zT{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new OC(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ti.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Kv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class l_{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.p;return this.p=a.token,Fe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tt("string"==typeof t.token),this.p=t.token,new Kv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class os{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function KT(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}os.A=-1;class FC{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=KT(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Pt(n,e){return n<e?-1:n>e?1:0}function Rh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function LC(n){return n+"\0"}class Wn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Wn.fromMillis(Date.now())}static fromDate(e){return Wn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Wn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pt(this.nanoseconds,e.nanoseconds):Pt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new Wn(0,0))}static max(){return new Dt(new Wn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Zv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Tl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function c_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class d_{constructor(e,t,r){void 0===t?t=0:t>e.length&&it(),void 0===r?r=e.length-t:r>e.length-t&&it(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===d_.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof d_?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Wt extends d_{construct(e,t,r){return new Wt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Wt(t)}static emptyPath(){return new Wt([])}}const ZT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jr extends d_{construct(e,t,r){return new jr(e,t,r)}static isValidIdentifier(e){return ZT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new jr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Pe(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Pe(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Pe(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new Pe(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jr(t)}static emptyPath(){return new jr([])}}class Ia{constructor(e){this.fields=e,e.sort(jr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Rh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class rr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new rr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new rr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rr.EMPTY_BYTE_STRING=new rr("");const Yv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sl(n){if(Tt(!!n),"string"==typeof n){let e=0;const t=Yv.exec(n);if(Tt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xn(n.seconds),nanos:xn(n.nanos)}}function xn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Da(n){return"string"==typeof n?rr.fromBase64String(n):rr.fromUint8Array(n)}function Tp(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function YT(n){const e=n.mapValue.fields.__previous_value__;return Tp(e)?YT(e):e}function Sp(n){const e=Sl(n.mapValue.fields.__local_write_time__.timestampValue);return new Wn(e.seconds,e.nanos)}class Qv{constructor(e,t,r,i,a,l,h,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=_}}class Vo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Vo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Vo&&e.projectId===this.projectId&&e.database===this.database}}function Mh(n){return null==n}function Nh(n){return 0===n&&1/n==-1/0}function h_(n){return"number"==typeof n&&Number.isInteger(n)&&!Nh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(Wt.fromString(e))}static fromName(e){return new Ge(Wt.fromString(e).popFirst(5))}static empty(){return new Ge(Wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Wt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Wt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new Wt(e.slice()))}}const wu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ph={nullValue:"NULL_VALUE"};function Al(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Tp(n)?4:tw(n)?9007199254740991:10:it()}function Ta(n,e){if(n===e)return!0;const t=Al(n);if(t!==Al(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Sp(n).isEqual(Sp(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Sl(r.timestampValue),l=Sl(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Da(n.bytesValue).isEqual(Da(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return xn(r.geoPointValue.latitude)===xn(i.geoPointValue.latitude)&&xn(r.geoPointValue.longitude)===xn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return xn(r.integerValue)===xn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=xn(r.doubleValue),l=xn(i.doubleValue);return a===l?Nh(a)===Nh(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Rh(n.arrayValue.values||[],e.arrayValue.values||[],Ta);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Zv(a)!==Zv(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===l[h]||!Ta(a[h],l[h])))return!1;return!0}(n,e);default:return it()}var i}function kh(n,e){return void 0!==(n.values||[]).find(t=>Ta(t,e))}function Eu(n,e){if(n===e)return 0;const t=Al(n),r=Al(e);if(t!==r)return Pt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=xn(i.integerValue||i.doubleValue),h=xn(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return f_(n.timestampValue,e.timestampValue);case 4:return f_(Sp(n),Sp(e));case 5:return Pt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=Da(i),h=Da(a);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),h=a.split("/");for(let _=0;_<l.length&&_<h.length;_++){const w=Pt(l[_],h[_]);if(0!==w)return w}return Pt(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Pt(xn(i.latitude),xn(a.latitude));return 0!==l?l:Pt(xn(i.longitude),xn(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],h=a.values||[];for(let _=0;_<l.length&&_<h.length;++_){const w=Eu(l[_],h[_]);if(w)return w}return Pt(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===wu.mapValue&&a===wu.mapValue)return 0;if(i===wu.mapValue)return 1;if(a===wu.mapValue)return-1;const l=i.fields||{},h=Object.keys(l),_=a.fields||{},w=Object.keys(_);h.sort(),w.sort();for(let D=0;D<h.length&&D<w.length;++D){const S=Pt(h[D],w[D]);if(0!==S)return S;const N=Eu(l[h[D]],_[w[D]]);if(0!==N)return N}return Pt(h.length,w.length)}(n.mapValue,e.mapValue);default:throw it()}}function f_(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Pt(n,e);const t=Sl(n),r=Sl(e),i=Pt(t.seconds,r.seconds);return 0!==i?i:Pt(t.nanos,r.nanos)}function qc(n){return Jv(n)}function Jv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Sl(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Da(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=Jv(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const h of i)l?l=!1:a+=",",a+=`${h}:${Jv(r.fields[h])}`;return a+"}"}(n.mapValue):it();var e}function zc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Xv(n){return!!n&&"integerValue"in n}function Oh(n){return!!n&&"arrayValue"in n}function p_(n){return!!n&&"nullValue"in n}function ew(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ap(n){return!!n&&"mapValue"in n}function Fh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Tl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Fh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Fh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function tw(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function UC(n){return"nullValue"in n?Ph:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?zc(Vo.empty(),Ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:it()}function BC(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?zc(Vo.empty(),Ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?wu:it()}function nw(n,e){const t=Eu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function rw(n,e){const t=Eu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Oi{constructor(e){this.value=e}static empty(){return new Oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ap(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fh(t)}setAll(e){let t=jr.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=Fh(l):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Ap(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ta(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ap(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Tl(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Oi(Fh(this.value))}}function jC(n){const e=[];return Tl(n.fields,(t,r)=>{const i=new jr([t]);if(Ap(r)){const a=jC(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Ia(e)}class Rn{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Rn(e,0,Dt.min(),Dt.min(),Oi.empty(),0)}static newFoundDocument(e,t,r){return new Rn(e,1,t,Dt.min(),r,0)}static newNoDocument(e,t){return new Rn(e,2,t,Dt.min(),Oi.empty(),0)}static newUnknownDocument(e,t){return new Rn(e,3,t,Dt.min(),Oi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class xp{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function iw(n){return n.fields.find(e=>2===e.kind)}function Mn(n){return n.fields.filter(e=>2!==e.kind)}xp.UNKNOWN_ID=-1;class Rp{constructor(e,t){this.fieldPath=e,this.kind=t}}class Mp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Mp(0,Uo.min())}}function HC(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Dt.fromTimestamp(1e9===r?new Wn(t+1,0):new Wn(t,r));return new Uo(i,Ge.empty(),e)}function $C(n){return new Uo(n.readTime,n.key,-1)}class Uo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Uo(Dt.min(),Ge.empty(),-1)}static max(){return new Uo(Dt.max(),Ge.empty(),-1)}}function sw(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ge.comparator(n.documentKey,e.documentKey),0!==t?t:Pt(n.largestBatchId,e.largestBatchId))}class qn{constructor(e,t){this.comparator=e,this.root=t||ni.EMPTY}insert(e,t){return new qn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ni.BLACK,null,null))}remove(e){return new qn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ni.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cu(this.root,e,this.comparator,!0)}}class Cu{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ni{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:ni.RED,this.left=null!=i?i:ni.EMPTY,this.right=null!=a?a:ni.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new ni(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ni.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ni.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ni.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ni.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}ni.EMPTY=null,ni.RED=!0,ni.BLACK=!1,ni.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ni(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class bn{constructor(e){this.comparator=e,this.data=new qn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ow(this.data.getIterator())}getIteratorFrom(e){return new ow(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof bn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new bn(this.comparator);return t.data=e,t}}class ow{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Lh(n){return n.hasNext()?n.getNext():void 0}class GC{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.P=null}}function QT(n,e=null,t=[],r=[],i=null,a=null,l=null){return new GC(n,e,t,r,i,a,l)}function xl(n){const e=Ye(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+qc(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Mh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>qc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>qc(r)).join(",")),e.P=t}return e.P}function as(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!tS(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Ta(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!cw(n.startAt,e.startAt)&&cw(n.endAt,e.endAt)}function g_(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function m_(n,e){return n.filters.filter(t=>t instanceof yn&&t.field.isEqual(e))}function Bo(n,e,t){let r=Ph,i=!0;for(const a of m_(n,e)){let l=Ph,h=!0;switch(a.op){case"<":case"<=":l=UC(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,h=!1;break;case"!=":case"not-in":l=Ph}nw({value:r,inclusive:i},{value:l,inclusive:h})<0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];nw({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function ro(n,e,t){let r=wu,i=!0;for(const a of m_(n,e)){let l=wu,h=!0;switch(a.op){case">=":case">":l=BC(a.value),h=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,h=!1;break;case"!=":case"not-in":l=wu}rw({value:r,inclusive:i},{value:l,inclusive:h})>0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];rw({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class yn extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new WC(e,t,r):"array-contains"===t?new XT(e,r):"in"===t?new eS(e,r):"not-in"===t?new uw(e,r):"array-contains-any"===t?new Np(e,r):new yn(e,t,r)}static V(e,t,r){return"in"===t?new qC(e,r):new JT(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Eu(t,this.value)):null!==t&&Al(this.value)===Al(t)&&this.v(Eu(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class WC extends yn{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.v(t)}}class qC extends yn{constructor(e,t){super(e,"in",t),this.keys=zC(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class JT extends yn{constructor(e,t){super(e,"not-in",t),this.keys=zC(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function zC(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class XT extends yn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Oh(t)&&kh(t.arrayValue,this.value)}}class eS extends yn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&kh(this.value.arrayValue,t)}}class uw extends yn{constructor(e,t){super(e,"not-in",t)}matches(e){if(kh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!kh(this.value.arrayValue,t)}}class Np extends yn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Oh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>kh(this.value.arrayValue,r))}}class Rl{constructor(e,t){this.position=e,this.inclusive=t}}class Kc{constructor(e,t="asc"){this.field=e,this.dir=t}}function tS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function lw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Ge.comparator(Ge.fromName(l.referenceValue),t.key):Eu(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function cw(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ta(n.position[t],e.position[t]))return!1;return!0}class io{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=_,this.D=null,this.C=null}}function KC(n,e,t,r,i,a,l,h){return new io(n,e,t,r,i,a,l,h)}function Zc(n){return new io(n)}function Pp(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function kp(n){for(const e of n.filters)if(e.S())return e.field;return null}function __(n){return null!==n.collectionGroup}function Yc(n){const e=Ye(n);if(null===e.D){e.D=[];const t=kp(e),r=Pp(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Kc(t)),e.D.push(new Kc(jr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Kc(jr.keyField(),a))}}}return e.D}function Is(n){const e=Ye(n);if(!e.C)if("F"===e.limitType)e.C=QT(e.path,e.collectionGroup,Yc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Yc(e))t.push(new Kc(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Rl(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Rl(e.startAt.position,e.startAt.inclusive):null;e.C=QT(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function dw(n,e,t){return new io(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Vh(n,e){return as(Is(n),Is(e))&&n.limitType===e.limitType}function hw(n){return`${xl(Is(n))}|lt:${n.limitType}`}function y_(n){return`Query(target=${function aw(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${qc(r.value)}`;var r}).join(", ")}]`),Mh(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>qc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>qc(t)).join(",")),`Target(${e})`}(Is(n))}; limitType=${n.limitType})`}function v_(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ge.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const h=lw(i,a,l);return i.inclusive?h<=0:h<0}(t.startAt,Yc(t),r)||t.endAt&&!function(i,a,l){const h=lw(i,a,l);return i.inclusive?h>=0:h>0}(t.endAt,Yc(t),r)));var t,r}function YC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function QC(n){return(e,t)=>{let r=!1;for(const i of Yc(n)){const a=nS(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function nS(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(i,a,l){const h=a.data.field(i),_=l.data.field(i);return null!==h&&null!==_?Eu(h,_):it()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return it()}}function JC(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nh(e)?"-0":e}}function XC(n){return{integerValue:""+n}}function eb(n,e){return h_(e)?XC(e):JC(n,e)}class w_{constructor(){this._=void 0}}function rS(n,e,t){return n instanceof Uh?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Qc?nb(n,e):n instanceof Jc?rb(n,e):function(r,i){const a=tb(r,i),l=ib(a)+ib(r.k);return Xv(a)&&Xv(r.k)?XC(l):JC(r.M,l)}(n,e)}function iS(n,e,t){return n instanceof Qc?nb(n,e):n instanceof Jc?rb(n,e):t}function tb(n,e){return n instanceof Bh?Xv(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Uh extends w_{}class Qc extends w_{constructor(e){super(),this.elements=e}}function nb(n,e){const t=sb(e);for(const r of n.elements)t.some(i=>Ta(i,r))||t.push(r);return{arrayValue:{values:t}}}class Jc extends w_{constructor(e){super(),this.elements=e}}function rb(n,e){let t=sb(e);for(const r of n.elements)t=t.filter(i=>!Ta(i,r));return{arrayValue:{values:t}}}class Bh extends w_{constructor(e,t){super(),this.M=e,this.k=t}}function ib(n){return xn(n.integerValue||n.doubleValue)}function sb(n){return Oh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class jh{constructor(e,t){this.field=e,this.transform=t}}class ab{constructor(e,t){this.version=e,this.transformResults=t}}class ir{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ir}static exists(e){return new ir(void 0,e)}static updateTime(e){return new ir(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Op(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Fp{}function ub(n,e,t){n instanceof jo?function(r,i,a){const l=r.value.clone(),h=ed(r.fieldTransforms,i,a.transformResults);l.setAll(h),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Xc?function(r,i,a){if(!Op(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=ed(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(cb(r)),h.setAll(l),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function E_(n,e,t){var i;n instanceof jo?function(r,i,a){if(!Op(r.precondition,i))return;const l=r.value.clone(),h=sS(r.fieldTransforms,a,i);l.setAll(h),i.convertToFoundDocument(pw(i),l).setHasLocalMutations()}(n,e,t):n instanceof Xc?function(r,i,a){if(!Op(r.precondition,i))return;const l=sS(r.fieldTransforms,a,i),h=i.data;h.setAll(cb(r)),h.setAll(l),i.convertToFoundDocument(pw(i),h).setHasLocalMutations()}(n,e,t):Op(n.precondition,i=e)&&i.convertToNoDocument(Dt.min())}function lb(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=tb(r.transform,i||null);null!=a&&(null==t&&(t=Oi.empty()),t.set(r.field,a))}return t||null}function fw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Rh(t,r,(i,a)=>function ob(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Qc&&r instanceof Qc||t instanceof Jc&&r instanceof Jc?Rh(t.elements,r.elements,Ta):t instanceof Bh&&r instanceof Bh?Ta(t.k,r.k):t instanceof Uh&&r instanceof Uh);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function pw(n){return n.isFoundDocument()?n.version:Dt.min()}class jo extends Fp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Xc extends Fp{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function cb(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function ed(n,e,t){const r=new Map;Tt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,iS(l,h,t[i]))}return r}function sS(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,rS(a,l,e))}return r}class td extends Fp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class db extends Fp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class hb{constructor(e){this.count=e}}var sr,Qt;function vt(n){switch(n){default:return it();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function fb(n){if(void 0===n)return Tr("GRPC error has no .code"),de.UNKNOWN;switch(n){case sr.OK:return de.OK;case sr.CANCELLED:return de.CANCELLED;case sr.UNKNOWN:return de.UNKNOWN;case sr.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case sr.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case sr.INTERNAL:return de.INTERNAL;case sr.UNAVAILABLE:return de.UNAVAILABLE;case sr.UNAUTHENTICATED:return de.UNAUTHENTICATED;case sr.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case sr.NOT_FOUND:return de.NOT_FOUND;case sr.ALREADY_EXISTS:return de.ALREADY_EXISTS;case sr.PERMISSION_DENIED:return de.PERMISSION_DENIED;case sr.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case sr.ABORTED:return de.ABORTED;case sr.OUT_OF_RANGE:return de.OUT_OF_RANGE;case sr.UNIMPLEMENTED:return de.UNIMPLEMENTED;case sr.DATA_LOSS:return de.DATA_LOSS;default:return it()}}(Qt=sr||(sr={}))[Qt.OK=0]="OK",Qt[Qt.CANCELLED=1]="CANCELLED",Qt[Qt.UNKNOWN=2]="UNKNOWN",Qt[Qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qt[Qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qt[Qt.NOT_FOUND=5]="NOT_FOUND",Qt[Qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qt[Qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qt[Qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qt[Qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qt[Qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qt[Qt.ABORTED=10]="ABORTED",Qt[Qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qt[Qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qt[Qt.INTERNAL=13]="INTERNAL",Qt[Qt.UNAVAILABLE=14]="UNAVAILABLE",Qt[Qt.DATA_LOSS=15]="DATA_LOSS";class Ml{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Tl(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return c_(this.inner)}size(){return this.innerSize}}const oS=new qn(Ge.comparator);function Fi(){return oS}const aS=new qn(Ge.comparator);function Hh(...n){let e=aS;for(const t of n)e=e.insert(t.key,t);return e}function Nl(){return new Ml(n=>n.toString(),(n,e)=>n.isEqual(e))}const zn=new qn(Ge.comparator),wM=new bn(Ge.comparator);function sn(...n){let e=wM;for(const t of n)e=e.add(t);return e}const uS=new bn(Pt);function C_(){return uS}class $h{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Gh.createSynthesizedTargetChangeForCurrentChange(e,t)),new $h(Dt.min(),r,C_(),Fi(),sn())}}class Gh{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Gh(rr.EMPTY_BYTE_STRING,t,sn(),sn(),sn())}}class Lp{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class gw{constructor(e,t){this.targetId=e,this.$=t}}class pb{constructor(e,t,r=rr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class gb{constructor(){this.B=0,this.L=mb(),this.U=rr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=sn(),t=sn(),r=sn();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:it()}}),new Gh(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=mb()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class lS{constructor(e){this.nt=e,this.st=new Map,this.it=Fi(),this.rt=Wh(),this.ot=new bn(Pt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const a=i.target;if(g_(a))if(0===r){const l=new Ge(a.path);this.ct(t,l,Rn.newNoDocument(l,Dt.min()))}else Tt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,l)=>{const h=this.wt(l);if(h){if(a.current&&g_(h.target)){const _=new Ge(h.target.path);null!==this.it.get(_)||this.It(l,_)||this.ct(l,_,Rn.newNoDocument(_,e))}a.j&&(t.set(l,a.H()),a.J())}});let r=sn();this.rt.forEach((a,l)=>{let h=!0;l.forEachWhile(_=>{const w=this.wt(_);return!w||2===w.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.it.forEach((a,l)=>l.setReadTime(e));const i=new $h(e,t,this.ot,this.it,r);return this.it=Fi(),this.rt=Wh(),this.ot=new bn(Pt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new gb,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new bn(Pt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new gb),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Wh(){return new qn(Ge.comparator)}function mb(){return new qn(Ge.comparator)}const cS={asc:"ASCENDING",desc:"DESCENDING"},dS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class b_{constructor(e,t){this.databaseId=e,this.N=t}}function qh(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mw(n,e){return n.N?e.toBase64():e.toUint8Array()}function _b(n,e){return qh(n,e.toTimestamp())}function Hr(n){return Tt(!!n),Dt.fromTimestamp(function(e){const t=Sl(e);return new Wn(t.seconds,t.nanos)}(n))}function nd(n,e){return(t=n,new Wt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function zh(n){const e=Wt.fromString(n);return Tt(Cw(e)),e}function Vp(n,e){return nd(n.databaseId,e.path)}function Sa(n,e){const t=zh(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(vw(t))}function _w(n,e){return nd(n.databaseId,e)}function yw(n){const e=zh(n);return 4===e.length?Wt.emptyPath():vw(e)}function Kh(n){return new Wt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function vw(n){return Tt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function yb(n,e,t){return{name:Vp(n,e),fields:t.value.mapValue.fields}}function ww(n,e,t){const r=Sa(n,e.name),i=Hr(e.updateTime),a=new Oi({mapValue:{fields:e.fields}}),l=Rn.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function I_(n,e){let t;if(e instanceof jo)t={update:yb(n,e.key,e.value)};else if(e instanceof td)t={delete:Vp(n,e.key)};else if(e instanceof Xc)t={update:yb(n,e.key,e.data),updateMask:yS(e.fieldMask)};else{if(!(e instanceof db))return it();t={verify:Vp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Uh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Qc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Jc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Bh)return{fieldPath:a.field.canonicalString(),increment:l.k};throw it()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:_b(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:it()),t;var i}function vb(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?ir.updateTime(Hr(i.updateTime)):void 0!==i.exists?ir.exists(i.exists):ir.none():ir.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let h=null;"setToServerValue"in l?(Tt("REQUEST_TIME"===l.setToServerValue),h=new Uh):"appendMissingElements"in l?h=new Qc(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new Jc(l.removeAllFromArray.values||[]):"increment"in l?h=new Bh(a,l.increment):it();const _=jr.fromServerFormat(l.fieldPath);return new jh(_,h)}(n,i)):[];var i;if(e.update){const i=Sa(n,e.update.name),a=new Oi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Ia((e.updateMask.fieldPaths||[]).map(w=>jr.fromServerFormat(w)));return new Xc(i,a,l,t,r)}return new jo(i,a,t,r)}if(e.delete){const i=Sa(n,e.delete);return new td(i,t)}if(e.verify){const i=Sa(n,e.verify);return new db(i,t)}return it()}function pS(n,e){return{documents:[_w(n,e.path)]}}function Ew(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=_w(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=_w(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const w=_.map(D=>function(S){if("=="===S.op){if(ew(S.value))return{unaryFilter:{field:Zh(S.field),op:"IS_NAN"}};if(p_(S.value))return{unaryFilter:{field:Zh(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(ew(S.value))return{unaryFilter:{field:Zh(S.field),op:"IS_NOT_NAN"}};if(p_(S.value))return{unaryFilter:{field:Zh(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zh(S.field),op:Bp(S.op),value:S.value}}}(D));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(w=>{return{field:Zh((D=w).field),direction:Eb(D.dir)};var D})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(w=e.limit,n.N||Mh(w)?w:{value:w});var w,h,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function Up(n){let e=yw(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Tt(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let a=[];t.where&&(a=wb(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(D=>{return new Kc(Yh((S=D).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(D){let S;return S="object"==typeof D?D.value:D,Mh(S)?null:S}(t.limit));let _=null;var D;t.startAt&&(_=new Rl((D=t.startAt).values||[],!!D.before));let w=null;return t.endAt&&(w=function(D){return new Rl(D.values||[],!D.before)}(t.endAt)),KC(e,i,l,a,h,"F",_,w)}function wb(n){return n?void 0!==n.unaryFilter?[_S(n)]:void 0!==n.fieldFilter?[mS(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>wb(e)).reduce((e,t)=>e.concat(t)):it():[]}function Eb(n){return cS[n]}function Bp(n){return dS[n]}function Zh(n){return{fieldPath:n.canonicalString()}}function Yh(n){return jr.fromServerFormat(n.fieldPath)}function mS(n){return yn.create(Yh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(n.fieldFilter.op),n.fieldFilter.value)}function _S(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Yh(n.unaryFilter.field);return yn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Yh(n.unaryFilter.field);return yn.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Yh(n.unaryFilter.field);return yn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Yh(n.unaryFilter.field);return yn.create(i,"!=",{nullValue:"NULL_VALUE"});default:return it()}}function yS(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Cw(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Li(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=rd(e)),e=vS(n.get(t),e);return rd(e)}function vS(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function rd(n){return n+"\x01\x01"}function Aa(n){const e=n.length;if(Tt(e>=2),2===e)return Tt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Wt.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&it(),n.charAt(l+1)){case"\x01":const h=n.substring(a,l);let _;0===i.length?_=h:(i+=h,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:it()}a=l+2}return new Wt(r)}const bw=["userId","batchId"];function D_(n,e){return[n,Li(e)]}function Iw(n,e,t){return[n,Li(e),t]}const wS={},Cb=["prefixPath","collectionGroup","readTime","documentId"],ES=["prefixPath","collectionGroup","documentId"],Dw=["collectionGroup","readTime","prefixPath","documentId"],CS=["canonicalId","targetId"],bb=["targetId","path"],Ib=["path","targetId"],bS=["collectionId","parent"],IS=["indexId","uid"],DS=["uid","sequenceNumber"],Tw=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],TS=["indexId","uid","orderedDocumentKey"],Db=["userId","collectionPath","documentId"],SS=["userId","collectionPath","largestBatchId"],AS=["userId","collectionGroup","largestBatchId"],Tb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],xS=[...Tb,"documentOverlays"],Sb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],RS=[...Sb,"indexConfiguration","indexState","indexEntries"],Ab="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,r)=>{t(e)})}static reject(e){return new he((t,r)=>{r(e)})}static waitFor(e){return new he((t,r)=>{let i=0,a=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++a,l&&a===i&&t()},_=>r(_))}),l=!0,a===i&&t()})}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next(i=>i?he.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class jp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Sr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Qh(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=Hp(r.target.error);this.At.reject(new Qh(e,i))}}static open(e,t,r,i){try{return new jp(t,e.transaction(i,r))}catch(a){throw new Qh(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new NS(t)}}class Ho{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Ho.Vt((0,k.z$)())&&Tr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),sd(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,k.hl)())return!1;if(Ho.St())return!0;const e=(0,k.z$)(),t=Ho.Vt(e),r=0<t&&t<10,i=Ho.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new Qh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new Pe(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Pe(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Qh(e,h))},a.onupgradeneeded=l=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.Pt.kt(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ye.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.Nt(e);const _=jp.open(a.db,e,l?"readonly":"readwrite",r),w=i(_).next(D=>(_.bt(),D)).catch(D=>(_.abort(D),he.reject(D))).toPromise();return w.catch(()=>{}),yield _.Rt,w}catch(_){const w="FirebaseError"!==_.name&&h<3;if(Fe("SimpleDb","Transaction failed with error:",_.message,"Retrying:",w),a.close(),!w)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class MS{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return sd(this.Ft.delete())}}class Qh extends Pe{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function id(n){return"IndexedDbTransactionError"===n.name}class NS{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),sd(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),sd(this.store.add(e))}get(e){return sd(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),sd(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),sd(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Kt(i,(l,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new he((a,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new he((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Qt(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(a,l,h)=>h.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new he((r,i)=>{t.onerror=a=>{const l=Hp(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}Kt(e,t){const r=[];return new he((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const _=new MS(h),w=t(h.primaryKey,h.value,_);if(w instanceof he){const D=w.catch(S=>(_.done(),he.reject(S)));r.push(D)}_.isDone?i():null===_.Lt?h.continue():h.continue(_.Lt)}}).next(()=>he.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function sd(n){return new he((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Hp(r.target.error);t(i)}})}let T_=!1;function Hp(n){const e=Ho.Vt((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return T_||(T_=!0,setTimeout(()=>{throw r},0)),r}}return n}class Sw extends xb{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function mr(n,e){const t=Ye(n);return Ho.xt(t.Ht,e)}class Aw{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&ub(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&E_(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&E_(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Dt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),sn())}isEqual(e){return this.batchId===e.batchId&&Rh(this.mutations,e.mutations,(t,r)=>fw(t,r))&&Rh(this.baseMutations,e.baseMutations,(t,r)=>fw(t,r))}}class xw{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Tt(e.mutations.length===r.length);let i=zn;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new xw(e,t,r,i)}}class $p{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Pl{constructor(e,t,r,i,a=Dt.min(),l=Dt.min(),h=rr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}withSequenceNumber(e){return new Pl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Pl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Pl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Rw{constructor(e){this.Jt=e}}function Mw(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:S_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Vp(i=n.Jt,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:qh(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:kl(e.version)};else{if(!e.isUnknownDocument())return it();r.unknownDocument={path:t.path.toArray(),version:kl(e.version)}}var i,a;return r}function S_(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function kl(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Jh(n){const e=new Wn(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function Xh(n,e){const t=(e.baseMutations||[]).map(a=>vb(n.Jt,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>vb(n.Jt,a)),i=Wn.fromMillis(e.localWriteTimeMs);return new Aw(e.batchId,i,t,r)}function Ol(n){const e=Jh(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Jh(n.lastLimboFreeSnapshotVersion):Dt.min();let r;var i;return void 0!==n.query.documents?(Tt(1===(i=n.query).documents.length),r=Is(Zc(yw(i.documents[0])))):r=Is(Up(n.query)),new Pl(r,n.targetId,0,n.lastListenSequenceNumber,e,t,rr.fromBase64String(n.resumeToken))}function Rb(n,e){const t=kl(e.snapshotVersion),r=kl(e.lastLimboFreeSnapshotVersion);let i;i=g_(e.target)?pS(n.Jt,e.target):Ew(n.Jt,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xl(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Fl(n){const e=Up({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?dw(e,e.limit,"L"):e}function od(n,e){return new $p(e.largestBatchId,vb(n.Jt,e.overlayMutation))}function Mb(n,e){const t=e.path.lastSegment();return[n,Li(e.path.popLast()),t]}class CM{getBundleMetadata(e,t){return Nw(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Jh(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return Nw(e).put({bundleId:(r=t).id,createTime:kl(Hr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Nb(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Fl(i.bundledQuery),readTime:Jh(i.readTime)};var i})}saveNamedQuery(e,t){return Nb(e).put({name:(r=t).name,readTime:kl(Hr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Nw(n){return mr(n,"bundles")}function Nb(n){return mr(n,"namedQueries")}class Pw{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Pw(e,t.uid||"")}getOverlay(e,t){return Gp(e).get(Mb(this.userId,t)).next(r=>r?od(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const h=new $p(t,l);i.push(this.Xt(e,h))}),he.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Li(l.getCollectionPath())));const a=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(Gp(e).Qt("collectionPathOverlayIndex",h))}),he.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Nl(),a=Li(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Gp(e).qt("collectionPathOverlayIndex",l).next(h=>{for(const _ of h){const w=od(this.M,_);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Nl();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Gp(e).Wt({index:"collectionGroupOverlayIndex",range:h},(_,w,D)=>{const S=od(this.M,w);a.size()<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):D.done()}).next(()=>a)}Xt(e,t){return Gp(e).put(function(r,i,a){const[l,h,_]=Mb(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:I_(r.Jt,a.mutation)}}(this.M,this.userId,t))}}function Gp(n){return mr(n,"documentOverlays")}class ad{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(xn(e.integerValue));else if("doubleValue"in e){const r=xn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Nh(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Da(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?tw(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):it()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),Ge.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Pb(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function kw(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=Pb(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}ad.fe=new ad;class Ow{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=kw(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=kw(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class A_{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class Wp{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class qp{constructor(){this.De=new Ow,this.Ce=new A_(this.De),this.xe=new Wp(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Ll{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ll(this.indexId,this.documentKey,this.arrayValue,r)}}function Vl(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=kb(n.arrayValue,e.arrayValue),0!==t?t:(t=kb(n.directionalValue,e.directionalValue),0!==t?t:Ge.comparator(n.documentKey,e.documentKey)))}function kb(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class kS{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=iw(e);if(void 0!==t&&!this.Be(t))return!1;const r=Mn(e);let i=0,a=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const l=r[i];if(!this.Le(this.Fe,l)||!this.Ue(this.Me[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Me.length||!this.Ue(this.Me[a++],l))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Fw{constructor(){this.qe=new Lw}addToCollectionParentIndex(e,t){return this.qe.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(Uo.min())}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class Lw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new bn(Wt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new bn(Wt.comparator)).toArray()}}const Vw=new Uint8Array(0);class OS{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Lw,this.Ge=new Ml(r=>xl(r),(r,i)=>as(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const a={collectionId:r,parent:Li(i)};return Ob(e).put(a)}return he.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[LC(t),""],!1,!0);return Ob(e).qt(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(Aa(l.parent))}return r})}addFieldIndex(e,t){const r=zp(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=zp(e),i=bu(e),a=xa(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=xa(e);let i=!0;const a=new Map;return he.forEach(this.Qe(t),l=>this.je(e,l).next(h=>{i&&(i=!!h),a.set(l,h)})).next(()=>{if(i){let l=sn();const h=[];return he.forEach(a,(_,w)=>{var D;Fe("IndexedDbIndexManager",`Using index ${D=_,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(ut=>`${ut.fieldPath}:${ut.kind}`).join(",")}`} to execute ${xl(t)}`);const S=function(ut,ot){const Mt=iw(ot);if(void 0===Mt)return null;for(const Kt of m_(ut,Mt.fieldPath))switch(Kt.op){case"array-contains-any":return Kt.value.arrayValue.values||[];case"array-contains":return[Kt.value]}return null}(w,_),N=function(ut,ot){const Mt=new Map;for(const Kt of Mn(ot))for(const Gr of m_(ut,Kt.fieldPath))switch(Gr.op){case"==":case"in":Mt.set(Kt.fieldPath.canonicalString(),Gr.value);break;case"not-in":case"!=":return Mt.set(Kt.fieldPath.canonicalString(),Gr.value),Array.from(Mt.values())}return null}(w,_),V=function(ut,ot){const Mt=[];let Kt=!0;for(const Gr of Mn(ot)){const Fu=0===Gr.kind?Bo(ut,Gr.fieldPath,ut.startAt):ro(ut,Gr.fieldPath,ut.startAt);Mt.push(Fu.value),Kt&&(Kt=Fu.inclusive)}return new Rl(Mt,Kt)}(w,_),j=function(ut,ot){const Mt=[];let Kt=!0;for(const Gr of Mn(ot)){const Fu=0===Gr.kind?ro(ut,Gr.fieldPath,ut.endAt):Bo(ut,Gr.fieldPath,ut.endAt);Mt.push(Fu.value),Kt&&(Kt=Fu.inclusive)}return new Rl(Mt,Kt)}(w,_),fe=this.We(_,w,V),Me=this.We(_,w,j),nt=this.ze(_,w,N),lt=this.He(_.indexId,S,fe,V.inclusive,Me,j.inclusive,nt);return he.forEach(lt,ut=>r.Gt(ut,t.limit).next(ot=>{ot.forEach(Mt=>{const Kt=Ge.fromSegments(Mt.documentKey);l.has(Kt)||(l=l.add(Kt),h.push(Kt))})}))}).next(()=>h)}return he.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,i,a,l,h){const _=(null!=t?t.length:1)*Math.max(r.length,a.length),w=_/(null!=t?t.length:1),D=[];for(let S=0;S<_;++S){const N=t?this.Je(t[S/w]):Vw,V=this.Ye(e,N,r[S%w],i),j=this.Xe(e,N,a[S%w],l),fe=h.map(Me=>this.Ye(e,N,Me,!0));D.push(...this.createRange(V,j,fe))}return D}Ye(e,t,r,i){const a=new Ll(e,Ge.empty(),t,r);return i?a:a.ke()}Xe(e,t,r,i){const a=new Ll(e,Ge.empty(),t,r);return i?a.ke():a}je(e,t){const r=new kS(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const h of a)r.$e(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,t){let r=2;return he.forEach(this.Qe(t),i=>this.je(e,i).next(a=>{a?0!==r&&a.fields.length<function(l){let h=new bn(jr.comparator),_=!1;for(const w of l.filters){const D=w;D.field.isKeyField()||("array-contains"===D.op||"array-contains-any"===D.op?_=!0:h=h.add(D.field))}for(const w of l.orderBy)w.field.isKeyField()||(h=h.add(w.field));return h.size+(_?1:0)}(i)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new qp;for(const i of Mn(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.Ne(i.kind);ad.fe.Zt(a,l)}return r.Se()}Je(e){const t=new qp;return ad.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new qp;return ad.fe.Zt(zc(this.databaseId,t),r.Ne(function(i){const a=Mn(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let i=[];i.push(new qp);let a=0;for(const l of Mn(e)){const h=r[a++];for(const _ of i)if(this.en(t,l.fieldPath)&&Oh(h))i=this.nn(i,l,h);else{const w=_.Ne(l.kind);ad.fe.Zt(h,w)}}return this.sn(i)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const h of i){const _=new qp;_.seed(h.Se()),ad.fe.Zt(l,_.Ne(t.kind)),a.push(_)}return a}en(e,t){return!!e.filters.find(r=>r instanceof yn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=zp(e),i=bu(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(a=>{const l=[];return he.forEach(a,h=>i.get([h.indexId,this.uid]).next(_=>{l.push(function(w,D){const S=D?new Mp(D.sequenceNumber,new Uo(Jh(D.readTime),new Ge(Aa(D.documentKey)),D.largestBatchId)):Mp.empty(),N=w.fields.map(([V,j])=>new Rp(jr.fromServerFormat(V),j));return new xp(w.indexId,w.collectionGroup,N,S)}(h,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Pt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=zp(e),a=bu(e);return this.rn(e).next(l=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>he.forEach(h,_=>{return a.put({indexId:_.indexId,uid:this.user.uid||"",sequenceNumber:l,readTime:kl((N=r).readTime),documentKey:Li(N.documentKey.path),largestBatchId:N.largestBatchId});var N})))}updateIndexEntries(e,t){const r=new Map;return he.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?he.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),he.forEach(h,_=>this.on(e,i,_).next(w=>{const D=this.un(a,_);return w.isEqual(D)?he.resolve():this.an(e,a,_,w,D)}))))})}cn(e,t,r,i){return xa(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return xa(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=xa(e);let a=new bn(Vl);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(l,h)=>{a=a.add(new Ll(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}un(e,t){let r=new bn(Vl);const i=this.Ze(t,e);if(null==i)return r;const a=iw(t);if(null!=a){const l=e.data.field(a.fieldPath);if(Oh(l))for(const h of l.arrayValue.values||[])r=r.add(new Ll(t.indexId,e.key,this.Je(h),i))}else r=r.add(new Ll(t.indexId,e.key,Vw,i));return r}an(e,t,r,i,a){Fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,_,w,D,S){const N=h.getIterator(),V=_.getIterator();let j=Lh(N),fe=Lh(V);for(;j||fe;){let Me=!1,nt=!1;if(j&&fe){const lt=w(j,fe);lt<0?nt=!0:lt>0&&(Me=!0)}else null!=j?nt=!0:Me=!0;Me?(D(fe),fe=Lh(V)):nt?(S(j),j=Lh(N)):(j=Lh(N),fe=Lh(V))}}(i,a,Vl,h=>{l.push(this.cn(e,t,r,h))},h=>{l.push(this.hn(e,t,r,h))}),he.waitFor(l)}rn(e){let t=1;return bu(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,h)=>Vl(l,h)).filter((l,h,_)=>!h||0!==Vl(l,_[h-1]));const i=[];i.push(e);for(const l of r){const h=Vl(l,e),_=Vl(l,t);if(0===h)i[0]=e.ke();else if(h>0&&_<0)i.push(l),i.push(l.ke());else if(_>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2)a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,Vw,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,Vw,[]]));return a}getMinOffset(e,t){let r;return he.forEach(this.Qe(t),i=>this.je(e,i).next(a=>{a?(!r||sw(a.indexState.offset,r)<0)&&(r=a.indexState.offset):r=Uo.min()})).next(()=>r)}}function Ob(n){return mr(n,"collectionParents")}function xa(n){return mr(n,"indexEntries")}function zp(n){return mr(n,"indexConfiguration")}function bu(n){return mr(n,"indexState")}const FS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Vi(e,Vi.DEFAULT_COLLECTION_PERCENTILE,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Fb(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const _=r.Wt({range:l},(D,S,N)=>(h++,N.delete()));a.push(_.next(()=>{Tt(1===h)}));const w=[];for(const D of t.mutations){const S=Iw(e,D.key.path,t.batchId);a.push(i.delete(S)),w.push(D.key)}return he.waitFor(a).next(()=>w)}function Uw(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}Vi.DEFAULT_COLLECTION_PERCENTILE=10,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vi.DEFAULT=new Vi(41943040,Vi.DEFAULT_COLLECTION_PERCENTILE,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vi.DISABLED=new Vi(-1,0,0);class x_{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){Tt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new x_(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Iu(e).Wt({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Ul(e),l=Iu(e);return l.add({}).next(h=>{Tt("number"==typeof h);const _=new Aw(h,t,r,i),w=function(N,V,j){const fe=j.baseMutations.map(nt=>I_(N.Jt,nt)),Me=j.mutations.map(nt=>I_(N.Jt,nt));return{userId:V,batchId:j.batchId,localWriteTimeMs:j.localWriteTime.toMillis(),baseMutations:fe,mutations:Me}}(this.M,this.userId,_),D=[];let S=new bn((N,V)=>Pt(N.canonicalString(),V.canonicalString()));for(const N of i){const V=Iw(this.userId,N.key.path,h);S=S.add(N.key.path.popLast()),D.push(l.put(w)),D.push(a.put(V,wS))}return S.forEach(N=>{D.push(this.indexManager.addToCollectionParentIndex(e,N))}),e.addOnCommittedListener(()=>{this.ln[h]=_.keys()}),he.waitFor(D).next(()=>_)})}lookupMutationBatch(e,t){return Iu(e).get(t).next(r=>r?(Tt(r.userId===this.userId),Xh(this.M,r)):null)}fn(e,t){return this.ln[t]?he.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Iu(e).Wt({index:"userMutationsIndex",range:i},(l,h,_)=>{h.userId===this.userId&&(Tt(h.batchId>=r),a=Xh(this.M,h)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Iu(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Iu(e).qt("userMutationsIndex",t).next(r=>r.map(i=>Xh(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=D_(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Ul(e).Wt({range:i},(l,h,_)=>{const[w,D,S]=l,N=Aa(D);if(w===this.userId&&t.path.isEqual(N))return Iu(e).get(S).next(V=>{if(!V)throw it();Tt(V.userId===this.userId),a.push(Xh(this.M,V))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new bn(Pt);const i=[];return t.forEach(a=>{const l=D_(this.userId,a.path),h=IDBKeyRange.lowerBound(l),_=Ul(e).Wt({range:h},(w,D,S)=>{const[N,V,j]=w,fe=Aa(V);N===this.userId&&a.path.isEqual(fe)?r=r.add(j):S.done()});i.push(_)}),he.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=D_(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new bn(Pt);return Ul(e).Wt({range:l},(_,w,D)=>{const[S,N,V]=_,j=Aa(N);S===this.userId&&r.isPrefixOf(j)?j.length===i&&(h=h.add(V)):D.done()}).next(()=>this.dn(e,h))}dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Iu(e).get(a).next(l=>{if(null===l)throw it();Tt(l.userId===this.userId),r.push(Xh(this.M,l))}))}),he.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Fb(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),he.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return he.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Ul(e).Wt({range:r},(a,l,h)=>{if(a[0]===this.userId){const _=Aa(a[1]);i.push(_)}else h.done()}).next(()=>{Tt(0===i.length)})})}containsKey(e,t){return LS(e,this.userId,t)}wn(e){return Lb(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function LS(n,e,t){const r=D_(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return Ul(n).Wt({range:a,jt:!0},(h,_,w)=>{const[D,S,N]=h;D===e&&S===i&&(l=!0),w.done()}).next(()=>l)}function Iu(n){return mr(n,"mutations")}function Ul(n){return mr(n,"documentMutations")}function Lb(n){return mr(n,"mutationQueues")}class ud{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new ud(0)}static yn(){return new ud(-1)}}class VS{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new ud(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Dt.fromTimestamp(new Wn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ef(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Tt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return ef(e).Wt((l,h)=>{const _=Ol(h);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>he.waitFor(a)).next(()=>i)}forEachTarget(e,t){return ef(e).Wt((r,i)=>{const a=Ol(i);t(a)})}pn(e){return Vb(e).get("targetGlobalKey").next(t=>(Tt(null!==t),t))}In(e,t){return Vb(e).put("targetGlobalKey",t)}Tn(e,t){return ef(e).put(Rb(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=xl(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return ef(e).Wt({range:i,index:"queryTargetsIndex"},(l,h,_)=>{const w=Ol(h);as(t,w.target)&&(a=w,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Bl(e);return t.forEach(l=>{const h=Li(l.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))}),he.waitFor(i)}removeMatchingKeys(e,t,r){const i=Bl(e);return he.forEach(t,a=>{const l=Li(a.path);return he.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Bl(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Bl(e);let a=sn();return i.Wt({range:r,jt:!0},(l,h,_)=>{const w=Aa(l[1]),D=new Ge(w);a=a.add(D)}).next(()=>a)}containsKey(e,t){const r=Li(t.path),i=IDBKeyRange.bound([r],[LC(r)],!1,!0);let a=0;return Bl(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([l,h],_,w)=>{0!==l&&(a++,w.done())}).next(()=>a>0)}Et(e,t){return ef(e).get(t).next(r=>r?Ol(r):null)}}function ef(n){return mr(n,"targets")}function Vb(n){return mr(n,"targetGlobal")}function Bl(n){return mr(n,"targetDocuments")}function ld(n){return Bw.apply(this,arguments)}function Bw(){return Bw=(0,ye.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==Ab)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}),Bw.apply(this,arguments)}function Ub([n,e],[t,r]){const i=Pt(n,t);return 0===i?Pt(e,r):i}class US{constructor(e){this.An=e,this.buffer=new bn(Ub),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Ub(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Kp{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Fe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ye.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){id(i)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield ld(i)}yield t.Sn(e)}))}}class Bb{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return he.resolve(os.A);const r=new US(t);return this.Dn.forEachTarget(e,i=>r.Pn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.Pn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(FS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),FS):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,a,l,h,_,w;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(w=Date.now(),u_()<=Oo.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-D}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${a} targets in `+(_-h)+`ms\n\tRemoved ${S} documents in `+(w-_)+`ms\nTotal Duration: ${w-D}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class jb{constructor(e,t){this.db=e,this.garbageCollector=new Bb(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return Zp(e,r)}removeReference(e,t,r){return Zp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Zp(e,t)}On(e,t){return function(r,i){let a=!1;return Lb(r).zt(l=>LS(r,l,i).next(h=>(h&&(a=!0),he.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Mn(e,(l,h)=>{if(h<=t){const _=this.On(e,l).next(w=>{if(!w)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Dt.min()),Bl(e).delete([0,Li(l.path)])))});i.push(_)}}).next(()=>he.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Zp(e,t)}Mn(e,t){const r=Bl(e);let i,a=os.A;return r.Wt({index:"documentTargetsIndex"},([l,h],{path:_,sequenceNumber:w})=>{0===l?(a!==os.A&&t(new Ge(Aa(i)),a),a=w,i=_):a=os.A}).next(()=>{a!==os.A&&t(new Ge(Aa(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Zp(n,e){return Bl(n).put((r=n.currentSequenceNumber,{targetId:0,path:Li(e.path),sequenceNumber:r}));var r}class jw{constructor(){this.changes=new Ml(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Rn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Hb{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return cd(e).put(r)}removeEntry(e,t,r){return cd(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],S_(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Rn.newInvalidDocument(t);return cd(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Yp(t))},(i,a)=>{r=this.$n(t,a)}).next(()=>r)}Bn(e,t){let r={size:0,document:Rn.newInvalidDocument(t)};return cd(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Yp(t))},(i,a)=>{r={document:this.$n(t,a),size:Uw(a)}}).next(()=>r)}getEntries(e,t){let r=Fi();return this.Ln(e,t,(i,a)=>{const l=this.$n(i,a);r=r.insert(i,l)}).next(()=>r)}Un(e,t){let r=Fi(),i=new qn(Ge.comparator);return this.Ln(e,t,(a,l)=>{const h=this.$n(a,l);r=r.insert(a,h),i=i.insert(a,Uw(l))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return he.resolve();let i=new bn(Wb);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(Yp(i.first()),Yp(i.last())),l=i.getIterator();let h=l.getNext();return cd(e).Wt({index:"documentKeyIndex",range:a},(_,w,D)=>{const S=Ge.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;h&&Wb(h,S)<0;)r(h,null),h=l.getNext();h&&h.isEqual(S)&&(r(h,w),h=l.hasNext()?l.getNext():null),h?D.Ut(Yp(h)):D.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),S_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return cd(e).qt(IDBKeyRange.bound(i,a,!0)).next(l=>{let h=Fi();for(const _ of l){const w=this.$n(Ge.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);h=h.insert(w.key,w)}return h})}getAllFromCollectionGroup(e,t,r,i){let a=Fi();const l=Gb(t,r),h=Gb(t,Uo.max());return cd(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(_,w,D)=>{const S=this.$n(Ge.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(S.key,S),a.size===i&&D.done()}).next(()=>a)}newChangeBuffer(e){return new BS(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return $b(e).get("remoteDocumentGlobalKey").next(t=>(Tt(!!t),t))}Fn(e,t){return $b(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function PS(n,e){let t;if(e.document)t=ww(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ge.fromSegments(e.noDocument.path),i=Jh(e.noDocument.readTime);t=Rn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const r=Ge.fromSegments(e.unknownDocument.path),i=Jh(e.unknownDocument.version);t=Rn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Wn(r[0],r[1]);return Dt.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Dt.min()))return r}return Rn.newInvalidDocument(e)}}class BS extends jw{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Ml(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new bn((a,l)=>Pt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const h=this.Gn.get(a);if(t.push(this.Kn.removeEntry(e,a,h.readTime)),l.isValidDocument()){const _=Mw(this.Kn.M,l);i=i.add(a.path.popLast()),r+=Uw(_)-h.size,t.push(this.Kn.addEntry(e,a,_))}else if(r-=h.size,this.trackRemovals){const _=Mw(this.Kn.M,l.convertToNoDocument(Dt.min()));t.push(this.Kn.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Kn.updateMetadata(e,r)),he.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((a,l)=>{this.Gn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function $b(n){return mr(n,"remoteDocumentGlobal")}function cd(n){return mr(n,"remoteDocumentsV14")}function Yp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Gb(n,e){const t=e.documentKey.path.toArray();return[n,S_(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Wb(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Pt(t[a],r[a]),i)return i;return i=Pt(t.length,r.length),i||(i=Pt(t[t.length-2],r[r.length-2]),i||Pt(t[t.length-1],r[r.length-1]))}class jS{constructor(e){this.M=e}kt(e,t,r,i){const a=new jp("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bw,{unique:!0}),h.createObjectStore("documentMutations"),tf(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=he.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),tf(e)),l=l.next(()=>function(h){const _=h.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,_){return _.store("mutations").qt().next(w=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bw,{unique:!0});const D=_.store("mutations"),S=w.map(N=>D.put(N));return he.waitFor(S)})}(e,a))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Qn(a))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.jn(a)))),r<7&&i>=7&&(l=l.next(()=>this.Wn(a))),r<8&&i>=8&&(l=l.next(()=>this.zn(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.Hn(a))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const _=h.createObjectStore("documentOverlays",{keyPath:Db});_.createIndex("collectionPathOverlayIndex",SS,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",AS,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const _=h.createObjectStore("remoteDocumentsV14",{keyPath:Cb});_.createIndex("documentKeyIndex",ES),_.createIndex("collectionGroupIndex",Dw)}(e)).next(()=>this.Jn(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>{!function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:IS}).createIndex("sequenceNumberIndex",DS,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:Tw}).createIndex("documentKeyIndex",TS,{unique:!1})}(e)})),l}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=Uw(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>he.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",l).next(h=>he.forEach(h,_=>{Tt(_.userId===a.userId);const w=Xh(this.M,_);return Fb(e,a.userId,w).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Wt((l,h)=>{const _=new Wt(l),w=[0,Li(_)];a.push(t.get(w).next(D=>D?he.resolve():t.put({targetId:0,path:Li(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>he.waitFor(a))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:bS});const r=t.store("collectionParents"),i=new Lw,a=l=>{if(i.add(l)){const h=l.lastSegment(),_=l.popLast();return r.put({collectionId:h,parent:Li(_)})}};return t.store("remoteDocuments").Wt({jt:!0},(l,h)=>{const _=new Wt(l);return a(_.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([l,h,_],w)=>{const D=Aa(h);return a(D.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const a=Ol(i),l=Rb(this.M,a);return t.put(l)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((a,l)=>{const h=t.store("remoteDocumentsV14"),_=(w=l,w.document?new Ge(Wt.fromString(w.document.name).popFirst(5)):w.noDocument?Ge.fromSegments(w.noDocument.path):w.unknownDocument?Ge.fromSegments(w.unknownDocument.path):it()).path.toArray();var w;const D={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(D))}).next(()=>he.waitFor(i))}}function tf(n){n.createObjectStore("targetDocuments",{keyPath:bb}).createIndex("documentTargetsIndex",Ib,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",CS,{unique:!0}),n.createObjectStore("targetGlobal")}const Hw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Qp{constructor(e,t,r,i,a,l,h,_,w,D,S=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=a,this.window=l,this.document=h,this.Xn=w,this.Zn=D,this.ts=S,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=N=>Promise.resolve(),!Qp.vt())throw new Pe(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jb(this,i),this.hs=t+"main",this.M=new Rw(_),this.ls=new Ho(this.hs,this.ts,new jS(this.M)),this.fs=new VS(this.referenceDelegate,this.M),this.ds=new Hb(this.M),this._s=new CM,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===D&&Tr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(de.FAILED_PRECONDITION,Hw);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new os(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,ye.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>R_(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(id(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return us(e).get("owner").next(t=>he.resolve(this.Ps(t)))}Vs(e){return R_(e).delete(this.clientId)}vs(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=mr(r,"clientMetadata");return i.qt().next(a=>{const l=e.Ds(a,18e5),h=a.filter(_=>-1===l.indexOf(_));return he.forEach(h,_=>i.delete(_.clientId)).next(()=>h)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?he.resolve(!0):us(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Pe(de.FAILED_PRECONDITION,Hw);return!1}}return!(!this.networkEnabled||!this.inForeground)||R_(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Sw(t,os.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>R_(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return x_.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new OS(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return Pw.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Fe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=14===(l=this.ts)?RS:13===l?Sb:12===l?xS:11===l?Tb:void it();var l;let h;return this.ls.runTransaction(e,i,a,_=>(h=new Sw(_,this.es?this.es.next():os.A),"readwrite-primary"===t?this.Es(h).next(w=>!!w||this.As(h)).next(w=>{if(!w)throw Tr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Pe(de.FAILED_PRECONDITION,Ab);return r(h)}).next(w=>this.bs(h).next(()=>w)):this.$s(h).next(()=>r(h)))).then(_=>(h.raiseOnCommittedEvent(),_))}$s(e){return us(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(de.FAILED_PRECONDITION,Hw)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return us(e).put("owner",t)}static vt(){return Ho.vt()}Rs(e){const t=us(e);return t.get("owner").next(r=>this.Ps(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):he.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Tr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,k.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Tr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Tr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function us(n){return mr(n,"owner")}function R_(n){return mr(n,"clientMetadata")}function Jp(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Xp{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return Ge.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):__(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new Ge(t)).next(r=>{let i=Hh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let a=Hh();return this.indexManager.getCollectionParents(e,i).next(l=>he.forEach(l,h=>{const _=(w=t,D=h.child(i),new io(D,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,D;return this.zs(e,_,r).next(w=>{w.forEach((D,S)=>{a=a.insert(D,S)})})}).next(()=>a))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const l of a)for(const h of l.mutations){const _=h.key;let w=i.get(_);null==w&&(w=Rn.newInvalidDocument(_),i=i.insert(_,w)),E_(h,w,l.localWriteTime),w.isFoundDocument()||(i=i.remove(_))}}).next(()=>(i.forEach((a,l)=>{v_(t,l)||(i=i.remove(a))}),i))}}class $w{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=sn(),i=sn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new $w(e,t.fromCache,r,i)}}class qb{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,i){return this.ti(e,t).next(a=>a||this.ei(e,t,i,r)).next(a=>a||this.ni(e,t))}ti(e,t){return he.resolve(null)}ei(e,t,r,i){return function ZC(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(Dt.min())?this.ni(e,t):this.Zs.Ks(e,r).next(a=>{const l=this.si(t,a);return this.ii(t,l,r,i)?this.ni(e,t):(u_()<=Oo.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),y_(t)),this.ri(e,l,t,HC(i,-1)))})}si(e,t){let r=new bn(QC(e));return t.forEach((i,a)=>{v_(e,a)&&(r=r.add(a))}),r}ii(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ni(e,t){return u_()<=Oo.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",y_(t)),this.Zs.Qs(e,t,Uo.min())}ri(e,t,r,i){return this.Zs.Qs(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class HS{constructor(e,t,r,i){this.persistence=e,this.oi=t,this.M=i,this.ui=new qn(Pt),this.ai=new Ml(a=>xl(a),as),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new Xp(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function eg(n,e,t,r){return new HS(n,e,t,r)}function tg(n,e){return Gw.apply(this,arguments)}function Gw(){return Gw=(0,ye.Z)(function*(n,e){const t=Ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(a=>(i=a,t.li(e),t.Bs.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let _=sn();for(const w of i){l.push(w.batchId);for(const D of w.mutations)_=_.add(D.key)}for(const w of a){h.push(w.batchId);for(const D of w.mutations)_=_.add(D.key)}return t.fi.Ks(r,_).next(w=>({di:w,removedBatchIds:l,addedBatchIds:h}))})})}),Gw.apply(this,arguments)}function $S(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.hi.newChangeBuffer({trackRemovals:!0});return function(l,h,_,w){const D=_.batch,S=D.keys();let N=he.resolve();return S.forEach(V=>{N=N.next(()=>w.getEntry(h,V)).next(j=>{const fe=_.docVersions.get(V);Tt(null!==fe),j.version.compareTo(fe)<0&&(D.applyToRemoteDocument(j,_),j.isValidDocument()&&(j.setReadTime(_.commitVersion),w.addEntry(j)))})}),N.next(()=>l.Bs.removeMutationBatch(h,D))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,i))})}function Ww(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function zb(n,e){const t=Ye(n),r=e.snapshotVersion;let i=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.hi.newChangeBuffer({trackRemovals:!0});i=t.ui;const h=[];e.targetChanges.forEach((w,D)=>{const S=i.get(D);if(!S)return;h.push(t.fs.removeMatchingKeys(a,w.removedDocuments,D).next(()=>t.fs.addMatchingKeys(a,w.addedDocuments,D)));let N=S.withSequenceNumber(a.currentSequenceNumber);var V,j,fe;e.targetMismatches.has(D)?N=N.withResumeToken(rr.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):w.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(w.resumeToken,r)),i=i.insert(D,N),j=N,fe=w,(0===(V=S).resumeToken.approximateByteSize()||j.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8||fe.addedDocuments.size+fe.modifiedDocuments.size+fe.removedDocuments.size>0)&&h.push(t.fs.updateTargetData(a,N))});let _=Fi();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,w))}),h.push(M_(a,l,e.documentUpdates).next(w=>{_=w})),!r.isEqual(Dt.min())){const w=t.fs.getLastRemoteSnapshotVersion(a).next(D=>t.fs.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(w)}return he.waitFor(h).next(()=>l.apply(a)).next(()=>t.fi.Gs(a,_)).next(()=>_)}).then(a=>(t.ui=i,a))}function M_(n,e,t){let r=sn();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=Fi();return t.forEach((l,h)=>{const _=i.get(l);h.isNoDocument()&&h.version.isEqual(Dt.min())?(e.removeEntry(l,h.readTime),a=a.insert(l,h)):!_.isValidDocument()||h.version.compareTo(_.version)>0||0===h.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(h),a=a.insert(l,h)):Fe("LocalStore","Ignoring outdated watch update for ",l,". Current version:",_.version," Watch version:",h.version)}),a})}function Kb(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function nf(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(a=>a?(i=a,he.resolve(i)):t.fs.allocateTargetId(r).next(l=>(i=new Pl(e,l,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function rf(n,e,t){return Zb.apply(this,arguments)}function Zb(){return Zb=(0,ye.Z)(function*(n,e,t){const r=Ye(n),i=r.ui.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!id(l))throw l;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.ui=r.ui.remove(e),r.ai.delete(i.target)}),Zb.apply(this,arguments)}function sf(n,e,t){const r=Ye(n);let i=Dt.min(),a=sn();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,_,w){const D=Ye(h),S=D.ai.get(w);return void 0!==S?he.resolve(D.ui.get(S)):D.fs.getTargetData(_,w)}(r,l,Is(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(l,h.targetId).next(_=>{a=_})}).next(()=>r.oi.Qs(l,e,t?i:Dt.min(),t?a:sn())).next(h=>(P_(r,YC(e),h),{documents:h,_i:a})))}function N_(n,e){const t=Ye(n),r=Ye(t.fs),i=t.ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Et(a,e).next(l=>l?l.target:null))}function qw(n,e){const t=Ye(n),r=t.ci.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.hi.getAllFromCollectionGroup(i,e,HC(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(P_(t,e,i),i))}function P_(n,e,t){let r=Dt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.ci.set(e,r)}function Kw(){return Kw=(0,ye.Z)(function*(n,e,t,r){const i=Ye(n);let a=sn(),l=Fi();for(const w of t){const D=e.wi(w.metadata.name);w.document&&(a=a.add(D));const S=e.mi(w);S.setReadTime(e.gi(w.metadata.readTime)),l=l.insert(D,S)}const h=i.hi.newChangeBuffer({trackRemovals:!0}),_=yield nf(i,(w=r,Is(Zc(Wt.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>M_(w,h,l).next(D=>(h.apply(w),D)).next(D=>i.fs.removeMatchingKeysForTargetId(w,_.targetId).next(()=>i.fs.addMatchingKeys(w,a,_.targetId)).next(()=>i.fi.Gs(w,D)).next(()=>D)))}),Kw.apply(this,arguments)}function GS(n,e){return Zw.apply(this,arguments)}function Zw(){return Zw=(0,ye.Z)(function*(n,e,t=sn()){const r=yield nf(n,Is(Fl(e.bundledQuery))),i=Ye(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=Hr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i._s.saveNamedQuery(a,e);const h=r.withResumeToken(rr.EMPTY_BYTE_STRING,l);return i.ui=i.ui.insert(h.targetId,h),i.fs.updateTargetData(a,h).next(()=>i.fs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.fs.addMatchingKeys(a,t,r.targetId)).next(()=>i._s.saveNamedQuery(a,e))})}),Zw.apply(this,arguments)}class WS{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return he.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:Hr(r.createTime)}),he.resolve()}getNamedQuery(e,t){return he.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:Fl(r.bundledQuery),readTime:Hr(r.readTime)}),he.resolve();var r}}class Yb{constructor(){this.overlays=new qn(Ge.comparator),this.Ii=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.Xt(e,t,a)}),he.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ii.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ii.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const i=Nl(),a=t.length+1,l=new Ge(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const _=h.getNext().value,w=_.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return he.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new qn((w,D)=>w-D);const l=this.overlays.getIterator();for(;l.hasNext();){const w=l.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let D=a.get(w.largestBatchId);null===D&&(D=Nl(),a=a.insert(w.largestBatchId,D)),D.set(w.getKey(),w)}}const h=Nl(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,D)=>h.set(w,D)),!(h.size()>=i)););return he.resolve(h)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const l=this.Ii.get(i.largestBatchId).delete(r.key);this.Ii.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new $p(t,r));let a=this.Ii.get(t);void 0===a&&(a=sn(),this.Ii.set(t,a)),this.Ii.set(t,a.add(r.key))}}class ng{constructor(){this.Ti=new bn(Ar.Ei),this.Ai=new bn(Ar.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new Ar(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new Ar(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new Ge(new Wt([])),r=new Ar(t,e),i=new Ar(t,e+1),a=[];return this.Ai.forEachInRange([r,i],l=>{this.Pi(l),a.push(l.key)}),a}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new Ge(new Wt([])),r=new Ar(t,e),i=new Ar(t,e+1);let a=sn();return this.Ai.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Ar(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ar{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return Ge.comparator(e.key,t.key)||Pt(e.Ci,t.Ci)}static Ri(e,t){return Pt(e.Ci,t.Ci)||Ge.comparator(e.key,t.key)}}class qS{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new bn(Ar.Ei)}checkEmpty(e){return he.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const a=this.xi;this.xi++;const l=new Aw(a,t,r,i);this.Bs.push(l);for(const h of i)this.Ni=this.Ni.add(new Ar(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return he.resolve(l)}lookupMutationBatch(e,t){return he.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Mi(t+1),a=i<0?0:i;return he.resolve(this.Bs.length>a?this.Bs[a]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return he.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ar(t,0),i=new Ar(t,Number.POSITIVE_INFINITY),a=[];return this.Ni.forEachInRange([r,i],l=>{const h=this.ki(l.Ci);a.push(h)}),he.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new bn(Pt);return t.forEach(i=>{const a=new Ar(i,0),l=new Ar(i,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([a,l],h=>{r=r.add(h.Ci)})}),he.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ge.isDocumentKey(a)||(a=a.child(""));const l=new Ar(new Ge(a),0);let h=new bn(Pt);return this.Ni.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(h=h.add(_.Ci)),!0)},l),he.resolve(this.Oi(h))}Oi(e){const t=[];return e.forEach(r=>{const i=this.ki(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Tt(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return he.forEach(t.mutations,i=>{const a=new Ar(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new Ar(t,0),i=this.Ni.firstAfterOrEqual(r);return he.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return he.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class Qb{constructor(e){this.$i=e,this.docs=new qn(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():Rn.newInvalidDocument(t))}getEntries(e,t){let r=Fi();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Rn.newInvalidDocument(i))}),he.resolve(r)}getAllFromCollection(e,t,r){let i=Fi();const a=new Ge(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:h,value:{document:_}}=l.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||sw($C(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return he.resolve(i)}getAllFromCollectionGroup(e,t,r,i){it()}Bi(e,t){return he.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Jb(this)}getSize(e){return he.resolve(this.size)}}class Jb extends jw{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),he.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class zS{constructor(e){this.persistence=e,this.Li=new Ml(t=>xl(t),as),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.Ui=0,this.qi=new ng,this.targetCount=0,this.Ki=ud.gn()}forEachTarget(e,t){return this.Li.forEach((r,i)=>t(i)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),he.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new ud(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.Tn(t),he.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Li.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Li.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),he.waitFor(a).next(()=>i)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),he.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),he.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this.qi.containsKey(t))}}class Xb{constructor(e,t){this.Gi={},this.overlays={},this.es=new os(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new zS(this),this.indexManager=new Fw,this.ds=new Qb(r=>this.referenceDelegate.Qi(r)),this.M=new Rw(t),this._s=new WS(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Yb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new qS(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const i=new eI(this.es.next());return this.referenceDelegate.ji(),r(i).next(a=>this.referenceDelegate.Wi(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}zi(e,t){return he.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class eI extends xb{constructor(e){super(),this.currentSequenceNumber=e}}class Yw{constructor(e){this.persistence=e,this.Hi=new ng,this.Ji=null}static Yi(e){return new Yw(e)}get Xi(){if(this.Ji)return this.Ji;throw it()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),he.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(i=>this.Xi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Xi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Xi,r=>{const i=Ge.fromPath(r);return this.Zi(e,i).next(a=>{a||t.removeEntry(i,Dt.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return he.or([()=>he.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function Qw(n,e){return`firestore_clients_${n}_${e}`}function tI(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ri(n,e){return`firestore_targets_${n}_${e}`}class Du{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static tr(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Pe(i.error.code,i.error.message))),l?new Du(e,t,i.state,a):(Tr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rg{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Pe(r.error.code,r.error.message))),a?new rg(e,r.state,i):(Tr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class k_{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=C_();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=h_(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new k_(e,a):(Tr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class nI{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new nI(t.clientId,t.onlineState):(Tr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class dd{constructor(){this.activeTargetIds=C_()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Jw{constructor(e,t,r,i,a){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new qn(Pt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.hr=Qw(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new dd),this.dr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.ir)continue;const a=e.getItem(Qw(e.persistenceKey,i));if(a){const l=k_.tr(i,a);l&&(e.ar=e.ar.insert(l.clientId,l))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const i=e.pr(r);i&&e.Ir(i)}for(const i of e.cr)e.ur(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ri(this.persistenceKey,e));if(r){const i=rg.tr(e,r);i&&(t=i.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ri(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ar(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void Tr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Sr(i,null)}{const i=t.Dr(r.key,r.newValue);if(i)return t.Sr(i.clientId,i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.kr(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.mr){if(null!==r.newValue){const i=t.pr(r.newValue);if(i)return t.Ir(i)}}else if(r.key===t.lr){const i=function(a){let l=os.A;if(null!=a)try{const h=JSON.parse(a);Tt("number"==typeof h),l=h}catch(h){Tr("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==os.A&&t.sequenceNumberHandler(i)}else if(r.key===t.gr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Fr(a)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const i=new Du(this.currentUser,e,t,r),a=tI(this.persistenceKey,this.currentUser,e);this.setItem(a,i.er())}Ar(e){const t=tI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const i=ri(this.persistenceKey,e),a=new rg(e,t,r);this.setItem(i,a.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return k_.tr(r,t)}Cr(e,t){const r=this._r.exec(e),i=Number(r[1]);return Du.tr(new ti(void 0!==r[2]?r[2]:null),i,t)}kr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return rg.tr(i,t)}pr(e){return nI.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),a=this.Tr(r),l=[],h=[];return a.forEach(_=>{i.has(_)||l.push(_)}),i.forEach(_=>{a.has(_)||h.push(_)}),this.syncEngine.Lr(l,h).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=C_();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class O_{constructor(){this.Ur=new dd,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new dd,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class KS{Kr(e){}shutdown(){}}class Xw{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const ZS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class YS{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class e0 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,a){const l=this.ho(e,t);Fe("RestConnection","Sending: ",l,r);const h={};return this.lo(h,i,a),this.fo(e,l,h,r).then(_=>(Fe("RestConnection","Received: ",_),_),_=>{throw Ip("RestConnection",`${e} failed with error: `,_,"url: ",l,"request:",r),_})}_o(e,t,r,i,a){return this.co(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Wc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.uo}/v1/${t}:${ZS[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,l)=>{const h=new PC;h.listenOnce(NC.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case a_.NO_ERROR:const w=h.getResponseJson();Fe("Connection","XHR received:",JSON.stringify(w)),a(w);break;case a_.TIMEOUT:Fe("Connection",'RPC "'+e+'" timed out'),l(new Pe(de.DEADLINE_EXCEEDED,"Request time out"));break;case a_.HTTP_ERROR:const D=h.getStatus();if(Fe("Connection",'RPC "'+e+'" failed with status:',D,"response text:",h.getResponseText()),D>0){const S=h.getResponseJson().error;if(S&&S.status&&S.message){const N=function(V){const j=V.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(j)>=0?j:de.UNKNOWN}(S.status);l(new Pe(N,S.message))}else l(new Pe(de.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new Pe(de.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{Fe("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);h.send(t,"POST",_,r,15)})}wo(e,t,r){const i=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=RC(),l=MC(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new HT({})),this.lo(h.initMessageHeaders,t,r),(0,k.uI)()||(0,k.b$)()||(0,k.d)()||(0,k.w1)()||(0,k.Mn)()||(0,k.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");Fe("Connection","Creating WebChannel: "+_,h);const w=a.createWebChannel(_,h);let D=!1,S=!1;const N=new YS({Jr:j=>{S?Fe("Connection","Not sending because WebChannel is closed:",j):(D||(Fe("Connection","Opening WebChannel transport."),w.open(),D=!0),Fe("Connection","WebChannel sending:",j),w.send(j))},Yr:()=>w.close()}),V=(j,fe,Me)=>{j.listen(fe,nt=>{try{Me(nt)}catch(lt){setTimeout(()=>{throw lt},0)}})};return V(w,bp.EventType.OPEN,()=>{S||Fe("Connection","WebChannel transport opened.")}),V(w,bp.EventType.CLOSE,()=>{S||(S=!0,Fe("Connection","WebChannel transport closed"),N.ro())}),V(w,bp.EventType.ERROR,j=>{S||(S=!0,Ip("Connection","WebChannel transport errored:",j),N.ro(new Pe(de.UNAVAILABLE,"The operation could not be completed")))}),V(w,bp.EventType.MESSAGE,j=>{var fe;if(!S){const Me=j.data[0];Tt(!!Me);const nt=Me,lt=nt.error||(null===(fe=nt[0])||void 0===fe?void 0:fe.error);if(lt){Fe("Connection","WebChannel received error:",lt);const ut=lt.status;let ot=function(Kt){const Gr=sr[Kt];if(void 0!==Gr)return fb(Gr)}(ut),Mt=lt.message;void 0===ot&&(ot=de.INTERNAL,Mt="Unknown error status: "+ut+" with message "+lt.message),S=!0,N.ro(new Pe(ot,Mt)),w.close()}else Fe("Connection","WebChannel received:",Me),N.oo(Me)}}),V(l,jT.STAT_EVENT,j=>{j.stat===zv.PROXY?Fe("Connection","Detected buffering proxy"):j.stat===zv.NOPROXY&&Fe("Connection","Detected no buffering proxy")}),setTimeout(()=>{N.io()},0),N}}function t0(){return"undefined"!=typeof window?window:null}function ig(){return"undefined"!=typeof document?document:null}function jl(n){return new b_(n,!0)}class sg{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Fe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class QS{constructor(e,t,r,i,a,l,h,_){this.Yn=e,this.Vo=r,this.vo=i,this.So=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=_,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new sg(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ye.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,ye.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(Tr(t.toString()),Tr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new Pe(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.No.Ro((0,ye.Z)(function*(){e.state=0,e.start()}))}jo(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rI extends QS{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.M=a}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function fS(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:it(),i=e.targetChange.targetIds||[],a=function(_,w){return _.N?(Tt(void 0===w||"string"==typeof w),rr.fromBase64String(w||"")):(Tt(void 0===w||w instanceof Uint8Array),rr.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(_){const w=void 0===_.code?de.UNKNOWN:fb(_.code);return new Pe(w,_.message||"")}(l);t=new pb(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Sa(n,r.document.name),a=Hr(r.document.updateTime),l=new Oi({mapValue:{fields:r.document.fields}}),h=Rn.newFoundDocument(i,a,l);t=new Lp(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=Sa(n,r.document),a=r.readTime?Hr(r.readTime):Dt.min(),l=Rn.newNoDocument(i,a);t=new Lp([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Sa(n,r.document);t=new Lp([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return it();{const r=e.filter,a=new hb(r.count||0);t=new gw(r.targetId,a)}}var _;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return Dt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Dt.min():a.readTime?Hr(a.readTime):Dt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=Kh(this.M),t.addTarget=function(i,a){let l;const h=a.target;return l=g_(h)?{documents:pS(i,h)}:{query:Ew(i,h)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=mw(i,a.resumeToken):a.snapshotVersion.compareTo(Dt.min())>0&&(l.readTime=qh(i,a.snapshotVersion.toTimestamp())),l}(this.M,e);const r=function gS(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return it()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=Kh(this.M),t.removeTarget=e,this.Lo(t)}}class JS extends QS{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.M=a,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function EM(n,e){return n&&n.length>0?(Tt(void 0!==e),n.map(t=>function(r,i){let a=Hr(r.updateTime?r.updateTime:i);return a.isEqual(Dt.min())&&(a=Hr(i)),new ab(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Hr(e.commitTime);return this.listener.tu(r,t)}return Tt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Kh(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>I_(this.M,r))};this.Lo(t)}}class iI extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=i,this.su=!1}iu(){if(this.su)throw new Pe(de.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.So.co(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(de.UNKNOWN,i.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.So._o(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(de.UNKNOWN,i.toString())})}terminate(){this.su=!0}}class F_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Tr(t),this.uu=!1):Fe("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class sI{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.Kr(h=>{r.enqueueAndForget((0,ye.Z)(function*(){var _;Tu(l)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,ye.Z)(function*(w){const D=Ye(w);D.wu.add(4),yield Hl(D),D.yu.set("Unknown"),D.wu.delete(4),yield og(D)}),function(w){return _.apply(this,arguments)})(l))}))}),this.yu=new F_(r,i)}}function og(n){return ag.apply(this,arguments)}function ag(){return ag=(0,ye.Z)(function*(n){if(Tu(n))for(const e of n.mu)yield e(!0)}),ag.apply(this,arguments)}function Hl(n){return oI.apply(this,arguments)}function oI(){return oI=(0,ye.Z)(function*(n){for(const e of n.mu)yield e(!1)}),oI.apply(this,arguments)}function L_(n,e){const t=Ye(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),U_(t)?r0(t):hd(t).Mo()&&V_(t,e))}function ug(n,e){const t=Ye(n),r=hd(t);t._u.delete(e),r.Mo()&&n0(t,e),0===t._u.size&&(r.Mo()?r.$o():Tu(t)&&t.yu.set("Unknown"))}function V_(n,e){n.pu.Z(e.targetId),hd(n).Ho(e)}function n0(n,e){n.pu.Z(e),hd(n).Jo(e)}function r0(n){n.pu=new lS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),hd(n).start(),n.yu.au()}function U_(n){return Tu(n)&&!hd(n).ko()&&n._u.size>0}function Tu(n){return 0===Ye(n).wu.size}function aI(n){n.pu=void 0}function XS(n){return B_.apply(this,arguments)}function B_(){return B_=(0,ye.Z)(function*(n){n._u.forEach((e,t)=>{V_(n,e)})}),B_.apply(this,arguments)}function eA(n,e){return j_.apply(this,arguments)}function j_(){return j_=(0,ye.Z)(function*(n,e){aI(n),U_(n)?(n.yu.lu(e),r0(n)):n.yu.set("Unknown")}),j_.apply(this,arguments)}function uI(n,e,t){return H_.apply(this,arguments)}function H_(){return H_=(0,ye.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof pb&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(i,a){const l=a.cause;for(const h of a.targetIds)i._u.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i._u.delete(h),i.pu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield lg(n,r)}else if(e instanceof Lp?n.pu.ut(e):e instanceof gw?n.pu._t(e):n.pu.ht(e),!t.isEqual(Dt.min()))try{const r=yield Ww(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.pu.yt(a);return l.targetChanges.forEach((h,_)=>{if(h.resumeToken.approximateByteSize()>0){const w=i._u.get(_);w&&i._u.set(_,w.withResumeToken(h.resumeToken,a))}}),l.targetMismatches.forEach(h=>{const _=i._u.get(h);if(!_)return;i._u.set(h,_.withResumeToken(rr.EMPTY_BYTE_STRING,_.snapshotVersion)),n0(i,h);const w=new Pl(_.target,h,1,_.sequenceNumber);V_(i,w)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield lg(n,r)}var r}),H_.apply(this,arguments)}function lg(n,e,t){return s0.apply(this,arguments)}function s0(){return s0=(0,ye.Z)(function*(n,e,t){if(!id(e))throw e;n.wu.add(1),yield Hl(n),n.yu.set("Offline"),t||(t=()=>Ww(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield og(n)}))}),s0.apply(this,arguments)}function lI(n,e){return e().catch(t=>lg(n,t,e))}function cg(n){return $_.apply(this,arguments)}function $_(){return $_=(0,ye.Z)(function*(n){const e=Ye(n),t=Su(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;bM(e);)try{const i=yield Kb(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,IM(e,i)}catch(i){yield lg(e,i)}tA(e)&&nA(e)}),$_.apply(this,arguments)}function bM(n){return Tu(n)&&n.du.length<10}function IM(n,e){n.du.push(e);const t=Su(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function tA(n){return Tu(n)&&!Su(n).ko()&&n.du.length>0}function nA(n){Su(n).start()}function DM(n){return cI.apply(this,arguments)}function cI(){return cI=(0,ye.Z)(function*(n){Su(n).nu()}),cI.apply(this,arguments)}function TM(n){return dI.apply(this,arguments)}function dI(){return dI=(0,ye.Z)(function*(n){const e=Su(n);for(const t of n.du)e.Zo(t.mutations)}),dI.apply(this,arguments)}function G_(n,e,t){return hI.apply(this,arguments)}function hI(){return hI=(0,ye.Z)(function*(n,e,t){const r=n.du.shift(),i=xw.from(r,e,t);yield lI(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield cg(n)}),hI.apply(this,arguments)}function fI(n,e){return dg.apply(this,arguments)}function dg(){return dg=(0,ye.Z)(function*(n,e){var t;e&&Su(n).Xo&&(yield(t=(0,ye.Z)(function*(r,i){if(vt(a=i.code)&&a!==de.ABORTED){const l=r.du.shift();Su(r).Fo(),yield lI(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield cg(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),tA(n)&&nA(n)}),dg.apply(this,arguments)}function o0(n,e){return W_.apply(this,arguments)}function W_(){return W_=(0,ye.Z)(function*(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const r=Tu(t);t.wu.add(3),yield Hl(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield og(t)}),W_.apply(this,arguments)}function pI(n,e){return hg.apply(this,arguments)}function hg(){return hg=(0,ye.Z)(function*(n,e){const t=Ye(n);e?(t.wu.delete(2),yield og(t)):e||(t.wu.add(2),yield Hl(t),t.yu.set("Unknown"))}),hg.apply(this,arguments)}function hd(n){return n.Iu||(n.Iu=function(e,t,r){const i=Ye(e);return i.iu(),new rI(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:XS.bind(null,n),eo:eA.bind(null,n),zo:uI.bind(null,n)}),n.mu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Iu.Fo(),U_(n)?r0(n):n.yu.set("Unknown")):(yield n.Iu.stop(),aI(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Su(n){return n.Tu||(n.Tu=function(e,t,r){const i=Ye(e);return i.iu(),new JS(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:DM.bind(null,n),eo:fI.bind(null,n),eu:TM.bind(null,n),tu:G_.bind(null,n)}),n.mu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Tu.Fo(),yield cg(n)):(yield n.Tu.stop(),n.du.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class q_{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new q_(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fg(n,e){if(Tr("AsyncQueue",`${e}: ${n}`),id(n))return new Pe(de.UNAVAILABLE,`${e}: ${n}`);throw n}class fd{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=Hh(),this.sortedSet=new qn(this.comparator)}static emptySet(e){return new fd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new fd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class gI{constructor(){this.Eu=new qn(Ge.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):it():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class $l{constructor(e,t,r,i,a,l,h,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new $l(e,t,fd.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class rA{constructor(){this.Ru=void 0,this.listeners=[]}}class SM{constructor(){this.queries=new Ml(e=>hw(e),Vh),this.onlineState="Unknown",this.bu=new Set}}function mI(n,e){return _I.apply(this,arguments)}function _I(){return _I=(0,ye.Z)(function*(n,e){const t=Ye(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new rA),i)try{a.Ru=yield t.onListen(r)}catch(l){const h=fg(l,`Initialization of query '${y_(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.Pu(t.onlineState),a.Ru&&e.Vu(a.Ru)&&l0(t)}),_I.apply(this,arguments)}function a0(n,e){return u0.apply(this,arguments)}function u0(){return u0=(0,ye.Z)(function*(n,e){const t=Ye(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),u0.apply(this,arguments)}function iA(n,e){const t=Ye(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.Vu(i)&&(r=!0);l.Ru=i}}r&&l0(t)}function AM(n,e,t){const r=Ye(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function l0(n){n.bu.forEach(e=>{e.next()})}class pg{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new $l(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=$l.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class sA{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class so{constructor(e){this.M=e}wi(e){return Sa(this.M,e)}mi(e){return e.metadata.exists?ww(this.M,e.document,!1):Rn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Hr(e)}}class oA{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=z_(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Wt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new so(this.M);for(const i of e)if(i.metadata.queries){const a=r.wi(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||sn()).add(a);t.set(l,h)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function zw(n,e,t,r){return Kw.apply(this,arguments)}(e.localStore,new so(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const i of e.queries)yield GS(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function z_(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class yI{constructor(e){this.key=e}}class vI{constructor(e){this.key=e}}class K_{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=sn(),this.mutatedKeys=sn(),this.Gu=QC(e),this.Qu=new fd(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new gI,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,S)=>{const N=i.get(D),V=v_(this.query,S)?S:null,j=!!N&&this.mutatedKeys.has(N.key),fe=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let Me=!1;N&&V?N.data.isEqual(V.data)?j!==fe&&(r.track({type:3,doc:V}),Me=!0):this.Hu(N,V)||(r.track({type:2,doc:V}),Me=!0,(_&&this.Gu(V,_)>0||w&&this.Gu(V,w)<0)&&(h=!0)):!N&&V?(r.track({type:0,doc:V}),Me=!0):N&&!V&&(r.track({type:1,doc:N}),Me=!0,(_||w)&&(h=!0)),Me&&(V?(l=l.add(V),a=fe?a.add(D):a.delete(D)):(l=l.delete(D),a=a.delete(D)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const D="F"===this.query.limitType?l.last():l.first();l=l.delete(D.key),a=a.delete(D.key),r.track({type:1,doc:D})}return{Qu:l,zu:r,ii:h,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Au();a.sort((w,D)=>function(S,N){const V=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return V(S)-V(N)}(w.type,D.type)||this.Gu(w.doc,D.doc)),this.Ju(r);const l=t?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,_=h!==this.qu;return this.qu=h,0!==a.length||_?{snapshot:new $l(this.query,e.Qu,i,a,e.mutatedKeys,0===h,_,!1),Xu:l}:{Xu:l}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new gI,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=sn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new vI(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new yI(r))}),t}ta(e){this.Uu=e._i,this.Ku=sn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return $l.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class wI{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class EI{constructor(e){this.key=e,this.na=!1}}class aA{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.sa={},this.ia=new Ml(h=>hw(h),Vh),this.ra=new Map,this.oa=new Set,this.ua=new qn(Ge.comparator),this.aa=new Map,this.ca=new ng,this.ha={},this.la=new Map,this.fa=ud.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function CI(n,e){return Z_.apply(this,arguments)}function Z_(){return Z_=(0,ye.Z)(function*(n,e){const t=_g(n);let r,i;const a=t.ia.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ea();else{const l=yield nf(t.localStore,Is(e));t.isPrimaryClient&&L_(t.remoteStore,l);const h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield c0(t,e,r,"current"===h)}return i}),Z_.apply(this,arguments)}function c0(n,e,t,r){return d0.apply(this,arguments)}function d0(){return d0=(0,ye.Z)(function*(n,e,t,r){n._a=(D,S,N)=>{return(V=(0,ye.Z)(function*(j,fe,Me,nt){let lt=fe.view.Wu(Me);lt.ii&&(lt=yield sf(j.localStore,fe.query,!1).then(({documents:Mt})=>fe.view.Wu(Mt,lt)));const ut=nt&&nt.targetChanges.get(fe.targetId),ot=fe.view.applyChanges(lt,j.isPrimaryClient,ut);return g0(j,fe.targetId,ot.Xu),ot.snapshot}),function(j,fe,Me,nt){return V.apply(this,arguments)})(n,D,S,N);var V};const i=yield sf(n.localStore,e,!0),a=new K_(e,i._i),l=a.Wu(i.documents),h=Gh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=a.applyChanges(l,n.isPrimaryClient,h);g0(n,t,_.Xu);const w=new wI(e,t,a);return n.ia.set(e,w),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),_.snapshot}),d0.apply(this,arguments)}function h0(n,e){return Ds.apply(this,arguments)}function Ds(){return Ds=(0,ye.Z)(function*(n,e){const t=Ye(n),r=t.ia.get(e),i=t.ra.get(r.targetId);if(i.length>1)return t.ra.set(r.targetId,i.filter(a=>!Vh(a,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield rf(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),ug(t.remoteStore,r.targetId),Gl(t,r.targetId)}).catch(ld))):(Gl(t,r.targetId),yield rf(t.localStore,r.targetId,!0))}),Ds.apply(this,arguments)}function bI(){return bI=(0,ye.Z)(function*(n,e,t){const r=y0(n);try{const i=yield function(a,l){const h=Ye(a),_=Wn.now(),w=l.reduce((S,N)=>S.add(N.key),sn());let D;return h.persistence.runTransaction("Locally write mutations","readwrite",S=>h.fi.Ks(S,w).next(N=>{D=N;const V=[];for(const j of l){const fe=lb(j,D.get(j.key));null!=fe&&V.push(new Xc(j.key,fe,jC(fe.value.mapValue),ir.exists(!0)))}return h.Bs.addMutationBatch(S,_,V,l)})).then(S=>(S.applyToLocalDocumentSet(D),{batchId:S.batchId,changes:D}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,h){let _=a.ha[a.currentUser.toKey()];_||(_=new qn(Pt)),_=_.insert(l,h),a.ha[a.currentUser.toKey()]=_}(r,i.batchId,t),yield Au(r,i.changes),yield cg(r.remoteStore)}catch(i){const a=fg(i,"Failed to persist write");t.reject(a)}}),bI.apply(this,arguments)}function II(n,e){return Y_.apply(this,arguments)}function Y_(){return Y_=(0,ye.Z)(function*(n,e){const t=Ye(n);try{const r=yield zb(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.aa.get(a);l&&(Tt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.na=!0:i.modifiedDocuments.size>0?Tt(l.na):i.removedDocuments.size>0&&(Tt(l.na),l.na=!1))}),yield Au(t,r,e)}catch(r){yield ld(r)}}),Y_.apply(this,arguments)}function DI(n,e,t){const r=Ye(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ia.forEach((a,l)=>{const h=l.view.Pu(e);h.snapshot&&i.push(h.snapshot)}),function(a,l){const h=Ye(a);h.onlineState=l;let _=!1;h.queries.forEach((w,D)=>{for(const S of D.listeners)S.Pu(l)&&(_=!0)}),_&&l0(h)}(r.eventManager,e),i.length&&r.sa.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function lA(n,e,t){return Q_.apply(this,arguments)}function Q_(){return Q_=(0,ye.Z)(function*(n,e,t){const r=Ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.aa.get(e),a=i&&i.key;if(a){let l=new qn(Ge.comparator);l=l.insert(a,Rn.newNoDocument(a,Dt.min()));const h=sn().add(a),_=new $h(Dt.min(),new Map,new bn(Pt),l,h);yield II(r,_),r.ua=r.ua.remove(a),r.aa.delete(e),ey(r)}else yield rf(r.localStore,e,!1).then(()=>Gl(r,e,t)).catch(ld)}),Q_.apply(this,arguments)}function cA(n,e){return TI.apply(this,arguments)}function TI(){return TI=(0,ye.Z)(function*(n,e){const t=Ye(n),r=e.batch.batchId;try{const i=yield $S(t.localStore,e);gg(t,r,null),X_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Au(t,i)}catch(i){yield ld(i)}}),TI.apply(this,arguments)}function SI(n,e,t){return J_.apply(this,arguments)}function J_(){return J_=(0,ye.Z)(function*(n,e,t){const r=Ye(n);try{const i=yield function(a,l){const h=Ye(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return h.Bs.lookupMutationBatch(_,l).next(D=>(Tt(null!==D),w=D.keys(),h.Bs.removeMutationBatch(_,D))).next(()=>h.Bs.performConsistencyCheck(_)).next(()=>h.fi.Ks(_,w))})}(r.localStore,e);gg(r,e,t),X_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Au(r,i)}catch(i){yield ld(i)}}),J_.apply(this,arguments)}function f0(){return f0=(0,ye.Z)(function*(n,e){const t=Ye(n);Tu(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=Ye(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.Bs.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.la.get(r)||[];i.push(e),t.la.set(r,i)}catch(r){const i=fg(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),f0.apply(this,arguments)}function X_(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function gg(n,e,t){const r=Ye(n);let i=r.ha[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.ha[r.currentUser.toKey()]=i}}function Gl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||p0(n,r)})}function p0(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(ug(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),ey(n))}function g0(n,e,t){for(const r of t)r instanceof yI?(n.ca.addReference(r.key,e),AI(n,r)):r instanceof vI?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||p0(n,r.key)):it()}function AI(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.oa.add(r),ey(n))}function ey(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new Ge(Wt.fromString(e)),r=n.fa.next();n.aa.set(r,new EI(t)),n.ua=n.ua.insert(t,r),L_(n.remoteStore,new Pl(Is(Zc(t.path)),r,2,os.A))}}function Au(n,e,t){return m0.apply(this,arguments)}function m0(){return m0=(0,ye.Z)(function*(n,e,t){const r=Ye(n),i=[],a=[],l=[];var h;r.ia.isEmpty()||(r.ia.forEach((h,_)=>{l.push(r._a(_,e,t).then(w=>{if(w){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w.fromCache?"not-current":"current"),i.push(w);const D=$w.Ys(_.targetId,w);a.push(D)}}))}),yield Promise.all(l),r.sa.zo(i),yield(h=(0,ye.Z)(function*(_,w){const D=Ye(_);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>he.forEach(w,N=>he.forEach(N.Hs,V=>D.persistence.referenceDelegate.addReference(S,N.targetId,V)).next(()=>he.forEach(N.Js,V=>D.persistence.referenceDelegate.removeReference(S,N.targetId,V)))))}catch(S){if(!id(S))throw S;Fe("LocalStore","Failed to update sequence numbers: "+S)}for(const S of w){const N=S.targetId;if(!S.fromCache){const V=D.ui.get(N),fe=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);D.ui=D.ui.insert(N,fe)}}}),function(_,w){return h.apply(this,arguments)})(r.localStore,a))}),m0.apply(this,arguments)}function xM(n,e){return xI.apply(this,arguments)}function xI(){return xI=(0,ye.Z)(function*(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield tg(t.localStore,e);t.currentUser=e,(i=t).la.forEach(l=>{l.forEach(h=>{h.reject(new Pe(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Au(t,r.di)}var i}),xI.apply(this,arguments)}function RI(n,e){const t=Ye(n),r=t.aa.get(e);if(r&&r.na)return sn().add(r.key);{let i=sn();const a=t.ra.get(e);if(!a)return i;for(const l of a){const h=t.ia.get(l);i=i.unionWith(h.view.ju)}return i}}function hA(n,e){return _0.apply(this,arguments)}function _0(){return _0=(0,ye.Z)(function*(n,e){const t=Ye(n),r=yield sf(t.localStore,e.query,!0),i=e.view.ta(r);return t.isPrimaryClient&&g0(t,e.targetId,i.Xu),i}),_0.apply(this,arguments)}function fA(n,e){return MI.apply(this,arguments)}function MI(){return MI=(0,ye.Z)(function*(n,e){const t=Ye(n);return qw(t.localStore,e).then(r=>Au(t,r))}),MI.apply(this,arguments)}function RM(n,e,t,r){return NI.apply(this,arguments)}function NI(){return NI=(0,ye.Z)(function*(n,e,t,r){const i=Ye(n),a=yield function(l,h){const _=Ye(l),w=Ye(_.Bs);return _.persistence.runTransaction("Lookup mutation documents","readonly",D=>w.fn(D,h).next(S=>S?_.fi.Ks(D,S):he.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield cg(i.remoteStore):"acknowledged"===t||"rejected"===t?(gg(i,e,r||null),X_(i,e),h=e,Ye(Ye(i.localStore).Bs)._n(h)):it(),yield Au(i,a)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),NI.apply(this,arguments)}function PI(){return PI=(0,ye.Z)(function*(n,e){const t=Ye(n);if(_g(t),y0(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield kI(t,r.toArray());t.da=!0,yield pI(t.remoteStore,!0);for(const a of i)L_(t.remoteStore,a)}else if(!1===e&&!1!==t.da){const r=[];let i=Promise.resolve();t.ra.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Gl(t,l),rf(t.localStore,l,!0))),ug(t.remoteStore,l)}),yield i,yield kI(t,r),function(a){const l=Ye(a);l.aa.forEach((h,_)=>{ug(l.remoteStore,_)}),l.ca.Si(),l.aa=new Map,l.ua=new qn(Ge.comparator)}(t),t.da=!1,yield pI(t.remoteStore,!1)}}),PI.apply(this,arguments)}function kI(n,e,t){return af.apply(this,arguments)}function af(){return af=(0,ye.Z)(function*(n,e,t){const r=Ye(n),i=[],a=[];for(const l of e){let h;const _=r.ra.get(l);if(_&&0!==_.length){h=yield nf(r.localStore,Is(_[0]));for(const w of _){const D=r.ia.get(w),S=yield hA(r,D);S.snapshot&&a.push(S.snapshot)}}else{const w=yield N_(r.localStore,l);h=yield nf(r.localStore,w),yield c0(r,OI(w),l,!1)}i.push(h)}return r.sa.zo(a),i}),af.apply(this,arguments)}function OI(n){return KC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function pA(n){const e=Ye(n);return Ye(Ye(e.localStore).persistence).Fs()}function FI(n,e,t,r){return xu.apply(this,arguments)}function xu(){return xu=(0,ye.Z)(function*(n,e,t,r){const i=Ye(n);if(i.da)return void Fe("SyncEngine","Ignoring unexpected query state notification.");const a=i.ra.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield qw(i.localStore,YC(a[0])),h=$h.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Au(i,l,h);break}case"rejected":yield rf(i.localStore,e,!0),Gl(i,e,r);break;default:it()}}),xu.apply(this,arguments)}function LI(n,e,t){return mg.apply(this,arguments)}function mg(){return mg=(0,ye.Z)(function*(n,e,t){const r=_g(n);if(r.da){for(const i of e){if(r.ra.has(i)){Fe("SyncEngine","Adding an already active target "+i);continue}const a=yield N_(r.localStore,i),l=yield nf(r.localStore,a);yield c0(r,OI(a),l.targetId,!1),L_(r.remoteStore,l)}for(const i of t)r.ra.has(i)&&(yield rf(r.localStore,i,!1).then(()=>{ug(r.remoteStore,i),Gl(r,i)}).catch(ld))}}),mg.apply(this,arguments)}function _g(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=II.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lA.bind(null,e),e.sa.zo=iA.bind(null,e.eventManager),e.sa.wa=AM.bind(null,e.eventManager),e}function y0(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SI.bind(null,e),e}class ty{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.M=jl(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return eg(this.persistence,new qb,e.initialUser,this.M)}ya(e){return new Xb(Yw.Yi,this.M)}ga(e){return new O_}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class yg extends ty{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield y0(r.Ta.syncEngine),yield cg(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return eg(this.persistence,new qb,e.initialUser,this.M)}pa(e){return new Kp(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=Jp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Vi.withCacheSize(this.cacheSizeBytes):Vi.DEFAULT;return new Qp(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,t0(),ig(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new O_}}class NM extends yg{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const i=r.Ta.syncEngine;r.sharedClientState instanceof Jw&&(r.sharedClientState.syncEngine={$r:RM.bind(null,i),Br:FI.bind(null,i),Lr:LI.bind(null,i),Fs:pA.bind(null,i),Fr:fA.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var a=(0,ye.Z)(function*(l){yield function MM(n,e){return PI.apply(this,arguments)}(r.Ta.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):l||r.gcScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}ga(e){const t=t0();if(!Jw.vt(t))throw new Pe(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Jp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Jw(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class VI{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>DI(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=xM.bind(null,r.syncEngine),yield pI(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new SM}createDatastore(e){const t=jl(e.databaseInfo.databaseId),r=new e0(e.databaseInfo);return new iI(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>DI(this.syncEngine,h,0),l=Xw.vt()?new Xw:new KS,new sI(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,h,_,w){const D=new aA(r,i,a,l,h,_);return w&&(D.da=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=Ye(t);Fe("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield Hl(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function gA(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class w0{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class UI{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Sr,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),i=Number(r);isNaN(i)&&e.va(`length string (${r}) is not valid number`);const a=yield e.Sa(i);return new sA(JSON.parse(a),t.length+i)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,ye.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class mA{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Pe(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ye.Z)(function*(a,l){const h=Ye(a),_=Kh(h.M)+"/documents",w={documents:l.map(V=>Vp(h.M,V))},D=yield h._o("BatchGetDocuments",_,w),S=new Map;D.forEach(V=>{const j=function hS(n,e){return"found"in e?function(t,r){Tt(!!r.found);const i=Sa(t,r.found.name),a=Hr(r.found.updateTime),l=new Oi({mapValue:{fields:r.found.fields}});return Rn.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){Tt(!!r.missing),Tt(!!r.readTime);const i=Sa(t,r.missing),a=Hr(r.readTime);return Rn.newNoDocument(i,a)}(n,e):it()}(h.M,V);S.set(j.key.toString(),j)});const N=[];return l.forEach(V=>{const j=S.get(V.toString());Tt(!!j),N.push(j)}),N}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new td(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Ge.fromPath(i);e.mutations.push(new db(a,e.precondition(a)))}),yield(r=(0,ye.Z)(function*(i,a){const l=Ye(i),h=Kh(l.M)+"/documents",_={writes:a.map(w=>I_(l.M,w))};yield l.co("Commit",h,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Pe(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ir.updateTime(t):ir.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new Pe(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ir.updateTime(t)}return ir.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class _A{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.xa=r.maxAttempts,this.No=new sg(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,ye.Z)(function*(){const t=new mA(e.datastore),r=e.ka(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Ma(a)}))}).catch(i=>{e.Ma(i)})}))}ka(e){try{const t=this.updateFunction(e);return!Mh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!vt(t)}return!1}}class yA{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ti.UNAUTHENTICATED,this.clientId=FC.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ye.Z)(function*(h){Fe("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Fe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=fg(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function BI(n,e){return ny.apply(this,arguments)}function ny(){return ny=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ye.Z)(function*(a){r.isEqual(a)||(yield tg(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),ny.apply(this,arguments)}function E0(n,e){return ry.apply(this,arguments)}function ry(){return ry=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield C0(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>o0(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>o0(e.remoteStore,a)),n.onlineComponents=e}),ry.apply(this,arguments)}function C0(n){return b0.apply(this,arguments)}function b0(){return b0=(0,ye.Z)(function*(n){return n.offlineComponents||(Fe("FirestoreClient","Using default OfflineComponentProvider"),yield BI(n,new ty)),n.offlineComponents}),b0.apply(this,arguments)}function vg(n){return wg.apply(this,arguments)}function wg(){return wg=(0,ye.Z)(function*(n){return n.onlineComponents||(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield E0(n,new VI)),n.onlineComponents}),wg.apply(this,arguments)}function vA(n){return C0(n).then(e=>e.persistence)}function iy(n){return C0(n).then(e=>e.localStore)}function sy(n){return vg(n).then(e=>e.remoteStore)}function I0(n){return vg(n).then(e=>e.syncEngine)}function uf(n){return jI.apply(this,arguments)}function jI(){return jI=(0,ye.Z)(function*(n){const e=yield vg(n),t=e.eventManager;return t.onListen=CI.bind(null,e.syncEngine),t.onUnlisten=h0.bind(null,e.syncEngine),t}),jI.apply(this,arguments)}function HI(n,e,t={}){const r=new Sr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,a,l,h,_){const w=new w0({next:S=>{a.enqueueAndForget(()=>a0(i,D));const N=S.docs.has(l);!N&&S.fromCache?_.reject(new Pe(de.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&S.fromCache&&h&&"server"===h.source?_.reject(new Pe(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),D=new pg(Zc(l.path),w,{includeMetadataChanges:!0,ku:!0});return mI(i,D)}(yield uf(n),n.asyncQueue,e,t,r)})),r.promise}function EA(n,e,t={}){const r=new Sr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,a,l,h,_){const w=new w0({next:S=>{a.enqueueAndForget(()=>a0(i,D)),S.fromCache&&"server"===h.source?_.reject(new Pe(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),D=new pg(l,w,{includeMetadataChanges:!0,ku:!0});return mI(i,D)}(yield uf(n),n.asyncQueue,e,t,r)})),r.promise}const bA=new Map;function $I(n,e,t){if(!t)throw new Pe(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function IA(n,e,t,r){if(!0===e&&!0===r)throw new Pe(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function DA(n){if(!Ge.isDocumentKey(n))throw new Pe(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function s(n){if(Ge.isDocumentKey(n))throw new Pe(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function o(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}function u(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=o(n);throw new Pe(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function c(n,e){if(e<=0)throw new Pe(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class d{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,IA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class g{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new d({}),this._settingsFrozen=!1,e instanceof Vo?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Pe(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vo(i.options.projectId)}(e))}get app(){if(!this._app)throw new Pe(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new d(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new WT;switch(t.type){case"gapi":const r=t.client;return Tt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new zT(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Pe(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=bA.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),bA.delete(e),t.terminate())}(this),Promise.resolve()}}class C{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new x(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new C(this.firestore,e,this._key)}}class b{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new b(this.firestore,e,this._query)}}class x extends b{constructor(e,t,r){super(e,t,Zc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new C(this.firestore,null,new Ge(e))}withConverter(e){return new x(this.firestore,e,this._path)}}function R(n,e,...t){if(n=(0,k.m9)(n),$I("collection","path",e),n instanceof g){const r=Wt.fromString(e,...t);return s(r),new x(n,null,r)}{if(!(n instanceof C||n instanceof x))throw new Pe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Wt.fromString(e,...t));return s(r),new x(n.firestore,null,r)}}function H(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=FC.R()),$I("doc","path",e),n instanceof g){const r=Wt.fromString(e,...t);return DA(r),new C(n,null,new Ge(r))}{if(!(n instanceof C||n instanceof x))throw new Pe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Wt.fromString(e,...t));return DA(r),new C(n.firestore,n instanceof x?n.converter:null,new Ge(r))}}function J(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof C||n instanceof x)&&(e instanceof C||e instanceof x)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function we(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof b&&e instanceof b&&n.firestore===e.firestore&&Vh(n._query,e._query)&&n.converter===e.converter}class Le{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new sg(this,"async_queue_retry"),this.Qa=()=>{const t=ig();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=ig();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=ig();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Sr;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,ye.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!id(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,Tr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const i=q_.createAndSchedule(this,e,t,r,a=>this.Ha(a));return this.La.push(i),i}ja(){this.Ua&&it()}verifyOperationInProgress(){}Ja(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function $e(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class st{constructor(){this._progressObserver={},this._taskCompletionResolver=new Sr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ze extends g{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new Le,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Wl(this),this._firestoreClient.terminate()}}function en(n){return n._firestoreClient||Wl(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Wl(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Qv(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new yA(n._authCredentials,n._appCheckCredentials,n._queue,r)}function oy(n,e,t){const r=new Sr;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield BI(n,t),yield E0(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===de.FAILED_PRECONDITION||a.code===de.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function UM(n){if(n._initialized||n._terminated)throw new Pe(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class pd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ql{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ql(rr.fromBase64String(e))}catch(t){throw new Pe(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ql(rr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Eg{constructor(e){this._methodName=e}}class WI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pt(this._lat,e._lat)||Pt(this._long,e._long)}}const TF=/^__.*__$/;class SF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Xc(e,this.data,this.fieldMask,t,this.fieldTransforms):new jo(e,this.data,t,this.fieldTransforms)}}class BM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Xc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function jM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class qI{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.tc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new qI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.rc(e),i}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.tc(),i}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return ZI(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(jM(this.ec)&&TF.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class AF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||jl(e)}lc(e,t,r,i=!1){return new qI({ec:e,methodName:t,hc:r,path:jr.emptyPath(),ic:!1,cc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Cg(n){const e=n._freezeSettings(),t=jl(n._databaseId);return new AF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function zI(n,e,t,r,i,a={}){const l=n.lc(a.merge||a.mergeFields?2:0,e,t,i);xA("Data must be an object, but it was:",l,r);const h=GM(r,l);let _,w;if(a.merge)_=new Ia(l.fieldMask),w=l.fieldTransforms;else if(a.mergeFields){const D=[];for(const S of a.mergeFields){const N=RA(e,S,t);if(!l.contains(N))throw new Pe(de.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);qM(D,N)||D.push(N)}_=new Ia(D),w=l.fieldTransforms.filter(S=>_.covers(S.field))}else _=null,w=l.fieldTransforms;return new SF(new Oi(h),_,w)}class N0 extends Eg{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof N0}}function HM(n,e,t){return new qI({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class TA extends Eg{_toFieldTransform(e){return new jh(e.path,new Uh)}isEqual(e){return e instanceof TA}}class xF extends Eg{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=HM(this,e,!0),r=this.fc.map(a=>bg(a,t)),i=new Qc(r);return new jh(e.path,i)}isEqual(e){return this===e}}class RF extends Eg{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=HM(this,e,!0),r=this.fc.map(a=>bg(a,t)),i=new Jc(r);return new jh(e.path,i)}isEqual(e){return this===e}}class MF extends Eg{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new Bh(e.M,eb(e.M,this.dc));return new jh(e.path,t)}isEqual(e){return this===e}}function SA(n,e,t,r){const i=n.lc(1,e,t);xA("Data must be an object, but it was:",i,r);const a=[],l=Oi.empty();Tl(r,(_,w)=>{const D=KI(e,_,t);w=(0,k.m9)(w);const S=i.oc(D);if(w instanceof N0)a.push(D);else{const N=bg(w,S);null!=N&&(a.push(D),l.set(D,N))}});const h=new Ia(a);return new BM(l,h,i.fieldTransforms)}function AA(n,e,t,r,i,a){const l=n.lc(1,e,t),h=[RA(e,r,t)],_=[i];if(a.length%2!=0)throw new Pe(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<a.length;N+=2)h.push(RA(e,a[N])),_.push(a[N+1]);const w=[],D=Oi.empty();for(let N=h.length-1;N>=0;--N)if(!qM(w,h[N])){const V=h[N];let j=_[N];j=(0,k.m9)(j);const fe=l.oc(V);if(j instanceof N0)w.push(V);else{const Me=bg(j,fe);null!=Me&&(w.push(V),D.set(V,Me))}}const S=new Ia(w);return new BM(D,S,l.fieldTransforms)}function $M(n,e,t,r=!1){return bg(t,n.lc(r?4:3,e))}function bg(n,e){if(WM(n=(0,k.m9)(n)))return xA("Unsupported field value:",e,n),GM(n,e);if(n instanceof Eg)return function(t,r){if(!jM(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let h=bg(l,r.uc(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return eb(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Wn.fromDate(t);return{timestampValue:qh(r.M,i)}}if(t instanceof Wn){const i=new Wn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:qh(r.M,i)}}if(t instanceof WI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ql)return{bytesValue:mw(r.M,t._byteString)};if(t instanceof C){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ac(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:nd(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${o(t)}`)}(n,e)}function GM(n,e){const t={};return c_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Tl(n,(r,i)=>{const a=bg(i,e.sc(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function WM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Wn||n instanceof WI||n instanceof ql||n instanceof C||n instanceof Eg)}function xA(n,e,t){if(!WM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=o(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function RA(n,e,t){if((e=(0,k.m9)(e))instanceof pd)return e._internalPath;if("string"==typeof e)return KI(n,e);throw ZI("Field path arguments must be of type string or ",n,!1,void 0,t)}const NF=new RegExp("[~\\*/\\[\\]]");function KI(n,e,t){if(e.search(NF)>=0)throw ZI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new pd(...e.split("."))._internalPath}catch(r){throw ZI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ZI(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let _="";return(a||l)&&(_+=" (found",a&&(_+=` in field ${r}`),l&&(_+=` in document ${i}`),_+=")"),new Pe(de.INVALID_ARGUMENT,h+n+_)}function qM(n,e){return n.some(t=>t.isEqual(e))}class P0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new C(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new PF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(YI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class PF extends P0{data(){return super.data()}}function YI(n,e){return"string"==typeof e?KI(n,e):e instanceof pd?e._internalPath:e._delegate._internalPath}class Ig{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gd extends P0{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new k0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(YI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class k0 extends gd{data(e={}){return super.data(e)}}class lf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ig(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new k0(this._firestore,this._userDataWriter,r.key,r,new Ig(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new k0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Ig(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new k0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Ig(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==l.type&&(_=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),w=a.indexOf(l.doc.key)),{type:kF(l.type),doc:h,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function kF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function zM(n,e){return n instanceof gd&&e instanceof gd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof lf&&e instanceof lf&&n._firestore===e._firestore&&we(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function KM(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Pe(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class O0{}function cf(n,...e){for(const t of e)n=t._apply(n);return n}class OF extends O0{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=Cg(e.firestore),r=function(i,a,l,h,_,w,D){let S;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Pe(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){eN(D,w);const V=[];for(const j of D)V.push(XM(h,i,j));S={arrayValue:{values:V}}}else S=XM(h,i,D)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||eN(D,w),S=$M(l,"where",D,"in"===w||"not-in"===w);const N=yn.create(_,w,S);return function(V,j){if(j.S()){const Me=kp(V);if(null!==Me&&!Me.isEqual(j.field))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Me.toString()}' and '${j.field.toString()}'`);const nt=Pp(V);null!==nt&&tN(0,j.field,nt)}const fe=function(Me,nt){for(const lt of Me.filters)if(nt.indexOf(lt.op)>=0)return lt.op;return null}(V,function(Me){switch(Me){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(j.op));if(null!==fe)throw new Pe(de.INVALID_ARGUMENT,fe===j.op?`Invalid query. You cannot use more than one '${j.op.toString()}' filter.`:`Invalid query. You cannot use '${j.op.toString()}' filters with '${fe.toString()}' filters.`)}(i,N),N}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new b(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new io(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class LF extends O0{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Pe(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Pe(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Kc(i,a);return function(h,_){if(null===Pp(h)){const w=kp(h);null!==w&&tN(0,w,_.field)}}(r,l),l}(e._query,this._c,this.gc);return new b(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new io(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class ZM extends O0{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new b(e.firestore,e.converter,dw(e._query,this.yc,this.Ic))}}class YM extends O0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=JM(e,this.type,this.Tc,this.Ec);return new b(e.firestore,e.converter,(i=t,new io((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class QM extends O0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=JM(e,this.type,this.Tc,this.Ec);return new b(e.firestore,e.converter,(i=t,new io((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function JM(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof P0)return function(i,a,l,h,_){if(!h)throw new Pe(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const w=[];for(const D of Yc(i))if(D.field.isKeyField())w.push(zc(a,h.key));else{const S=h.data.field(D.field);if(Tp(S))throw new Pe(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const N=D.field.canonicalString();throw new Pe(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}w.push(S)}return new Rl(w,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Cg(n.firestore);return function(a,l,h,_,w,D){const S=a.explicitOrderBy;if(w.length>S.length)throw new Pe(de.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let V=0;V<w.length;V++){const j=w[V];if(S[V].field.isKeyField()){if("string"!=typeof j)throw new Pe(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof j}`);if(!__(a)&&-1!==j.indexOf("/"))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${j}' contains a slash.`);const fe=a.path.child(Wt.fromString(j));if(!Ge.isDocumentKey(fe))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${fe}' is not because it contains an odd number of segments.`);const Me=new Ge(fe);N.push(zc(l,Me))}else{const fe=$M(h,_,j);N.push(fe)}}return new Rl(N,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function XM(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new Pe(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!__(e)&&-1!==t.indexOf("/"))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Wt.fromString(t));if(!Ge.isDocumentKey(r))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zc(n,new Ge(r))}if(t instanceof C)return zc(n,t._key);throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${o(t)}.`)}function eN(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Pe(de.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function tN(n,e,t){if(!t.isEqual(e))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const WF={maxAttempts:5};class MA{convertValue(e,t="none"){switch(Al(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Da(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw it()}}convertObject(e,t){const r={};return Tl(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new WI(xn(e.latitude),xn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=YT(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Sp(e));default:return null}}convertTimestamp(e){const t=Sl(e);return new Wn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Wt.fromString(e);Tt(Cw(r));const i=new Vo(r.get(1),r.get(3)),a=new Ge(r.popFirst(5));return i.isEqual(t)||Tr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function QI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class qF extends MA{constructor(e){super(),this.firestore=e}convertBytes(e){return new ql(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new C(this.firestore,null,t)}}class nN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Cg(e)}set(e,t,r){this._verifyNotCommitted();const i=df(e,this._firestore),a=QI(i.converter,t,r),l=zI(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,ir.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=df(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof pd?AA(this._dataReader,"WriteBatch.update",a._key,t,r,i):SA(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,ir.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=df(e,this._firestore);return this._mutations=this._mutations.concat(new td(t._key,ir.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function df(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new Pe(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Dg extends MA{constructor(e){super(),this.firestore=e}convertBytes(e){return new ql(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new C(this.firestore,null,t)}}function rN(n,e,t){n=u(n,C);const r=u(n.firestore,ze),i=QI(n.converter,e,t);return ay(r,[zI(Cg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ir.none())])}function iN(n,e,t,...r){n=u(n,C);const i=u(n.firestore,ze),a=Cg(i);let l;return l="string"==typeof(e=(0,k.m9)(e))||e instanceof pd?AA(a,"updateDoc",n._key,e,t,r):SA(a,"updateDoc",n._key,e),ay(i,[l.toMutation(n._key,ir.exists(!0))])}function sN(n,...e){var t,r,i;n=(0,k.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||$e(e[l])||(a=e[l],l++);const h={includeMetadataChanges:a.includeMetadataChanges};if($e(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let _,w,D;if(n instanceof C)w=u(n.firestore,ze),D=Zc(n._key.path),_={next:S=>{e[l]&&e[l](NA(w,n,S))},error:e[l+1],complete:e[l+2]};else{const S=u(n,b);w=u(S.firestore,ze),D=S._query;const N=new Dg(w);_={next:V=>{e[l]&&e[l](new lf(w,N,S,V))},error:e[l+1],complete:e[l+2]},KM(n._query)}return function(S,N,V,j){const fe=new w0(j),Me=new pg(N,fe,V);return S.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return mI(yield uf(S),Me)})),()=>{fe.Aa(),S.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return a0(yield uf(S),Me)}))}}(en(w),D,h,_)}function ay(n,e){return function(t,r){const i=new Sr;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function uA(n,e,t){return bI.apply(this,arguments)}(yield I0(t),r,i)})),i.promise}(en(n),e)}function NA(n,e,t){const r=t.docs.get(e._key),i=new Dg(n);return new gd(n,i,e._key,r,new Ig(t.hasPendingWrites,t.fromCache),e.converter)}class nL extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Cg(e)}get(e){const t=df(e,this._firestore),r=new qF(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return it();const a=i[0];if(a.isFoundDocument())return new P0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new P0(this._firestore,r,t._key,null,t.converter);throw it()})}set(e,t,r){const i=df(e,this._firestore),a=QI(i.converter,t,r),l=zI(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=df(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof pd?AA(this._dataReader,"Transaction.update",a._key,t,r,i):SA(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=df(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=df(e,this._firestore),r=new Dg(this._firestore);return super.get(e).then(i=>new gd(this._firestore,r,t._key,i._document,new Ig(!1,!1),t.converter))}}function PA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function aN(){if("undefined"==typeof Uint8Array)throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function uN(){if(!function VC(){return"undefined"!=typeof atob}())throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Wc=Ri.SDK_VERSION,(0,Ri._registerComponent)(new Xs.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new ze(i,new qT(t.getProvider("auth-internal")),new l_(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,Ri.registerVersion)(kC,"3.4.9",n),(0,Ri.registerVersion)(kC,"3.4.9","esm2017")}();class F0{constructor(e){this._delegate=e}static fromBase64String(e){return uN(),new F0(ql.fromBase64String(e))}static fromUint8Array(e){return aN(),new F0(ql.fromUint8Array(e))}toBase64(){return uN(),this._delegate.toBase64()}toUint8Array(){return aN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function kA(n){return function dL(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class hL{enableIndexedDbPersistence(e,t){return function D0(n,e){UM(n=u(n,ze));const t=en(n),r=n._freezeSettings(),i=new VI;return oy(t,i,new yg(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function T0(n){UM(n=u(n,ze));const e=en(n),t=n._freezeSettings(),r=new VI;return oy(e,r,new NM(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function S0(n){if(n._initialized&&!n._terminated)throw new Pe(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Sr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!Ho.vt())return Promise.resolve();const i=r+"main";yield Ho.delete(i)}),function(r){return t.apply(this,arguments)})(Jp(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class lN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Vo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ip("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function v(n,e,t,r={}){var i;const a=(n=u(n,g))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Ip("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,h;if("string"==typeof r.mockUserToken)l=r.mockUserToken,h=ti.MOCK_USER;else{l=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Pe(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new ti(_)}n._authCredentials=new xh(new GT(l,h))}}(this._delegate,e,t,r)}enableNetwork(){return function x0(n){return function PM(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield vA(n),t=yield sy(n);return e.setNetworkEnabled(!0),function(r){const i=Ye(r);return i.wu.delete(0),og(i)}(t)}))}(en(n=u(n,ze)))}(this._delegate)}disableNetwork(){return function R0(n){return function kM(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield vA(n),t=yield sy(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(i){const a=Ye(i);a.wu.add(0),yield Hl(a),a.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(en(n=u(n,ze)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,IA("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function A0(n){return function(e){const t=new Sr;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function dA(n,e){return f0.apply(this,arguments)}(yield I0(e),t)})),t.promise}(en(n=u(n,ze)))}(this._delegate)}onSnapshotsInSync(e){return function tL(n,e){return function FM(n,e){const t=new w0(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield uf(n),i=t,Ye(r).bu.add(i),void i.next();var r,i})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield uf(n),i=t,void Ye(r).bu.delete(i);var r,i}))}}(en(n=u(n,ze)),$e(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new uy(this,R(this._delegate,e))}catch(t){throw Ts(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ra(this,H(this._delegate,e))}catch(t){throw Ts(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ss(this,function L(n,e){if(n=u(n,g),$I("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new b(n,null,(t=e,new io(Wt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ts(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function rL(n,e,t){n=u(n,ze);const r=Object.assign(Object.assign({},WF),t);return function(i){if(i.maxAttempts<1)throw new Pe(de.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function LM(n,e,t){const r=new Sr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const i=yield(a=n,vg(a).then(l=>l.datastore));var a;new _A(n.asyncQueue,i,t,e,r).run()})),r.promise}(en(n),i=>e(new nL(n,i)),r)}(this._delegate,t=>e(new cN(this,t)))}batch(){return en(this._delegate),new dN(new nN(this._delegate,e=>ay(this._delegate,e)))}loadBundle(e){return function M0(n,e){const t=en(n=u(n,ze)),r=new st;return function VM(n,e,t,r){const i=function(a,l){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,w){if(_ instanceof Uint8Array)return gA(_,w);if(_ instanceof ArrayBuffer)return gA(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new UI(_,l);var _}(t,jl(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function v0(n,e,t){const r=Ye(n);var i;(i=(0,ye.Z)(function*(a,l,h){try{const _=yield l.getMetadata();if(yield function(N,V){const j=Ye(N),fe=Hr(V.createTime);return j.persistence.runTransaction("hasNewerBundle","readonly",Me=>j._s.getBundleMetadata(Me,V.id)).then(Me=>!!Me&&Me.createTime.compareTo(fe)>=0)}(a.localStore,_))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(N=_).totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}),Promise.resolve(new Set);h._updateProgress(z_(_));const w=new oA(_,a.localStore,l.M);let D=yield l.ma();for(;D;){const N=yield w.Fu(D);N&&h._updateProgress(N),D=yield l.ma()}const S=yield w.complete();return yield Au(a,S.Lu,void 0),yield function(N,V){const j=Ye(N);return j.persistence.runTransaction("Save bundle","readwrite",fe=>j._s.saveBundleMetadata(fe,V))}(a.localStore,_),h._completeWith(S.progress),Promise.resolve(S.Bu)}catch(_){return Ip("SyncEngine",`Loading bundle failed with ${_}`),h._failWith(_),Promise.resolve(new Set)}var N}),function(a,l,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield I0(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function DF(n,e){return function CA(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const i=Ye(t);return i.persistence.runTransaction("Get named query","readonly",a=>i._s.getNamedQuery(a,r))}(yield iy(n),e)}))}(en(n=u(n,ze)),e).then(t=>t?new b(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ss(this,t):null)}}class JI extends MA{constructor(e){super(),this.firestore=e}convertBytes(e){return new F0(new ql(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ra.forKey(t,this.firestore,null)}}class cN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new JI(e)}get(e){const t=Sg(e);return this._delegate.get(t).then(r=>new L0(this._firestore,new gd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Sg(e);return r?(PA("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Sg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Sg(e);return this._delegate.delete(t),this}}class dN{constructor(e){this._delegate=e}set(e,t,r){const i=Sg(e);return r?(PA("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Sg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Sg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Tg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new k0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new V0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Tg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Tg(e,new JI(e),t),i.set(t,a)),a}}Tg.INSTANCES=new WeakMap;class Ra{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new JI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ra(t,new C(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new Ra(t,new C(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new uy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new uy(this.firestore,R(this._delegate,e))}catch(t){throw Ts(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof C&&J(this._delegate,e)}set(e,t){t=PA("DocumentReference.set",t);try{return t?rN(this._delegate,e,t):rN(this._delegate,e)}catch(r){throw Ts(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?iN(this._delegate,e):iN(this._delegate,e,t,...r)}catch(i){throw Ts(i,"updateDoc()","DocumentReference.update()")}}delete(){return function XF(n){return ay(u(n.firestore,ze),[new td(n._key,ir.none())])}(this._delegate)}onSnapshot(...e){const t=hN(e),r=fN(e,i=>new L0(this.firestore,new gd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return sN(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function KF(n){n=u(n,C);const e=u(n.firestore,ze),t=en(e),r=new Dg(e);return function wA(n,e){const t=new Sr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,a,l){try{const h=yield function(_,w){const D=Ye(_);return D.persistence.runTransaction("read document","readonly",S=>D.fi.Ls(S,w))}(i,a);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Pe(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const _=fg(h,`Failed to get document '${a} from cache`);l.reject(_)}}),function(i,a,l){return r.apply(this,arguments)})(yield iy(n),e,t);var r})),t.promise}(t,n._key).then(i=>new gd(e,r,n._key,i,new Ig(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function ZF(n){n=u(n,C);const e=u(n.firestore,ze);return HI(en(e),n._key,{source:"server"}).then(t=>NA(e,n,t))}(this._delegate):function zF(n){n=u(n,C);const e=u(n.firestore,ze);return HI(en(e),n._key).then(t=>NA(e,n,t))}(this._delegate),t.then(r=>new L0(this.firestore,new gd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ra(this.firestore,this._delegate.withConverter(e?Tg.getInstance(this.firestore,e):null))}}function Ts(n,e,t){return n.message=n.message.replace(e,t),n}function hN(n){for(const e of n)if("object"==typeof e&&!kA(e))return e;return{}}function fN(n,e){var t,r;let i;return i=kA(n[0])?n[0]:kA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class L0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ra(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return zM(this._delegate,e._delegate)}}class V0 extends L0{data(e){const t=this._delegate.data(e);return function yM(n,e){n||it()}(void 0!==t),t}}class Ss{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new JI(e)}where(e,t,r){try{return new Ss(this.firestore,cf(this._delegate,function FF(n,e,t){const r=e,i=YI("where",n);return new OF(i,r,t)}(e,t,r)))}catch(i){throw Ts(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ss(this.firestore,cf(this._delegate,function VF(n,e="asc"){const t=e,r=YI("orderBy",n);return new LF(r,t)}(e,t)))}catch(r){throw Ts(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ss(this.firestore,cf(this._delegate,function UF(n){return c("limit",n),new ZM("limit",n,"F")}(e)))}catch(t){throw Ts(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ss(this.firestore,cf(this._delegate,function BF(n){return c("limitToLast",n),new ZM("limitToLast",n,"L")}(e)))}catch(t){throw Ts(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ss(this.firestore,cf(this._delegate,function jF(...n){return new YM("startAt",n,!0)}(...e)))}catch(t){throw Ts(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ss(this.firestore,cf(this._delegate,function HF(...n){return new YM("startAfter",n,!1)}(...e)))}catch(t){throw Ts(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ss(this.firestore,cf(this._delegate,function $F(...n){return new QM("endBefore",n,!1)}(...e)))}catch(t){throw Ts(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ss(this.firestore,cf(this._delegate,function GF(...n){return new QM("endAt",n,!0)}(...e)))}catch(t){throw Ts(t,"endAt()","Query.endAt()")}}isEqual(e){return we(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function QF(n){n=u(n,b);const e=u(n.firestore,ze),t=en(e),r=new Dg(e);return function OM(n,e){const t=new Sr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,a,l){try{const h=yield sf(i,a,!0),_=new K_(a,h._i),w=_.Wu(h.documents),D=_.applyChanges(w,!1);l.resolve(D.snapshot)}catch(h){const _=fg(h,`Failed to execute query '${a} against cache`);l.reject(_)}}),function(i,a,l){return r.apply(this,arguments)})(yield iy(n),e,t);var r})),t.promise}(t,n._query).then(i=>new lf(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function JF(n){n=u(n,b);const e=u(n.firestore,ze),t=en(e),r=new Dg(e);return EA(t,n._query,{source:"server"}).then(i=>new lf(e,r,n,i))}(this._delegate):function YF(n){n=u(n,b);const e=u(n.firestore,ze),t=en(e),r=new Dg(e);return KM(n._query),EA(t,n._query).then(i=>new lf(e,r,n,i))}(this._delegate),t.then(r=>new OA(this.firestore,new lf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=hN(e),r=fN(e,i=>new OA(this.firestore,new lf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return sN(this._delegate,t,r)}withConverter(e){return new Ss(this.firestore,this._delegate.withConverter(e?Tg.getInstance(this.firestore,e):null))}}class pL{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new V0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class OA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ss(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new V0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new pL(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new V0(this._firestore,r))})}isEqual(e){return zM(this._delegate,e._delegate)}}class uy extends Ss{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ra(this.firestore,e):null}doc(e){try{return new Ra(this.firestore,void 0===e?H(this._delegate):H(this._delegate,e))}catch(t){throw Ts(t,"doc()","CollectionReference.doc()")}}add(e){return function eL(n,e){const t=u(n.firestore,ze),r=H(n),i=QI(n.converter,e);return ay(t,[zI(Cg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ir.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ra(this.firestore,t))}isEqual(e){return J(this._delegate,e._delegate)}withConverter(e){return new uy(this.firestore,this._delegate.withConverter(e?Tg.getInstance(this.firestore,e):null))}}function Sg(n){return u(n,C)}class FA{constructor(...e){this._delegate=new pd(...e)}static documentId(){return new FA(jr.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof pd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ag{constructor(e){this._delegate=e}static serverTimestamp(){const e=function sL(){return new TA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ag(e)}static delete(){const e=function iL(){return new N0("deleteField")}();return e._methodName="FieldValue.delete",new Ag(e)}static arrayUnion(...e){const t=function oL(...n){return new xF("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ag(t)}static arrayRemove(...e){const t=function aL(...n){return new RF("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ag(t)}static increment(e){const t=function uL(n){return new MF("increment",n)}(e);return t._methodName="FieldValue.increment",new Ag(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const gL={Firestore:lN,GeoPoint:WI,Timestamp:Wn,Blob:F0,Transaction:cN,WriteBatch:dN,DocumentReference:Ra,DocumentSnapshot:L0,Query:Ss,QueryDocumentSnapshot:V0,QuerySnapshot:OA,CollectionReference:uy,FieldPath:FA,FieldValue:Ag,setLogLevel:function fL(n){!function $T(n){Dl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function _L(n){(function mL(n,e){n.INTERNAL.registerComponent(new Xs.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},gL)))})(n,(e,t)=>new lN(e,t,new hL)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(km.Z);var LA=O(6451),XI=O(5363),yL=O(6063);class vL extends ci.x{constructor(e=1/0,t=1/0,r=yL.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let h=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)h=_;h&&r.splice(0,h+1)}}}var pN=O(3099);function gN(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,pN.B)({connector:()=>new vL(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function mN(n,e){return(0,el.m)(e)?En(()=>n,e):En(()=>n)}var VA=O(9468);O(5867);const yN=new Map,IL={activated:!1,tokenObservers:[]},DL={initialized:!1,enabled:!1};function bi(n){return yN.get(n)||IL}function Ru(n,e){yN.set(n,e)}function tD(){return DL}class RL{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function ML(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const As=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function wN(n){if(!bi(n).activated)throw As.create("use-before-activation",{appName:n.name})}function HA(n,e){return $A.apply(this,arguments)}function $A(){return $A=(0,ye.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,h;try{l=yield fetch(n,a)}catch(S){throw As.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==l.status)throw As.create("fetch-status-error",{httpStatus:l.status});try{h=yield l.json()}catch(S){throw As.create("fetch-parse-error",{originalErrorMessage:S.message})}const _=h.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw As.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const w=1e3*Number(_[1]),D=Date.now();return{token:h.token,expireTimeMillis:D+w,issuedAtTimeMillis:D}}),$A.apply(this,arguments)}function FL(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const U0="firebase-app-check-store";let iD=null;function CN(){return iD||(iD=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(As.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(U0,{keyPath:"compositeKey"})}}catch(t){e(As.create("storage-open",{originalErrorMessage:t.message}))}}),iD)}function GA(){return GA=(0,ye.Z)(function*(n,e){const r=(yield CN()).transaction(U0,"readwrite"),a=r.objectStore(U0).put({compositeKey:n,value:e});return new Promise((l,h)=>{a.onsuccess=_=>{l()},r.onerror=_=>{var w;h(As.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})}),GA.apply(this,arguments)}const B0=new Oo.Yd("@firebase/app-check");function TN(n,e){return(0,k.hl)()?function BL(n,e){return function bN(n,e){return GA.apply(this,arguments)}(function DN(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{B0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function SN(){return tD().enabled}function AN(){return KA.apply(this,arguments)}function KA(){return KA=(0,ye.Z)(function*(){const n=tD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),KA.apply(this,arguments)}const qL={error:"UNKNOWN_ERROR"};function zL(n){return k.US.encodeString(JSON.stringify(n),!1)}function sD(n){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,ye.Z)(function*(n,e=!1){const t=n.app;wN(t);const r=bi(t);let a,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&oD(_)&&(i=_)}if(!e&&i&&oD(i))return{token:i.token};let h,l=!1;if(SN()){r.exchangeTokenPromise||(r.exchangeTokenPromise=HA(FL(t,yield AN()),n.heartbeatServiceProvider).then(w=>(r.exchangeTokenPromise=void 0,w)),l=!0);const _=yield r.exchangeTokenPromise;return yield TN(t,_),Ru(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),l=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?B0.warn(_.message):B0.error(_),a=_}return i?(h={token:i.token},Ru(t,Object.assign(Object.assign({},r),{token:i})),yield TN(t,i)):h=ZL(a),l&&RN(t,h),h}),ZA.apply(this,arguments)}function QA(n,e){const t=bi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ru(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function xN(n){const{app:e}=n,t=bi(e);let r=t.tokenRefresher;r||(r=function KL(n){const{app:e}=n;return new RL((0,ye.Z)(function*(){let r;if(r=bi(e).token?yield sD(n,!0):yield sD(n),r.error)throw r.error}),()=>!0,()=>{const t=bi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ru(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function RN(n,e){const t=bi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function oD(n){return n.expireTimeMillis-Date.now()>0}function ZL(n){return{token:zL(qL),error:n}}class YL{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=bi(this.app);for(const t of e)QA(this.app,t.next);return Promise.resolve()}}const VN="app-check-internal";!function cV(){(0,Ri._registerComponent)(new Xs.wA("app-check",n=>function QL(n,e){return new YL(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(VN).initialize()})),(0,Ri._registerComponent)(new Xs.wA(VN,n=>function JL(n){return{getToken:e=>sD(n,e),addTokenListener:e=>function YA(n,e,t,r){const{app:i}=n,a=bi(i),l={next:t,error:r,type:e};if(Ru(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,l]})),a.token&&oD(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),xN(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>xN(n))}(n,"INTERNAL",e),removeTokenListener:e=>QA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ri.registerVersion)("@firebase/app-check","0.5.8")}();class j0{constructor(){return(0,Xt.vb)("app-check")}}"undefined"!=typeof window&&window;var uD=O(127);const nx=new p.OlP("angularfire2.auth.use-emulator"),rx=new p.OlP("angularfire2.auth.settings"),ix=new p.OlP("angularfire2.auth.tenant-id"),sx=new p.OlP("angularfire2.auth.langugage-code"),ox=new p.OlP("angularfire2.auth.use-device-language"),ax=new p.OlP("angularfire.auth.persistence"),ux=(n,e,t,r,i,a,l,h)=>(0,fr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),l)for(const[w,D]of Object.entries(l))_.settings[w]=D;return h&&_.setPersistence(h),_},[t,r,i,a,l,h]);let H0=(()=>{class n{constructor(t,r,i,a,l,h,_,w,D,S,N,V){const j=new ci.x,fe=tt(void 0).pipe((0,XI.Q)(l.outsideAngular),En(()=>a.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,7092)))),(0,_t.U)(()=>(0,fr.on)(t,a,r)),(0,_t.U)(Me=>ux(Me,a,h,w,D,S,_,N)),gN({bufferSize:1,refCount:!1}));if(Yo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=tt(null);else{fe.pipe(ha()).subscribe();const nt=fe.pipe(En(ot=>ot.getRedirectResult().then(Mt=>Mt,()=>null)),Xt.iC,gN({bufferSize:1,refCount:!1})),lt=fe.pipe(En(ot=>new wn.y(Mt=>({unsubscribe:a.runOutsideAngular(()=>ot.onAuthStateChanged(Kt=>Mt.next(Kt),Kt=>Mt.error(Kt),()=>Mt.complete()))})))),ut=fe.pipe(En(ot=>new wn.y(Mt=>({unsubscribe:a.runOutsideAngular(()=>ot.onIdTokenChanged(Kt=>Mt.next(Kt),Kt=>Mt.error(Kt),()=>Mt.complete()))}))));this.authState=nt.pipe(mN(lt),(0,VA.R)(l.outsideAngular),(0,XI.Q)(l.insideAngular)),this.user=nt.pipe(mN(ut),(0,VA.R)(l.outsideAngular),(0,XI.Q)(l.insideAngular)),this.idToken=this.user.pipe(En(ot=>ot?(0,un.D)(ot.getIdToken()):tt(null))),this.idTokenResult=this.user.pipe(En(ot=>ot?(0,un.D)(ot.getIdTokenResult()):tt(null))),this.credential=(0,LA.T)(nt,j,this.authState.pipe(Qr(ot=>!ot))).pipe((0,_t.U)(ot=>(null==ot?void 0:ot.user)?ot:null),(0,VA.R)(l.outsideAngular),(0,XI.Q)(l.insideAngular))}return(0,fr.pX)(this,fe,a,{spy:{apply:(Me,nt,lt)=>{(Me.startsWith("signIn")||Me.startsWith("createUser"))&&lt.then(ut=>j.next(ut))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(fr.Dh),p.LFG(fr.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Xt.HU),p.LFG(nx,8),p.LFG(rx,8),p.LFG(ix,8),p.LFG(sx,8),p.LFG(ox,8),p.LFG(ax,8),p.LFG(j0,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),mV=(()=>{class n{constructor(){uD.Z.registerVersion("angularfire",Xt.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[H0]}),n})();function BN(n,e){return function _V(n,e=Pm.z){return new wn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function lx(n,e){return BN(n,e).pipe((0,_t.U)(t=>({payload:t,type:"query"})))}function lD(n,e){return lx(n,e).pipe(ts(void 0),sv(),(0,_t.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const _=i.find(D=>D.doc.ref.isEqual(l.ref)),w=null==t?void 0:t.payload.docs.find(D=>D.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),a}))}function jN(n,e,t){return lD(n,t).pipe(fi((r,i)=>function vV(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function wV(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return cx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return cx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return cx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),ov(),(0,_t.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function cx(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function HN(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class $N{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=lD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,_t.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ts(void 0),sv(),Qr(([r,i])=>i.length>0||!r),(0,_t.U)(([r,i])=>i),Xt.iC)}auditTrail(e){return this.stateChanges(e).pipe(fi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=HN(e);return jN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Xt.iC)}valueChanges(e={}){return lx(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Xt.iC)}get(e){return(0,un.D)(this.query.get(e)).pipe(Xt.iC)}add(e){return this.ref.add(e)}doc(e){return new GN(this.ref.doc(e),this.afs)}}class GN{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=zN(r,t);return new $N(i,a,this.afs)}snapshotChanges(){return function yV(n,e){return BN(n,e).pipe(ts(void 0),sv(),(0,_t.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Xt.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,_t.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,un.D)(this.ref.get(e)).pipe(Xt.iC)}}class EV{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?lD(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Qr(t=>t.length>0),Xt.iC):lD(this.query,this.afs.schedulers.outsideAngular).pipe(Xt.iC)}auditTrail(e){return this.stateChanges(e).pipe(fi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=HN(e);return jN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Xt.iC)}valueChanges(e={}){return lx(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Xt.iC)}get(e){return(0,un.D)(this.query.get(e)).pipe(Xt.iC)}}const WN=new p.OlP("angularfire2.enableFirestorePersistence"),qN=new p.OlP("angularfire2.firestore.persistenceSettings"),CV=new p.OlP("angularfire2.firestore.settings"),bV=new p.OlP("angularfire2.firestore.use-emulator");function zN(n,e=(t=>t)){return{query:e(n),ref:n}}let KN=(()=>{class n{constructor(t,r,i,a,l,h,_,w,D,S,N,V,j,fe,Me,nt,lt){this.schedulers=_;const ut=(0,fr.on)(t,h,r),ot=D;S&&ux(ut,h,N,j,fe,Me,V,nt),[this.firestore,this.persistenceEnabled$]=(0,fr.cc)(`${ut.name}.firestore`,"AngularFirestore",ut.name,()=>{const Mt=h.runOutsideAngular(()=>ut.firestore());if(a&&Mt.settings(a),ot&&Mt.useEmulator(...ot),i&&!Yo(l)){const Kt=()=>{try{return(0,un.D)(Mt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Gr){return"undefined"!=typeof console&&console.warn(Gr),tt(!1)}};return[Mt,h.runOutsideAngular(Kt)]}return[Mt,tt(!1)]},[a,ot,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=zN(i,r),h=this.schedulers.ngZone.run(()=>a);return new $N(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new EV(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new GN(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(fr.Dh),p.LFG(fr.xv,8),p.LFG(WN,8),p.LFG(CV,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Xt.HU),p.LFG(qN,8),p.LFG(bV,8),p.LFG(H0,8),p.LFG(nx,8),p.LFG(rx,8),p.LFG(ix,8),p.LFG(sx,8),p.LFG(ox,8),p.LFG(ax,8),p.LFG(j0,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),IV=(()=>{class n{constructor(){uD.Z.registerVersion("angularfire",Xt.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:WN,useValue:!0},{provide:qN,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[KN]}),n})(),xg=(()=>{class n{constructor(t,r,i,a){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=a,this.afAuth.authState.subscribe(l=>{l?(this.userData=l,localStorage.setItem("user",JSON.stringify(this.userData))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){var i=this;return(0,ye.Z)(function*(){try{const a=yield i.afAuth.signInWithEmailAndPassword(t,r);i.ngZone.run(()=>{i.router.navigate(["home"])}),i.SetUserData(a.user)}catch(a){window.alert(a)}})()}SignUp(t,r){var i=this;return(0,ye.Z)(function*(){try{const a=yield i.afAuth.createUserWithEmailAndPassword(t,r);i.SendVerificationMail(),i.SetUserData(a.user)}catch(a){window.alert(a)}})()}SendVerificationMail(){var t=this;return(0,ye.Z)(function*(){return t.afAuth.currentUser.then(r=>r.sendEmailVerification()).then(()=>{t.router.navigate(["verify"])})})()}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}AuthLogin(t){var r=this;return(0,ye.Z)(function*(){return r.afAuth.signInWithPopup(t).then(i=>{r.ngZone.run(()=>{r.router.navigate(["home"])}),r.SetUserData(i.user)}).catch(i=>{window.alert(i)})})()}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({displayName:t.displayName,email:t.email,phoneNumber:t.phoneNumber},{merge:!0})}SignOut(){var t=this;return(0,ye.Z)(function*(){return t.afAuth.signOut().then(()=>{localStorage.removeItem("user"),t.router.navigate(["signin"])})})()}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(KN),p.LFG(H0),p.LFG(Dr),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class ZN{}class YN{}class md{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(l):this.headers.set(a,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof md?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new md;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof md?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let l=this.headers.get(t);if(!l)return;l=l.filter(h=>-1===a.indexOf(h)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class DV{encodeKey(e){return QN(e)}encodeValue(e){return QN(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const SV=/%(\d[a-f0-9])/gi,AV={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function QN(n){return encodeURIComponent(n).replace(SV,(e,t)=>{var r;return null!==(r=AV[t])&&void 0!==r?r:e})}function JN(n){return`${n}`}class hf{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new DV,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function TV(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[l,h]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],_=t.get(l)||[];_.push(h),t.set(l,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new hf({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(JN(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(JN(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class xV{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function XN(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function eP(n){return"undefined"!=typeof Blob&&n instanceof Blob}function tP(n){return"undefined"!=typeof FormData&&n instanceof FormData}class $0{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function RV(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new md),this.context||(this.context=new xV),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+l}}else this.params=new hf,this.urlWithParams=t}serializeBody(){return null===this.body?null:XN(this.body)||eP(this.body)||tP(this.body)||function MV(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof hf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||tP(this.body)?null:eP(this.body)?this.body.type||null:XN(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof hf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,a=e.responseType||this.responseType,l=void 0!==e.body?e.body:this.body,h=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,_=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let w=e.headers||this.headers,D=e.params||this.params;const S=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(w=Object.keys(e.setHeaders).reduce((N,V)=>N.set(V,e.setHeaders[V]),w)),e.setParams&&(D=Object.keys(e.setParams).reduce((N,V)=>N.set(V,e.setParams[V]),D)),new $0(r,i,l,{params:D,headers:w,context:S,reportProgress:_,responseType:a,withCredentials:h})}}var $r=(()=>(($r=$r||{})[$r.Sent=0]="Sent",$r[$r.UploadProgress=1]="UploadProgress",$r[$r.ResponseHeader=2]="ResponseHeader",$r[$r.DownloadProgress=3]="DownloadProgress",$r[$r.Response=4]="Response",$r[$r.User=5]="User",$r))();class dx{constructor(e,t=200,r="OK"){this.headers=e.headers||new md,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class hx extends dx{constructor(e={}){super(e),this.type=$r.ResponseHeader}clone(e={}){return new hx({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class cD extends dx{constructor(e={}){super(e),this.type=$r.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new cD({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class nP extends dx{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function fx(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let rP=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof $0)a=t;else{let _,w;_=i.headers instanceof md?i.headers:new md(i.headers),i.params&&(w=i.params instanceof hf?i.params:new hf({fromObject:i.params})),a=new $0(t,r,void 0!==i.body?i.body:null,{headers:_,context:i.context,params:w,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=tt(a).pipe(nu(_=>this.handler.handle(_)));if(t instanceof $0||"events"===i.observe)return l;const h=l.pipe(Qr(_=>_ instanceof cD));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return h.pipe((0,_t.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return h.pipe((0,_t.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return h.pipe((0,_t.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return h.pipe((0,_t.U)(_=>_.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new hf).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,fx(i,r))}post(t,r,i={}){return this.request("POST",t,fx(i,r))}put(t,r,i={}){return this.request("PUT",t,fx(i,r))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ZN))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class iP{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const sP=new p.OlP("HTTP_INTERCEPTORS");let NV=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const PV=/^\)\]\}',?\n/;let oP=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new wn.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((V,j)=>i.setRequestHeader(V,j.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const V=t.detectContentTypeHeader();null!==V&&i.setRequestHeader("Content-Type",V)}if(t.responseType){const V=t.responseType.toLowerCase();i.responseType="json"!==V?V:"text"}const a=t.serializeBody();let l=null;const h=()=>{if(null!==l)return l;const V=i.statusText||"OK",j=new md(i.getAllResponseHeaders()),fe=function kV(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new hx({headers:j,status:i.status,statusText:V,url:fe}),l},_=()=>{let{headers:V,status:j,statusText:fe,url:Me}=h(),nt=null;204!==j&&(nt=void 0===i.response?i.responseText:i.response),0===j&&(j=nt?200:0);let lt=j>=200&&j<300;if("json"===t.responseType&&"string"==typeof nt){const ut=nt;nt=nt.replace(PV,"");try{nt=""!==nt?JSON.parse(nt):null}catch(ot){nt=ut,lt&&(lt=!1,nt={error:ot,text:nt})}}lt?(r.next(new cD({body:nt,headers:V,status:j,statusText:fe,url:Me||void 0})),r.complete()):r.error(new nP({error:nt,headers:V,status:j,statusText:fe,url:Me||void 0}))},w=V=>{const{url:j}=h(),fe=new nP({error:V,status:i.status||0,statusText:i.statusText||"Unknown Error",url:j||void 0});r.error(fe)};let D=!1;const S=V=>{D||(r.next(h()),D=!0);let j={type:$r.DownloadProgress,loaded:V.loaded};V.lengthComputable&&(j.total=V.total),"text"===t.responseType&&!!i.responseText&&(j.partialText=i.responseText),r.next(j)},N=V=>{let j={type:$r.UploadProgress,loaded:V.loaded};V.lengthComputable&&(j.total=V.total),r.next(j)};return i.addEventListener("load",_),i.addEventListener("error",w),i.addEventListener("timeout",w),i.addEventListener("abort",w),t.reportProgress&&(i.addEventListener("progress",S),null!==a&&i.upload&&i.upload.addEventListener("progress",N)),i.send(a),r.next({type:$r.Sent}),()=>{i.removeEventListener("error",w),i.removeEventListener("abort",w),i.removeEventListener("load",_),i.removeEventListener("timeout",w),t.reportProgress&&(i.removeEventListener("progress",S),null!==a&&i.upload&&i.upload.removeEventListener("progress",N)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(rn))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const px=new p.OlP("XSRF_COOKIE_NAME"),gx=new p.OlP("XSRF_HEADER_NAME");class aP{}let OV=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=qo(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(le),p.LFG(p.Lbi),p.LFG(px))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),mx=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const a=this.tokenService.getToken();return null!==a&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,a)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(aP),p.LFG(gx))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),FV=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(sP,[]);this.chain=r.reduceRight((i,a)=>new iP(i,a),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(YN),p.LFG(p.zs3))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),LV=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:mx,useClass:NV}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:px,useValue:t.cookieName}:[],t.headerName?{provide:gx,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[mx,{provide:sP,useExisting:mx,multi:!0},{provide:aP,useClass:OV},{provide:px,useValue:"XSRF-TOKEN"},{provide:gx,useValue:"X-XSRF-TOKEN"}]}),n})(),VV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[rP,{provide:ZN,useClass:FV},oP,{provide:YN,useExisting:oP}],imports:[[LV.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),UV=(()=>{class n{constructor(t){this.http=t,this.url="https://jsonplaceholder.typicode.com/posts"}getData(){return this.http.get(this.url)}addposts(t){return this.http.post(this.url,t)}deletePost(t){return this.http.delete(this.url+"/"+t)}updatePost(t,r){return this.http.patch(this.url+t,r)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(rP))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),uP=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n}),n})(),Rg=(()=>{class n extends uP{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),n})();const zl=new p.OlP("NgValueAccessor"),HV={provide:zl,useExisting:(0,p.Gpc)(()=>dD),multi:!0},GV=new p.OlP("CompositionEventMode");let dD=(()=>{class n extends uP{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function $V(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(GV,8))},n.\u0275dir=p.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&p.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[p._Bn([HV]),p.qOj]}),n})();const ls=new p.OlP("NgValidators"),pf=new p.OlP("NgAsyncValidators");function vP(n){return null!=n}function wP(n){const e=(0,p.QGY)(n)?(0,un.D)(n):n;return(0,p.CqO)(e),e}function EP(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function CP(n,e){return e.map(t=>t(n))}function bP(n){return n.map(e=>function qV(n){return!n.validate}(e)?e:t=>e.validate(t))}function _x(n){return null!=n?function IP(n){if(!n)return null;const e=n.filter(vP);return 0==e.length?null:function(t){return EP(CP(t,e))}}(bP(n)):null}function yx(n){return null!=n?function DP(n){if(!n)return null;const e=n.filter(vP);return 0==e.length?null:function(t){return function BV(...n){const e=(0,sa.jO)(n),{args:t,keys:r}=ln(n),i=new wn.y(a=>{const{length:l}=t;if(!l)return void a.complete();const h=new Array(l);let _=l,w=l;for(let D=0;D<l;D++){let S=!1;(0,Eo.Xf)(t[D]).subscribe((0,pn.x)(a,N=>{S||(S=!0,w--),h[D]=N},()=>_--,void 0,()=>{(!_||!S)&&(w||a.next(r?_c(r,h):h),a.complete())}))}});return e?i.pipe(Hd(e)):i}(CP(t,e).map(wP)).pipe((0,_t.U)(EP))}}(bP(n)):null}function TP(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function SP(n){return n._rawValidators}function AP(n){return n._rawAsyncValidators}function vx(n){return n?Array.isArray(n)?n:[n]:[]}function fD(n,e){return Array.isArray(n)?n.includes(e):n===e}function xP(n,e){const t=vx(e);return vx(n).forEach(i=>{fD(t,i)||t.push(i)}),t}function RP(n,e){return vx(e).filter(t=>!fD(n,t))}class MP{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=_x(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=yx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class gf extends MP{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class xs extends MP{get formDirective(){return null}get path(){return null}}class NP{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let PP=(()=>{class n extends NP{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(gf,2))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[p.qOj]}),n})(),pD=(()=>{class n extends NP{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(xs,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[p.qOj]}),n})();function G0(n,e){Cx(n,e),e.valueAccessor.writeValue(n.value),function eU(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&OP(n,e)})}(n,e),function nU(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function tU(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&OP(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function XV(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function _D(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),vD(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function yD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Cx(n,e){const t=SP(n);null!==e.validator?n.setValidators(TP(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=AP(n);null!==e.asyncValidator?n.setAsyncValidators(TP(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();yD(e._rawValidators,i),yD(e._rawAsyncValidators,i)}function vD(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=SP(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=AP(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return yD(e._rawValidators,r),yD(e._rawAsyncValidators,r),t}function OP(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function FP(n,e){Cx(n,e)}function VP(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Dx(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const W0="VALID",wD="INVALID",ly="PENDING",q0="DISABLED";function Sx(n){return(ED(n)?n.validators:n)||null}function UP(n){return Array.isArray(n)?_x(n):n||null}function Ax(n,e){return(ED(e)?e.asyncValidators:n)||null}function BP(n){return Array.isArray(n)?yx(n):n||null}function ED(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const xx=n=>n instanceof Mx,CD=n=>n instanceof bD,jP=n=>n instanceof WP;function HP(n){return xx(n)?n.value:n.getRawValue()}function $P(n,e){const t=CD(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new p.vHH(1e3,"");if(!r[e])throw new p.vHH(1001,"")}function GP(n,e){CD(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new p.vHH(1002,"")})}class Rx{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=UP(this._rawValidators),this._composedAsyncValidatorFn=BP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===W0}get invalid(){return this.status===wD}get pending(){return this.status==ly}get disabled(){return this.status===q0}get enabled(){return this.status!==q0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=UP(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=BP(e)}addValidators(e){this.setValidators(xP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(xP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(RP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(RP(e,this._rawAsyncValidators))}hasValidator(e){return fD(this._rawValidators,e)}hasAsyncValidator(e){return fD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ly,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=q0,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=W0,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===W0||this.status===ly)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?q0:W0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ly,this._hasOwnPendingAsyncValidator=!0;const t=wP(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function oU(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=CD(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:jP(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?q0:this.errors?wD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ly)?ly:this._anyControlsHaveStatus(wD)?wD:W0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ED(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Mx extends Rx{constructor(e=null,t,r){super(Sx(t),Ax(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ED(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Dx(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Dx(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class bD extends Rx{constructor(e,t,r){super(Sx(t),Ax(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){GP(this,e),Object.keys(e).forEach(r=>{$P(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=HP(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class WP extends Rx{constructor(e,t,r){super(Sx(t),Ax(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){GP(this,e),e.forEach((r,i)=>{$P(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>HP(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const aU={provide:xs,useExisting:(0,p.Gpc)(()=>K0)},z0=(()=>Promise.resolve(null))();let K0=(()=>{class n extends xs{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new p.vpe,this.form=new bD({},_x(t),yx(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){z0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),G0(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){z0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){z0.then(()=>{const r=this._findContainer(t.path),i=new bD({});FP(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){z0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){z0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,VP(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(ls,10),p.Y36(pf,10))},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&p.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([aU]),p.qOj]}),n})(),ID=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),QP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();const Nx=new p.OlP("NgModelWithFormControlWarning"),gU={provide:xs,useExisting:(0,p.Gpc)(()=>DD)};let DD=(()=>{class n extends xs{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(vD(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return G0(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){_D(t.control||null,t,!1),Dx(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,VP(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(_D(r||null,t),xx(i)&&(G0(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);FP(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function rU(n,e){return vD(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Cx(this.form,this),this._oldForm&&vD(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(ls,10),p.Y36(pf,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&p.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([gU]),p.qOj,p.TTD]}),n})();const yU={provide:gf,useExisting:(0,p.Gpc)(()=>Ox)};let Ox=(()=>{class n extends gf{constructor(t,r,i,a,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Ix(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===dD?t=a:function sU(n){return Object.getPrototypeOf(n.constructor)===Rg}(a)?r=a:i=a}),i||r||t||null}(0,a)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function bx(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function mD(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(p.Y36(xs,13),p.Y36(ls,10),p.Y36(pf,10),p.Y36(zl,10),p.Y36(Nx,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([yU]),p.qOj,p.TTD]}),n})(),fk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[QP]]}),n})(),kU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[fk]}),n})(),pk=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Nx,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[fk]}),n})(),FU=(()=>{class n{group(t,r=null){const i=this._reduceControls(t);let h,a=null,l=null;return null!=r&&(function OU(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(a=null!=r.validators?r.validators:null,l=null!=r.asyncValidators?r.asyncValidators:null,h=null!=r.updateOn?r.updateOn:void 0):(a=null!=r.validator?r.validator:null,l=null!=r.asyncValidator?r.asyncValidator:null)),new bD(i,{asyncValidators:l,updateOn:h,validators:a})}control(t,r,i){return new Mx(t,r,i)}array(t,r,i){const a=t.map(l=>this._createControl(l));return new WP(a,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return xx(t)||CD(t)||jP(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:pk}),n})(),LU=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(xg))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-header"]],decls:11,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-light"],[1,"container-fluid"],["routerLink","/home",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto"],[1,"nav-item"],[1,"nav-link",3,"click"]],template:function(t,r){1&t&&(p.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),p._uU(3,"Posts website"),p.qZA(),p.TgZ(4,"button",3),p._UZ(5,"span",4),p.qZA(),p.TgZ(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),p.NdJ("click",function(){return r.authService.SignOut()}),p._uU(10," Log out "),p.qZA()()()()()())},directives:[ko],styles:[".navbar[_ngcontent-%COMP%]{background-color:#505ca9;color:#fff}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;width:-moz-fit-content;width:fit-content;cursor:pointer}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#f1d2fe}.container-fluid[_ngcontent-%COMP%]{width:45%}@media screen and (max-width: 970px){.container-fluid[_ngcontent-%COMP%]{width:80%}}"]}),n})();function VU(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"tr")(1,"th",16),p._uU(2),p.qZA(),p.TgZ(3,"td"),p._uU(4),p.qZA(),p.TgZ(5,"td"),p._uU(6),p.qZA(),p.TgZ(7,"td"),p._uU(8),p.qZA(),p.TgZ(9,"td")(10,"button",17),p.NdJ("click",function(){const i=p.CHM(t),a=i.$implicit,l=i.index;return p.oxw().deletePost(a.id,l)}),p._uU(11,"Delete"),p.qZA()()()}if(2&n){const t=e.$implicit;p.xp6(2),p.Oqu(t.id),p.xp6(2),p.Oqu(t.userId),p.xp6(2),p.Oqu(t.title),p.xp6(2),p.Oqu(t.body)}}let UU=(()=>{class n{constructor(t,r,i,a){this.authService=t,this.dataService=r,this.builder=i,this.router=a,this.data=[],this.addPostForm=this.builder.group({title:[""],body:[""]})}addposts(t){this.dataService.addposts(t).subscribe({next:()=>{console.log(t),this.data.splice(0,0,t),this.router.navigateByUrl("home")},error:r=>{console.log(r)}})}getPosts(){this.dataService.getData().subscribe({next:t=>{this.data=t},error:t=>{console.log(t)}})}deletePost(t,r){this.dataService.deletePost(t).subscribe({next:()=>{this.data.splice(r,1)},error:i=>{console.log(i)}})}ngOnInit(){this.getPosts()}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(xg),p.Y36(UV),p.Y36(FU),p.Y36(Dr))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-home"]],decls:32,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-lg-5","col-md-12","col-sm-12"],[3,"formGroup","ngSubmit"],["for","title",1,"form-label"],["type","text","id","title","formControlName","title",1,"form-control"],["for","body",1,"form-label"],["type","text","id","body","formControlName","body",1,"form-control"],["type","submit",1,"btn","btn-primary","mt-5"],[1,"table","table-striped","table-hover","col-lg-12","col-md-12","col-sm-9"],["scope","col",1,"col-lg-1","col-md-1","col-sm"],["scope","col",1,"col-lg-1","col-md-1","col-sm","userid"],["scope","col",1,"col-lg-3","col-md-2","col-sm-1"],["scope","col",1,"col-lg-6","col-md-4","col-sm-1"],["scope","col",1,"col-lg-1","col-md-1","col-sm-1"],[4,"ngFor","ngForOf"],["scope","row"],[1,"btn","btn-danger",3,"click"]],template:function(t,r){1&t&&(p._UZ(0,"app-header"),p.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"form",3),p.NdJ("ngSubmit",function(){return r.addposts(r.addPostForm.value)}),p.TgZ(5,"label",4),p._uU(6,"Title"),p.qZA(),p._UZ(7,"input",5),p.TgZ(8,"label",6),p._uU(9,"Body"),p.qZA(),p._UZ(10,"textarea",7),p.TgZ(11,"button",8),p._uU(12,"Add"),p.qZA()()()()(),p.TgZ(13,"div"),p._UZ(14,"br"),p.TgZ(15,"div",0)(16,"div",1)(17,"table",9)(18,"thead")(19,"tr")(20,"th",10),p._uU(21,"ID"),p.qZA(),p.TgZ(22,"th",11),p._uU(23,"UserID"),p.qZA(),p.TgZ(24,"th",12),p._uU(25,"Title"),p.qZA(),p.TgZ(26,"th",13),p._uU(27,"Body"),p.qZA(),p.TgZ(28,"th",14),p._uU(29,"Delete"),p.qZA()()(),p.TgZ(30,"tbody"),p.YNc(31,VU,12,4,"tr",15),p.qZA()()()()()),2&t&&(p.xp6(4),p.Q6J("formGroup",r.addPostForm),p.xp6(27),p.Q6J("ngForOf",r.data))},directives:[LU,ID,pD,DD,dD,PP,Ox,Yn],styles:[".addpost-btn[_ngcontent-%COMP%]{background-color:#505ca9;color:#fff}@media screen and (max-width: 400px){*[_ngcontent-%COMP%]{font-size:12px}}"]}),n})(),BU=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(xg))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-login"]],decls:15,vars:0,consts:[[1,"form-div"],[1,"d-block"],["type","text","placeholder","Email","required","",1,"form-control"],["userName",""],["type","password","placeholder","Password","required","",1,"form-control"],["userPassword",""],["type","button","value","Log in",1,"btn","btnPrimary",3,"click"],["routerLink","/signup",1,"redirect"],["src","../../../assets/loginimg.png","alt","login"]],template:function(t,r){if(1&t){const i=p.EpF();p.TgZ(0,"div",0)(1,"form",1)(2,"h3"),p._uU(3,"Welcome back"),p.qZA(),p._UZ(4,"input",2,3)(6,"input",4,5),p.TgZ(8,"input",6),p.NdJ("click",function(){p.CHM(i);const l=p.MAs(5),h=p.MAs(7);return r.authService.SignIn(l.value,h.value)}),p.qZA(),p._UZ(9,"br"),p.TgZ(10,"span"),p._uU(11,"Don't have an account?"),p.TgZ(12,"a",7),p._uU(13," Sign Up"),p.qZA()()(),p._UZ(14,"img",8),p.qZA()}},directives:[ID,pD,K0,ko],styles:[".form-div[_ngcontent-%COMP%]{background-color:#f2f2f2;display:flex}.form-div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:48%}h3[_ngcontent-%COMP%]{color:#505ca9}form[_ngcontent-%COMP%]{width:30%;margin:13% auto auto;background-color:#fff;padding:5%;border-radius:20px}input[_ngcontent-%COMP%]{margin-top:10%}.btn[_ngcontent-%COMP%]{background-color:#505ca9;color:#fff;margin-top:10%;padding:3% 10%}.redirect[_ngcontent-%COMP%]{color:#505ca9;cursor:pointer;text-decoration:none}@media screen and (max-width:800px){.form-div[_ngcontent-%COMP%]{display:block!important}.form-div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:95%}form[_ngcontent-%COMP%]{width:90%}}"]}),n})(),jU=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(xg))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-signup"]],decls:17,vars:0,consts:[[1,"con-form-div"],["src","../../../assets/signup.png","alt","signup",1,"mt-5"],[1,"form-div"],[1,"d-block"],["type","text","placeholder","name","required","",1,"form-control"],["username",""],["type","email","placeholder","Email Address","required","",1,"form-control"],["userEmail",""],["type","password","placeholder","Password","required","",1,"form-control"],["userPwd",""],["type","tel","placeholder","phone","required","",1,"form-control"],["userphone",""],["type","button","value","Sign Up",1,"btn",3,"click"],["routerLink","/",1,"ms-3"]],template:function(t,r){if(1&t){const i=p.EpF();p.TgZ(0,"div",0),p._UZ(1,"img",1),p.TgZ(2,"div",2)(3,"form",3)(4,"h3"),p._uU(5,"Signup"),p.qZA(),p._UZ(6,"input",4,5)(8,"input",6,7)(10,"input",8,9)(12,"input",10,11),p.TgZ(14,"input",12),p.NdJ("click",function(){p.CHM(i);const l=p.MAs(9),h=p.MAs(11);return r.authService.SignUp(l.value,h.value)}),p.qZA(),p.TgZ(15,"a",13),p._uU(16,"Back to login page"),p.qZA()()()()}},directives:[ID,pD,K0,ko],styles:[".con-form-div[_ngcontent-%COMP%]{background-color:#f2f2f2;margin-bottom:10%;display:flex}h3[_ngcontent-%COMP%]{color:#505ca9}.form-div[_ngcontent-%COMP%]{margin:5% auto auto;width:30%;background-color:#fff;padding:5%;border-radius:20px}input[_ngcontent-%COMP%]{margin-top:10%}.btn[_ngcontent-%COMP%]{margin-bottom:5%;background-color:#505ca9;color:#fff;margin-top:10%;padding:3% 10%}a[_ngcontent-%COMP%]{text-decoration:none}@media screen and (max-width: 880px){.con-form-div[_ngcontent-%COMP%]{display:block}img[_ngcontent-%COMP%]{width:80%}.form-div[_ngcontent-%COMP%]{width:90%}}"]}),n})();function HU(n,e){if(1&n&&(p.TgZ(0,"div",3)(1,"p",8),p._uU(2,"We have sent a confirmation email to "),p.TgZ(3,"strong"),p._uU(4),p.qZA(),p._uU(5,"."),p.qZA(),p.TgZ(6,"p",8),p._uU(7,"Please check your email and click on the link to verfiy your email address."),p.qZA()()),2&n){const t=e.ngIf;p.xp6(4),p.Oqu(t.email)}}let $U=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(xg))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-verify"]],decls:15,vars:1,consts:[[1,"form-div"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/signin",1,"redirect"],[1,"text-center"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"div",1)(2,"h3"),p._uU(3,"Thank You for Registering"),p.qZA(),p.YNc(4,HU,8,1,"div",2),p.TgZ(5,"div",3)(6,"button",4),p.NdJ("click",function(){return r.authService.SendVerificationMail()}),p._UZ(7,"i",5),p._uU(8," Resend Verification Email "),p.qZA()()(),p.TgZ(9,"div",6)(10,"span"),p._uU(11,"Go back to"),p.TgZ(12,"span",7),p._uU(13," Sign in"),p.qZA(),p._uU(14," again"),p.qZA()()()),2&t&&(p.xp6(4),p.Q6J("ngIf",r.authService.userData))},directives:[ur,uh],styles:["h3[_ngcontent-%COMP%]{color:#b161d1}.form-div[_ngcontent-%COMP%]{margin:15% auto auto;width:30%;background-color:#fff;padding:5%;border-radius:20px}input[_ngcontent-%COMP%]{margin-top:10%}.btn[_ngcontent-%COMP%]{margin-bottom:3%;background-color:#b161d1;color:#fff;margin-top:10%;padding:3% 10%}.redirect[_ngcontent-%COMP%]{color:#b161d1;cursor:pointer}@media screen and (max-width: 880px){.form-div[_ngcontent-%COMP%]{width:90%}}"]}),n})(),GU=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn&&this.router.navigate(["signin"]),!0}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(xg),p.LFG(Dr))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),gk=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-start"]],decls:14,vars:0,consts:[[1,"d-flex","con-div"],[1,"col-5"],[2,"font-size","100px","margin-top","25%","margin-left","8%"],["routerLink","/signin",1,"btn","get-started","px-5","py-2"],[1,"col-7"],["routerLink","/signin",1,"btn","btn2",2,"margin-left","65%"],["routerLink","/signup",1,"btn","btn2","sign","ms-3"],["src","../../../assets/5612.jpg","alt","5612",1,"w-100"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),p._uU(3,"Welcome"),p._UZ(4,"br"),p._uU(5," to Posts "),p.qZA(),p.TgZ(6,"a",3),p._uU(7,"Get Started"),p.qZA()(),p.TgZ(8,"div",4)(9,"a",5),p._uU(10,"Sign in"),p.qZA(),p.TgZ(11,"a",6),p._uU(12,"Sign up"),p.qZA(),p._UZ(13,"img",7),p.qZA()())},directives:[ko],styles:[".con-div[_ngcontent-%COMP%]{background-color:#f2f2f2}.btn2[_ngcontent-%COMP%]{margin-top:5%;border:2px solid;border-radius:50px}.sign[_ngcontent-%COMP%]{background-color:#000;color:#fff}.get-started[_ngcontent-%COMP%]{background:linear-gradient(to left,rgb(214,83,118),rgb(57,53,79));color:#fff;outline:none;border:none;border-radius:50px;font-size:18px;margin-left:15%;margin-top:10%}@media screen and (max-width:800px){.con-div[_ngcontent-%COMP%]{display:block!important}}"]}),n})();const WU=[{path:"",redirectTo:"/get-started",pathMatch:"full"},{path:"",component:gk},{path:"get-started",component:gk},{path:"signin",component:BU},{path:"signup",component:jU},{path:"verify",component:$U},{path:"home",component:UU,canActivate:[GU]}];let qU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[ep.forRoot(WU)],ep]}),n})(),zU=(()=>{class n{constructor(){this.title="Ads-app"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},directives:[Tc],styles:[""]}),n})();const mk="firebasestorage.googleapis.com",_k="storageBucket";class _r extends k.ZR{constructor(e,t){super(Ux(e),`Firebase Storage: ${t} (${Ux(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_r.prototype)}_codeEquals(e){return Ux(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Ux(n){return"storage/"+n}function Bx(){return new _r("unknown","An unknown error occurred, please check the error payload for server response.")}function yk(){return new _r("canceled","User canceled the upload/download.")}function vk(){return new _r("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function cy(n){return new _r("invalid-argument",n)}function wk(){return new _r("app-deleted","The Firebase app was deleted.")}function Ek(n){return new _r("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Z0(n,e){return new _r("invalid-format","String does not match format '"+n+"': "+e)}function Y0(n){throw new _r("internal-error","Internal error: "+n)}class cs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=cs.makeFromUrl(e,t)}catch(i){return new cs(e,"")}if(""===r.path)return r;throw function iB(n){return new _r("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(ot){ot.path_=decodeURIComponent(ot.path)}const S=t.replace(/[.]/g,"\\."),ut=[{regex:h,indices:{bucket:1,path:3},postModify:function a(ot){"/"===ot.path.charAt(ot.path.length-1)&&(ot.path_=ot.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===mk?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let ot=0;ot<ut.length;ot++){const Mt=ut[ot],Kt=Mt.regex.exec(e);if(Kt){let Fu=Kt[Mt.indices.path];Fu||(Fu=""),r=new cs(Kt[Mt.indices.bucket],Fu),Mt.postModify(r);break}}if(null==r)throw function rB(n){return new _r("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class uB{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function TD(n){return"string"==typeof n||n instanceof String}function Ck(n){return jx()&&n instanceof Blob}function jx(){return"undefined"!=typeof Blob}function Hx(n,e,t,r){if(r<e)throw cy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw cy(`Invalid value for '${n}'. Expected ${t} or less.`)}function _d(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function bk(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var mf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(mf||(mf={})),mf))();class pB{constructor(e,t,r,i,a,l,h,_,w,D,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=_,this.timeout_=w,this.progressCallback_=D,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,V)=>{this.resolve_=N,this.reject_=V,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(h,h.getResponse());!function dB(n){return void 0!==n}(_)?a():a(_)}catch(_){l(_)}else if(null!==h){const _=Bx();_.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,_):_)}else l(i.canceled?this.appDelete_?wk():yk():function nB(){return new _r("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new SD(!1,null,!0)):this.backoffId_=function lB(n,e,t){let r=1,i=null,a=null,l=!1,h=0;function _(){return 2===h}let w=!1;function D(...Me){w||(w=!0,e.apply(null,Me))}function S(Me){i=setTimeout(()=>{i=null,n(V,_())},Me)}function N(){a&&clearTimeout(a)}function V(Me,...nt){if(w)return void N();if(Me)return N(),void D.call(null,Me,...nt);if(_()||l)return N(),void D.call(null,Me,...nt);let ut;r<64&&(r*=2),1===h?(h=2,ut=0):ut=1e3*(r+Math.random()),S(ut)}let j=!1;function fe(Me){j||(j=!0,N(),!w&&(null!==i?(Me||(h=2),clearTimeout(i),S(0)):Me||(h=1)))}return S(0),a=setTimeout(()=>{l=!0,fe(!0)},t),fe}((r,i)=>{if(i)return void r(!1,new SD(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const h=a.getErrorCode()===mf.NO_ERROR,_=a.getStatus();if(!h||this.isRetryStatusCode_(_)){const D=a.getErrorCode()===mf.ABORT;return void r(!1,new SD(!1,null,D))}const w=-1!==this.successCodes_.indexOf(_);r(!0,new SD(w,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function cB(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class SD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function EB(...n){const e=function wB(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(jx())return new Blob(n);throw new _r("unsupported-environment","This browser doesn't seem to support creating Blobs")}const $o={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class $x{constructor(e,t){this.data=e,this.contentType=t||null}}function Gx(n,e){switch(n){case $o.RAW:return new $x(Ik(e));case $o.BASE64:case $o.BASE64URL:return new $x(Dk(n,e));case $o.DATA_URL:return new $x(function DB(n){const e=new Tk(n);return e.base64?Dk($o.BASE64,e.rest):function IB(n){let e;try{e=decodeURIComponent(n)}catch(t){throw Z0($o.DATA_URL,"Malformed data URL.")}return Ik(e)}(e.rest)}(e),function TB(n){return new Tk(n).contentType}(e))}throw Bx()}function Ik(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Dk(n,e){switch(n){case $o.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw Z0(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case $o.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw Z0(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function bB(n){return atob(n)}(e)}catch(i){throw Z0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class Tk{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Z0($o.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function SB(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Kl{constructor(e,t){let r=0,i="";Ck(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Ck(this.data_)){const i=function CB(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Kl(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Kl(r,!0)}}static getBlob(...e){if(jx()){const t=e.map(r=>r instanceof Kl?r.data_:r);return new Kl(EB.apply(null,t))}{const t=e.map(l=>TD(l)?Gx($o.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)i[a++]=l[h]}),new Kl(i,!0)}}uploadData(){return this.data_}}function Wx(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function fB(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function Sk(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function RB(n,e){return e}class Rs{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||RB}}let AD=null;function Q0(){if(AD)return AD;const n=[];n.push(new Rs("bucket")),n.push(new Rs("generation")),n.push(new Rs("metageneration")),n.push(new Rs("name","fullPath",!0));const t=new Rs("name");t.xform=function e(a,l){return function MB(n){return!TD(n)||n.length<2?n:Sk(n)}(l)},n.push(t);const i=new Rs("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Rs("timeCreated")),n.push(new Rs("updated")),n.push(new Rs("md5Hash",null,!0)),n.push(new Rs("cacheControl",null,!0)),n.push(new Rs("contentDisposition",null,!0)),n.push(new Rs("contentEncoding",null,!0)),n.push(new Rs("contentLanguage",null,!0)),n.push(new Rs("contentType",null,!0)),n.push(new Rs("metadata","customMetadata",!0)),AD=n,AD}function Ak(n,e,t){const r=Wx(e);return null===r?null:function PB(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function NB(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new cs(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function qx(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const xk="prefixes";class Zl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Yl(n){if(!n)throw Bx()}function xD(n,e){return function t(r,i){const a=Ak(n,i,e);return Yl(null!==a),a}}function dy(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function eB(){return new _r("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function XU(){return new _r("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function JU(n){return new _r("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function tB(n){return new _r("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function J0(n){const e=dy(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function QU(n){return new _r("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function Mk(n,e,t){const i=_d(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new Zl(i,"GET",xD(n,t),l);return h.errorHandler=J0(e),h}function UB(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=_d(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,D=new Zl(h,"GET",function LB(n,e){return function t(r,i){const a=function FB(n,e,t){const r=Wx(t);return null===r?null:function OB(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[xk])for(const i of t[xk]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new cs(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new cs(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Yl(null!==a),a}}(n,e.bucket),w);return D.urlParams=a,D.errorHandler=dy(e),D}function Pk(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function $B(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class RD{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function zx(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Yl(!1)}return Yl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const zB={STATE_CHANGED:"state_changed"},Ms={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Kx(n){switch(n){case"running":case"pausing":case"canceling":return Ms.RUNNING;case"paused":return Ms.PAUSED;case"success":return Ms.SUCCESS;case"canceled":return Ms.CANCELED;default:return Ms.ERROR}}class KB{constructor(e,t,r){if(function hB(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function hy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class YB extends class ZB{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=mf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=mf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=mf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Y0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Y0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Y0("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Y0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Y0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Mu(){return new YB}class Lk{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Q0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function GB(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=Pk(e,r,i),h={name:l.fullPath},_=_d(a,n.host,n._protocol),D={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=qx(l,t),j=new Zl(_,"POST",function V(fe){let Me;zx(fe);try{Me=fe.getResponseHeader("X-Goog-Upload-URL")}catch(nt){Yl(!1)}return Yl(TD(Me)),Me},n.maxUploadRetryTime);return j.urlParams=h,j.headers=D,j.body=S,j.errorHandler=dy(e),j}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Mu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function WB(n,e,t,r){const _=new Zl(t,"POST",function a(w){const D=zx(w,["active","final"]);let S=null;try{S=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch(V){Yl(!1)}S||Yl(!1);const N=Number(S);return Yl(!isNaN(N)),new RD(N,r.size(),"final"===D)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=dy(e),_}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Mu,t,r);this._request=a,a.getPromise().then(l=>{l=l,this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new RD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function qB(n,e,t,r,i,a,l,h){const _=new RD(0,0);if(l?(_.current=l.current,_.total=l.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function oB(){return new _r("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const w=_.total-_.current;let D=w;i>0&&(D=Math.min(D,i));const S=_.current,j={"X-Goog-Upload-Command":D===w?"upload, finalize":"upload","X-Goog-Upload-Offset":`${_.current}`},fe=r.slice(S,S+D);if(null===fe)throw vk();const ut=new Zl(t,"POST",function Me(ot,Mt){const Kt=zx(ot,["active","final"]),Gr=_.current+D,Fu=r.size();let aM;return aM="final"===Kt?xD(e,a)(ot,Mt):null,new RD(Gr,Fu,"final"===Kt,aM)},e.maxUploadRetryTime);return ut.headers=j,ut.body=fe.uploadData(),ut.progressCallback=h||null,ut.errorHandler=dy(n),ut}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const h=this._ref.storage._makeRequest(l,Mu,i,a);this._request=h,h.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Mk(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Mu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function kk(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},_=function h(){let ut="";for(let ot=0;ot<2;ot++)ut+=Math.random().toString().slice(2);return ut}();l["Content-Type"]="multipart/related; boundary="+_;const w=Pk(e,r,i),D=qx(w,t),V=Kl.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+_+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===V)throw vk();const j={name:w.fullPath},fe=_d(a,n.host,n._protocol),nt=n.maxUploadRetryTime,lt=new Zl(fe,"POST",xD(n,t),nt);return lt.urlParams=j,lt.headers=l,lt.body=V.uploadData(),lt.errorHandler=dy(e),lt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Mu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=yk(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Kx(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new KB(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Kx(this._state)){case Ms.SUCCESS:hy(this._resolve.bind(null,this.snapshot))();break;case Ms.CANCELED:case Ms.ERROR:hy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Kx(this._state)){case Ms.RUNNING:case Ms.PAUSED:e.next&&hy(e.next.bind(e,this.snapshot))();break;case Ms.SUCCESS:e.complete&&hy(e.complete.bind(e))();break;default:e.error&&hy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Ng{constructor(e,t){this._service=e,this._location=t instanceof cs?t:cs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ng(e,t)}get root(){const e=new cs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Sk(this._location.path)}get storage(){return this._service}get parent(){const e=function AB(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new cs(this._location.bucket,e);return new Ng(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Ek(e)}}function Uk(n,e,t){return Zx.apply(this,arguments)}function Zx(){return Zx=(0,ye.Z)(function*(n,e,t){const i=yield Bk(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield Uk(n,e,i.nextPageToken))}),Zx.apply(this,arguments)}function Bk(n,e){null!=e&&"number"==typeof e.maxResults&&Hx("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=UB(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Mu)}function u2(n){n._throwIfRoot("getDownloadURL");const e=function BB(n,e,t){const i=_d(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new Zl(i,"GET",function VB(n,e){return function t(r,i){const a=Ak(n,i,e);return Yl(null!==a),function kB(n,e,t,r){const i=Wx(e);if(null===i||!TD(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(w=>{const S=n.fullPath;return _d("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+bk({alt:"media",token:w})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return h.errorHandler=J0(e),h}(n.storage,n._location,Q0());return n.storage.makeRequestWithTokens(e,Mu).then(t=>{if(null===t)throw function aB(){return new _r("no-download-url","The given file does not have any download URLs.")}();return t})}function jk(n,e){const t=function xB(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new cs(n._location.bucket,t);return new Ng(n.storage,r)}function Hk(n,e){if(n instanceof Yx){const t=n;if(null==t._bucket)throw function sB(){return new _r("no-default-bucket","No default bucket found. Did you set the '"+_k+"' property when initializing the app?")}();const r=new Ng(t,t._bucket);return null!=e?Hk(r,e):r}return void 0!==e?jk(n,e):n}function h2(n,e){if(e&&function c2(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Yx)return function d2(n,e){return new Ng(n,e)}(n,e);throw cy("To use ref(service, url), the first argument must be a Storage instance.")}return Hk(n,e)}function $k(n,e){const t=null==e?void 0:e[_k];return null==t?null:cs.makeFromBucketSpec(t,n)}class Yx{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=mk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?cs.makeFromBucketSpec(i,this._host):$k(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?cs.makeFromBucketSpec(this._url,e):$k(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Hx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Hx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ye.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ye.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ng(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new uB(wk());{const a=function vB(n,e,t,r,i,a){const l=bk(n.urlParams),h=n.url+l,_=Object.assign({},n.headers);return function _B(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function gB(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function mB(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(_,a),function yB(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new pB(h,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,ye.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const Gk="@firebase/storage";function zk(n,e){return h2(n=(0,k.m9)(n),e)}function b2(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Yx(t,r,i,e,Ri.SDK_VERSION)}!function I2(){(0,Ri._registerComponent)(new Xs.wA("storage",b2,"PUBLIC").setMultipleInstances(!0)),(0,Ri.registerVersion)(Gk,"0.9.6",""),(0,Ri.registerVersion)(Gk,"0.9.6","esm2017")}();class MD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Kk{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new MD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new MD(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new MD(l,this,this._ref)):{next:t.next?l=>t.next(new MD(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class Zk{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new yd(e,this._service))}get items(){return this._delegate.items.map(e=>new yd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class yd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function E2(n,e){return jk(n,e)}(this._delegate,e);return new yd(t,this.storage)}get root(){return new yd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new yd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Kk(function p2(n,e,t){return function r2(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Lk(n,new Kl(e),t)}(n=(0,k.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=$o.RAW,r){this._throwIfRoot("putString");const i=Gx(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new Kk(new Lk(this._delegate,new Kl(i.data,!0),a),this)}listAll(){return function y2(n){return function s2(n){const e={prefixes:[],items:[]};return Uk(n,e).then(()=>e)}(n=(0,k.m9)(n))}(this._delegate).then(e=>new Zk(e,this.storage))}list(e){return function _2(n,e){return Bk(n=(0,k.m9)(n),e)}(this._delegate,e||void 0).then(t=>new Zk(t,this.storage))}getMetadata(){return function g2(n){return function o2(n){n._throwIfRoot("getMetadata");const e=Mk(n.storage,n._location,Q0());return n.storage.makeRequestWithTokens(e,Mu)}(n=(0,k.m9)(n))}(this._delegate)}updateMetadata(e){return function m2(n,e){return function a2(n,e){n._throwIfRoot("updateMetadata");const t=function jB(n,e,t,r){const a=_d(e.fullServerUrl(),n.host,n._protocol),h=qx(t,r),w=n.maxOperationRetryTime,D=new Zl(a,"PATCH",xD(n,r),w);return D.headers={"Content-Type":"application/json; charset=utf-8"},D.body=h,D.errorHandler=J0(e),D}(n.storage,n._location,e,Q0());return n.storage.makeRequestWithTokens(t,Mu)}(n=(0,k.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function v2(n){return u2(n=(0,k.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function w2(n){return function l2(n){n._throwIfRoot("deleteObject");const e=function HB(n,e){const r=_d(e.fullServerUrl(),n.host,n._protocol),h=new Zl(r,"DELETE",function l(_,w){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=J0(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Mu)}(n=(0,k.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Ek(e)}}class Yk{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Qk(e))throw cy("ref() expected a child path but got a URL, use refFromURL instead.");return new yd(zk(this._delegate,e),this)}refFromURL(e){if(!Qk(e))throw cy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{cs.makeFromUrl(e,this._delegate.host)}catch(t){throw cy("refFromUrl() expected a valid full URL but got an invalid one.")}return new yd(zk(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function C2(n,e,t,r={}){!function f2(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,k.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function Qk(n){return/^[A-Za-z]+:\/\//.test(n)}function A2(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new Yk(t,r)}function Jk(n){const e=function R2(n){return new wn.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function KU(n,e=Pm.z){return(0,jn.e)((t,r)=>{let i=null,a=null,l=null;const h=()=>{if(i){i.unsubscribe(),i=null;const w=a;a=null,r.next(w)}};function _(){const w=l+n,D=e.now();if(D<w)return i=this.schedule(void 0,w-D),void r.add(i);h()}t.subscribe((0,pn.x)(r,w=>{a=w,l=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,_t.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function ND(n){return{getDownloadURL:()=>tt(void 0).pipe(Xt.fc,En(()=>n.getDownloadURL()),Xt.iC),getMetadata:()=>tt(void 0).pipe(Xt.fc,En(()=>n.getMetadata()),Xt.iC),delete:()=>(0,un.D)(n.delete()),child:e=>ND(n.child(e)),updateMetadata:e=>(0,un.D)(n.updateMetadata(e)),put:(e,t)=>Jk(n.put(e,t)),putString:(e,t,r)=>Jk(n.putString(e,t,r)),list:e=>(0,un.D)(n.list(e)),listAll:()=>(0,un.D)(n.listAll())}}!function x2(n){const e={TaskState:Ms,TaskEvent:zB,StringFormat:$o,Storage:Yk,Reference:yd};n.INTERNAL.registerComponent(new Xs.wA("storage-compat",A2,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.14")}(km.Z);const M2=new p.OlP("angularfire2.storageBucket"),N2=new p.OlP("angularfire2.storage.maxUploadRetryTime"),P2=new p.OlP("angularfire2.storage.maxOperationRetryTime"),k2=new p.OlP("angularfire2.storage.use-emulator");let O2=(()=>{class n{constructor(t,r,i,a,l,h,_,w,D,S){const N=(0,fr.on)(t,l,r);this.storage=(0,fr.cc)(`${N.name}.storage.${i}`,"AngularFireStorage",N.name,()=>{const V=l.runOutsideAngular(()=>N.storage(i||void 0)),j=D;return j&&V.useEmulator(...j),_&&V.setMaxUploadRetryTime(_),w&&V.setMaxOperationRetryTime(w),V},[_,w])}ref(t){return ND(this.storage.ref(t))}refFromURL(t){return ND(this.storage.refFromURL(t))}upload(t,r,i){return ND(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(fr.Dh),p.LFG(fr.xv,8),p.LFG(M2,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Xt.HU),p.LFG(N2,8),p.LFG(P2,8),p.LFG(k2,8),p.LFG(j0,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),F2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})(),L2=(()=>{class n{constructor(){uD.Z.registerVersion("angularfire",Xt.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[O2],imports:[F2]}),n})();var V2=O(5032);const Xk="@firebase/database";let Qx="";function tO(n){Qx=n}class j2{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class H2{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const nO=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new j2(e)}}catch(e){}return new H2},Pg=nO("localStorage"),Jx=nO("sessionStorage"),fy=new Oo.Yd("@firebase/database"),rO=function(){let n=1;return function(){return n++}}(),iO=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},X0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=X0.apply(null,r):e+="object"==typeof r?(0,k.Pz)(r):r,e+=" "}return e};let kg=null,sO=!0;const oO=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(fy.logLevel=Oo.in.VERBOSE,kg=fy.log.bind(fy),e&&Jx.set("logging_enabled",!0)):"function"==typeof n?kg=n:(kg=null,Jx.remove("logging_enabled"))},Ii=function(...n){if(!0===sO&&(sO=!1,null===kg&&!0===Jx.get("logging_enabled")&&oO(!0)),kg){const e=X0.apply(null,n);kg(e)}},eE=function(n){return function(...e){Ii(n,...e)}},Xx=function(...n){const e="FIREBASE INTERNAL ERROR: "+X0(...n);fy.error(e)},Ql=function(...n){const e=`FIREBASE FATAL ERROR: ${X0(...n)}`;throw fy.error(e),new Error(e)},ds=function(...n){const e="FIREBASE WARNING: "+X0(...n);fy.warn(e)},PD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},vd="[MIN_NAME]",Jl="[MAX_NAME]",Og=function(n,e){if(n===e)return 0;if(n===vd||e===Jl)return-1;if(e===vd||n===Jl)return 1;{const t=kD(n),r=kD(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},W2=function(n,e){return n===e?0:n<e?-1:1},tE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Pz)(e))},eR=function(n){if("object"!=typeof n||null===n)return(0,k.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Pz)(e[r]),t+=":",t+=eR(n[e[r]]);return t+="}",t},aO=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Di(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const uO=function(n){(0,k.hu)(!PD(n),"Invalid JSON number");const r=1023;let i,a,l,h,_;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const w=[];for(_=52;_;_-=1)w.push(l%2?1:0),l=Math.floor(l/2);for(_=11;_;_-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const D=w.join("");let S="";for(_=0;_<64;_+=8){let N=parseInt(D.substr(_,8),2).toString(16);1===N.length&&(N="0"+N),S+=N}return S.toLowerCase()},Z2=new RegExp("^-?(0*)\\d{1,10}$"),lO=-2147483648,tR=2147483647,kD=function(n){if(Z2.test(n)){const e=Number(n);if(e>=lO&&e<=tR)return e}return null},py=function(n){try{n()}catch(e){setTimeout(()=>{throw ds("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},nE=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class Q2{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ds(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class J2{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ii("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ds(e)}}let rE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const pO=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,_O="websocket",yO="long_polling";class rR{constructor(e,t,r,i,a=!1,l="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Pg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Pg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function vO(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===_O)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==yO)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function X2(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Di(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class ej{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const iR={},sR={};function oR(n){const e=n.toString();return iR[e]||(iR[e]=new ej),iR[e]}class nj{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&py(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class _f{constructor(e,t,r,i,a,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=eE(e),this.stats_=oR(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),vO(t,yO,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new nj(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new aR((...a)=>{const[l,h,_,w,D]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=_;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&pO.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){_f.forceAllow_=!0}static forceDisallow(){_f.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!_f.forceAllow_&&(_f.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=aO(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class aR{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=rO(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=aR.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Ii("frame writing exception"),h.stack&&Ii(h.stack),Ii(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ii("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ii("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let FD=null;"undefined"!=typeof MozWebSocket?FD=MozWebSocket:"undefined"!=typeof WebSocket&&(FD=WebSocket);let gy=(()=>{class n{constructor(t,r,i,a,l,h,_){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=eE(this.connId),this.stats_=oR(r),this.connURL=n.connectionURL_(r,h,_,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const h={v:"5"};return!(0,k.Yr)()&&"undefined"!=typeof location&&location.hostname&&pO.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),a&&(h.ac=a),l&&(h.p=l),vO(t,_O,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Pg.set("previous_websocket_failure",!0);try{let i;if((0,k.Yr)()){const l={headers:{"User-Agent":`Firebase/5/${Qx}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(l.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(l.headers["X-Firebase-AppCheck"]=this.appCheckToken);const h=process.env,_=0===this.connURL.indexOf("wss://")?h.HTTPS_PROXY||h.https_proxy:h.HTTP_PROXY||h.http_proxy;_&&(l.proxy={origin:_})}this.mySock=new FD(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==FD&&!n.forceDisallow_}static previouslyFailed(){return Pg.isInMemoryStorage||!0===Pg.get("previous_websocket_failure")}markConnectionHealthy(){Pg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=aO(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),TO=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[_f,gy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=gy&&gy.isAvailable();let i=r&&!gy.previouslyFailed();if(t.webSocketOnly&&(r||ds("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[gy];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class PO{constructor(e,t,r,i,a,l,h,_,w,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=_,this.onKill_=w,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=eE("c:"+this.id+":"),this.transportManager_=new TO(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=nE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=tE("t",e),r=tE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=tE("t",e),r=tE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=tE("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Xx("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Xx("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ds("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),nE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):nE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Pg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class kO{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class OO{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class LD extends OO{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new LD}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class gn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function an(){return new gn("")}function jt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function yf(n){return n.pieces_.length-n.pieceNum_}function Nn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new gn(n.pieces_,e)}function lR(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function iE(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function VO(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new gn(e,0)}function Kn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof gn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new gn(t,0)}function Ht(n){return n.pieceNum_>=n.pieces_.length}function Ns(n,e){const t=jt(n),r=jt(e);if(null===t)return e;if(t===r)return Ns(Nn(n),Nn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Ij(n,e){const t=iE(n,0),r=iE(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Og(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function cR(n,e){if(yf(n)!==yf(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ma(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(yf(n)>yf(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class Dj{constructor(e,t){this.errorPrefix_=t,this.parts_=iE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);UO(this)}}function UO(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Fg(n))}function Fg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class dR extends OO{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new dR}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const sE=1e3;let UD,Lg=(()=>{class n extends kO{constructor(t,r,i,a,l,h,_,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=_,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=eE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=sE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");dR.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&LD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,k.Pz)(l)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new k.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:h=>{const _=h.d;"ok"===h.s?(this.onDataUpdate_(i.p,_,!1,null),r.resolve(_)):r.reject(_)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[l];void 0===h||a!==h||(delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+l+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(l),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const _={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,_=>{const w=_.d,D=_.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",_),"ok"!==D&&this.removeListen_(i,a),t.onComplete&&t.onComplete(D,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();ds(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,h=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Xx("Unrecognized action received from server: "+(0,k.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=sE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=sE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=sE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ye.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let _=!1,w=null;const D=function(){w?w.close():(_=!0,a())};t.realtime_={close:D,sendRequest:function(V){(0,k.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(V)}};const N=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[V,j]=yield Promise.all([t.authTokenProvider_.getToken(N),t.appCheckTokenProvider_.getToken(N)]);_?Ii("getToken() completed but was canceled"):(Ii("getToken() completed. Creating connection."),t.authToken_=V&&V.accessToken,t.appCheckToken_=j&&j.token,w=new PO(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,fe=>{ds(fe+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(V){t.log_("Failed to get token: "+V),_||(t.repoInfo_.nodeAdmin&&ds(V),D())}}})()}interrupt(t){Ii("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ii("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=sE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>eR(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new gn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Ii("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ii("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Qx.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=LD.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class zt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new zt(e,t)}}class VD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new zt(vd,e),i=new zt(vd,t);return 0!==this.compare(r,i)}minPost(){return zt.MIN}}class HO extends VD{static get __EMPTY_NODE(){return UD}static set __EMPTY_NODE(e){UD=e}compare(e,t){return Og(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return zt.MIN}maxPost(){return new zt(Jl,UD)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new zt(e,UD)}toString(){return".key"}}const Xl=new HO;class BD{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let fR,Nu=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:oo.EMPTY_NODE,this.right=null!=l?l:oo.EMPTY_NODE}copy(t,r,i,a,l){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=l?l:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return oo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return oo.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class oo{constructor(e,t=oo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new oo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Nu.BLACK,null,null))}remove(e){return new oo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Nu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new BD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new BD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new BD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new BD(this.root_,null,this.comparator_,!0,e)}}function kj(n,e){return Og(n.name,e.name)}function hR(n,e){return Og(n,e)}oo.EMPTY_NODE=new class Pj{copy(e,t,r,i,a){return this}insert(e,t,r){return new Nu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const $O=function(n){return"number"==typeof n?"number:"+uO(n):"string:"+n},GO=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===fR||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===fR||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let WO,qO,zO,my=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),GO(this.priorityNode_)}static set __childrenNodeConstructor(t){WO=t}static get __childrenNodeConstructor(){return WO}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Ht(t)?this:".priority"===jt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=jt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===yf(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Nn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+$O(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?uO(this.value_):this.value_,this.lazyHash_=iO(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(a>=0,"Unknown leaf type: "+r),(0,k.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Vn=new class Vj extends VD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Og(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return zt.MIN}maxPost(){return new zt(Jl,new my("[PRIORITY-POST]",zO))}makePost(e,t){const r=qO(e);return new zt(t,new my("[PRIORITY-POST]",r))}toString(){return".priority"}},Uj=Math.log(2);class Bj{constructor(e){this.count=parseInt(Math.log(e+1)/Uj,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const jD=function(n,e,t,r){n.sort(e);const i=function(_,w){const D=w-_;let S,N;if(0===D)return null;if(1===D)return S=n[_],N=t?t(S):S,new Nu(N,S.node,Nu.BLACK,null,null);{const V=parseInt(D/2,10)+_,j=i(_,V),fe=i(V+1,w);return S=n[V],N=t?t(S):S,new Nu(N,S.node,Nu.BLACK,j,fe)}},h=function(_){let w=null,D=null,S=n.length;const N=function(j,fe){const Me=S-j,nt=S;S-=j;const lt=i(Me+1,nt),ut=n[Me],ot=t?t(ut):ut;V(new Nu(ot,ut.node,fe,null,lt))},V=function(j){w?(w.left=j,w=j):(D=j,w=j)};for(let j=0;j<_.count;++j){const fe=_.nextBitIsOne(),Me=Math.pow(2,_.count-(j+1));fe?N(Me,Nu.BLACK):(N(Me,Nu.BLACK),N(Me,Nu.RED))}return D}(new Bj(n.length));return new oo(r||e,h)};let pR;const _y={};class wd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(_y&&Vn,"ChildrenNode.ts has not been loaded"),pR=pR||new wd({".priority":_y},{".priority":Vn}),pR}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof oo?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==Xl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(zt.Wrap);let h,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();h=i?jD(r,e.getCompare()):_y;const _=e.toString(),w=Object.assign({},this.indexSet_);w[_]=e;const D=Object.assign({},this.indexes_);return D[_]=h,new wd(D,w)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,a)=>{const l=(0,k.DV)(this.indexSet_,a);if((0,k.hu)(l,"Missing index implementation for "+a),i===_y){if(l.isDefinedOn(e.node)){const h=[],_=t.getIterator(zt.Wrap);let w=_.getNext();for(;w;)w.name!==e.name&&h.push(w),w=_.getNext();return h.push(e),jD(h,l.getCompare())}return _y}{const h=t.get(e.name);let _=i;return h&&(_=_.remove(new zt(e.name,h))),_.insert(e,e.node)}});return new wd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===_y)return i;{const a=t.get(e.name);return a?i.remove(new zt(e.name,a)):i}});return new wd(r,this.indexSet_)}}let oE,kt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&GO(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return oE||(oE=new n(new oo(hR),null,wd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||oE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?oE:r}}getChild(t){const r=jt(t);return null===r?this:this.getImmediateChild(r).getChild(Nn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new zt(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?oE:this.priorityNode_;return new n(a,h,l)}}updateChild(t,r){const i=jt(t);if(null===i)return r;{(0,k.hu)(".priority"!==jt(t)||1===yf(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Nn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(Vn,(h,_)=>{r[h]=_.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):l=!1}),!t&&l&&a<2*i){const h=[];for(const _ in r)h[_]=r[_];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+$O(this.getPriority().val())+":"),this.forEachChild(Vn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":iO(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new zt(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new zt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new zt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,zt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,zt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===aE?-1:0}withIndex(t){if(t===Xl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Xl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Vn),a=r.getIterator(Vn);let l=i.getNext(),h=a.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=a.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===Xl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const aE=new class jj extends kt{constructor(){super(new oo(hR),kt.EMPTY_NODE,wd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return kt.EMPTY_NODE}isEmpty(){return!1}};function or(n,e=null){if(null===n)return kt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new my(n,or(e));if(n instanceof Array){let t=kt.EMPTY_NODE;return Di(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const a=or(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(or(e))}{const t=[];let r=!1;if(Di(n,(l,h)=>{if("."!==l.substring(0,1)){const _=or(h);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new zt(l,_)))}}),0===t.length)return kt.EMPTY_NODE;const a=jD(t,kj,l=>l.name,hR);if(r){const l=jD(t,Vn.getCompare());return new kt(a,or(e),new wd({".priority":l},{".priority":Vn}))}return new kt(a,or(e),wd.Default)}}Object.defineProperties(zt,{MIN:{value:new zt(vd,kt.EMPTY_NODE)},MAX:{value:new zt(Jl,aE)}}),HO.__EMPTY_NODE=kt.EMPTY_NODE,my.__childrenNodeConstructor=kt,function Oj(n){fR=n}(aE),function Lj(n){zO=n}(aE),function Fj(n){qO=n}(or);class gR extends VD{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!Ht(e)&&".priority"!==jt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Og(e.name,t.name):a}makePost(e,t){const r=or(e),i=kt.EMPTY_NODE.updateChild(this.indexPath_,r);return new zt(t,i)}maxPost(){const e=kt.EMPTY_NODE.updateChild(this.indexPath_,aE);return new zt(Jl,e)}toString(){return iE(this.indexPath_,0).join("/")}}const mR=new class $j extends VD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Og(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return zt.MIN}maxPost(){return zt.MAX}makePost(e,t){const r=or(e);return new zt(t,r)}toString(){return".value"}},yy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Gj=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=yy.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=yy.charAt(e[i]);return(0,k.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),YO=function(n){if(n===""+tR)return"-";const e=kD(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Jl;const a=yy.charAt(yy.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},QO=function(n){if(n===""+lO)return vd;const e=kD(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+tR:(delete t[t.length-1],t.join("")):(t[t.length-1]=yy.charAt(yy.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function JO(n){return{type:"value",snapshotNode:n}}function vy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function uE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function lE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class yR{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(uE(t,h)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(vy(t,r)):l.trackChildChange(lE(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Vn,(i,a)=>{t.hasChild(i)||r.trackChildChange(uE(i,a))}),t.isLeafNode()||t.forEachChild(Vn,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(lE(i,a,l))}else r.trackChildChange(vy(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?kt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class cE{constructor(e){this.indexedFilter_=new yR(e.getIndex()),this.index_=e.getIndex(),this.startPost_=cE.getStartPost_(e),this.endPost_=cE.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new zt(t,r))||(r=kt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=kt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(kt.EMPTY_NODE);const a=this;return t.forEachChild(Vn,(l,h)=>{a.matches(new zt(l,h))||(i=i.updateImmediateChild(l,kt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class qj{constructor(e){this.rangedFilter_=new cE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new zt(t,r))||(r=kt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=kt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=kt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const h=a.getNext();let _;if(_=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!_)break;i=i.updateImmediateChild(h.name,h.node),l++}}else{let a,l,h,_;if(i=t.withIndex(this.index_),i=i.updatePriority(kt.EMPTY_NODE),this.reverse_){_=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();h=(N,V)=>S(V,N)}else _=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let w=0,D=!1;for(;_.hasNext();){const S=_.getNext();!D&&h(a,S)<=0&&(D=!0),D&&w<this.limit_&&h(S,l)<=0?w++:i=i.updateImmediateChild(S.name,kt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(N,V)=>S(V,N)}else l=this.index_.getCompare();const h=e;(0,k.hu)(h.numChildren()===this.limit_,"");const _=new zt(t,r),w=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),D=this.rangedFilter_.matches(_);if(h.hasChild(t)){const S=h.getImmediateChild(t);let N=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=N&&(N.name===t||h.hasChild(N.name));)N=i.getChildAfterChild(this.index_,N,this.reverse_);const V=null==N?1:l(N,_);if(D&&!r.isEmpty()&&V>=0)return null!=a&&a.trackChildChange(lE(t,r,S)),h.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(uE(t,S));const fe=h.updateImmediateChild(t,kt.EMPTY_NODE);return null!=N&&this.rangedFilter_.matches(N)?(null!=a&&a.trackChildChange(vy(N.name,N.node)),fe.updateImmediateChild(N.name,N.node)):fe}}return r.isEmpty()?e:D&&l(w,_)>=0?(null!=a&&(a.trackChildChange(uE(w.name,w.node)),a.trackChildChange(vy(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(w.name,kt.EMPTY_NODE)):e}}class HD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Vn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:vd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Jl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Vn}copy(){const e=new HD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function vR(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function wR(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function $D(n,e){const t=n.copy();return t.index_=e,t}function XO(n){const e={};if(n.isDefault())return e;let t;return n.index_===Vn?t="$priority":n.index_===mR?t="$value":n.index_===Xl?t="$key":((0,k.hu)(n.index_ instanceof gR,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Pz)(t),n.startSet_&&(e.startAt=(0,k.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,k.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,k.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,k.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function e1(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Vn&&(e.i=n.index_.toString()),e}class GD extends kO{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=eE("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=GD.getListenId_(e,r),h={};this.listens_[l]=h;const _=XO(e._queryParams);this.restRequest_(a+".json",_,(w,D)=>{let S=D;if(404===w&&(S=null,w=null),null===w&&this.onDataUpdate_(a,S,!1,r),(0,k.DV)(this.listens_,l)===h){let N;N=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(N,null)}})}unlisten(e,t){const r=GD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=XO(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(a,l)=>{let h=l;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let _=null;if(h.status>=200&&h.status<300){try{_=(0,k.cI)(h.responseText)}catch(w){ds("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,_)}else 401!==h.status&&404!==h.status&&ds("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class Jj{constructor(){this.rootNode_=kt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function WD(){return{value:null,children:new Map}}function wy(n,e,t){if(Ht(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=jt(e);n.children.has(r)||n.children.set(r,WD()),wy(n.children.get(r),e=Nn(e),t)}}function ER(n,e){if(Ht(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Vn,(r,i)=>{wy(n,new gn(r),i)}),ER(n,e)}}if(n.children.size>0){const t=jt(e);return e=Nn(e),n.children.has(t)&&ER(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function CR(n,e,t){null!==n.value?t(e,n.value):function Xj(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{CR(i,new gn(e.toString()+"/"+r),t)})}class eH{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Di(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class rH{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new eH(e);const r=1e4+2e4*Math.random();nE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Di(e,(i,a)=>{a>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),nE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Na=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Na||(Na={})),Na))();function DR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class qD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Na.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Ht(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new gn(e));return new qD(an(),t,this.revert)}}return(0,k.hu)(jt(this.path)===e,"operationForChild called for unrelated child."),new qD(Nn(this.path),this.affectedTree,this.revert)}}class dE{constructor(e,t){this.source=e,this.path=t,this.type=Na.LISTEN_COMPLETE}operationForChild(e){return Ht(this.path)?new dE(this.source,an()):new dE(this.source,Nn(this.path))}}class Vg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Na.OVERWRITE}operationForChild(e){return Ht(this.path)?new Vg(this.source,an(),this.snap.getImmediateChild(e)):new Vg(this.source,Nn(this.path),this.snap)}}class Ey{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Na.MERGE}operationForChild(e){if(Ht(this.path)){const t=this.children.subtree(new gn(e));return t.isEmpty()?null:t.value?new Vg(this.source,an(),t.value):new Ey(this.source,an(),t)}return(0,k.hu)(jt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ey(this.source,Nn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class vf{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ht(e))return this.isFullyInitialized()&&!this.filtered_;const t=jt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class iH{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function hE(n,e,t,r,i,a){const l=r.filter(h=>h.type===t);l.sort((h,_)=>function aH(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new zt(e.childName,e.snapshotNode),i=new zt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,_)),l.forEach(h=>{const _=function oH(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(w=>{w.respondsTo(h.type)&&e.push(w.createEvent(_,n.query_))})})}function zD(n,e){return{eventCache:n,serverCache:e}}function fE(n,e,t,r){return zD(new vf(e,t,r),n.serverCache)}function n1(n,e,t,r){return zD(n.eventCache,new vf(e,t,r))}function KD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ug(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let TR;class Un{constructor(e,t=(()=>(TR||(TR=new oo(W2)),TR))()){this.value=e,this.children=t}static fromObject(e){let t=new Un(null);return Di(e,(r,i)=>{t=t.set(new gn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:an(),value:this.value};if(Ht(e))return null;{const r=jt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Nn(e),t);return null!=a?{path:Kn(new gn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ht(e))return this;{const t=jt(e),r=this.children.get(t);return null!==r?r.subtree(Nn(e)):new Un(null)}}set(e,t){if(Ht(e))return new Un(t,this.children);{const r=jt(e),a=(this.children.get(r)||new Un(null)).set(Nn(e),t),l=this.children.insert(r,a);return new Un(this.value,l)}}remove(e){if(Ht(e))return this.children.isEmpty()?new Un(null):new Un(null,this.children);{const t=jt(e),r=this.children.get(t);if(r){const i=r.remove(Nn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Un(null):new Un(this.value,a)}return this}}get(e){if(Ht(e))return this.value;{const t=jt(e),r=this.children.get(t);return r?r.get(Nn(e)):null}}setTree(e,t){if(Ht(e))return t;{const r=jt(e),a=(this.children.get(r)||new Un(null)).setTree(Nn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Un(this.value,l)}}fold(e){return this.fold_(an(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Kn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,an(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Ht(e))return null;{const a=jt(e),l=this.children.get(a);return l?l.findOnPath_(Nn(e),Kn(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,an(),t)}foreachOnPath_(e,t,r){if(Ht(e))return this;{this.value&&r(t,this.value);const i=jt(e),a=this.children.get(i);return a?a.foreachOnPath_(Nn(e),Kn(t,i),r):new Un(null)}}foreach(e){this.foreach_(an(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Kn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Pu{constructor(e){this.writeTree_=e}static empty(){return new Pu(new Un(null))}}function pE(n,e,t){if(Ht(e))return new Pu(new Un(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=Ns(i,e);return a=a.updateChild(l,t),new Pu(n.writeTree_.set(i,a))}{const i=new Un(t),a=n.writeTree_.setTree(e,i);return new Pu(a)}}}function SR(n,e,t){let r=n;return Di(t,(i,a)=>{r=pE(r,Kn(e,i),a)}),r}function r1(n,e){if(Ht(e))return Pu.empty();{const t=n.writeTree_.setTree(e,new Un(null));return new Pu(t)}}function AR(n,e){return null!=Bg(n,e)}function Bg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ns(t.path,e)):null}function i1(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Vn,(r,i)=>{e.push(new zt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new zt(r,i.value))}),e}function wf(n,e){if(Ht(e))return n;{const t=Bg(n,e);return new Pu(null!=t?new Un(t):n.writeTree_.subtree(e))}}function xR(n){return n.writeTree_.isEmpty()}function Cy(n,e){return s1(an(),n.writeTree_,e)}function s1(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,k.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=s1(Kn(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Kn(n,".priority"),r)),t}}function ZD(n,e){return c1(e,n)}function fH(n,e){if(n.snap)return Ma(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ma(Kn(n.path,t),e))return!0;return!1}function gH(n){return n.visible}function o1(n,e,t){let r=Pu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let h;if(a.snap)Ma(t,l)?(h=Ns(t,l),r=pE(r,h,a.snap)):Ma(l,t)&&(h=Ns(l,t),r=pE(r,an(),a.snap.getChild(h)));else{if(!a.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(Ma(t,l))h=Ns(t,l),r=SR(r,h,a.children);else if(Ma(l,t))if(h=Ns(l,t),Ht(h))r=SR(r,an(),a.children);else{const _=(0,k.DV)(a.children,jt(h));if(_){const w=_.getChild(Nn(h));r=pE(r,an(),w)}}}}}return r}function a1(n,e,t,r,i){if(r||i){const a=wf(n.visibleWrites,e);return!i&&xR(a)?t:i||null!=t||AR(a,an())?Cy(o1(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(Ma(w.path,e)||Ma(e,w.path))},e),t||kt.EMPTY_NODE):null}{const a=Bg(n.visibleWrites,e);if(null!=a)return a;{const l=wf(n.visibleWrites,e);return xR(l)?t:null!=t||AR(l,an())?Cy(l,t||kt.EMPTY_NODE):null}}}function YD(n,e,t,r){return a1(n.writeTree,n.treePath,e,t,r)}function RR(n,e){return function mH(n,e,t){let r=kt.EMPTY_NODE;const i=Bg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Vn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=wf(n.visibleWrites,e);return t.forEachChild(Vn,(l,h)=>{const _=Cy(wf(a,new gn(l)),h);r=r.updateImmediateChild(l,_)}),i1(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return i1(wf(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function u1(n,e,t,r){return function _H(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Kn(e,t);if(AR(n.visibleWrites,a))return null;{const l=wf(n.visibleWrites,a);return xR(l)?i.getChild(t):Cy(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function QD(n,e){return function vH(n,e){return Bg(n.visibleWrites,e)}(n.writeTree,Kn(n.treePath,e))}function MR(n,e,t){return function yH(n,e,t,r){const i=Kn(e,t),a=Bg(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Cy(wf(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function l1(n,e){return c1(Kn(n.treePath,e),n.writeTree)}function c1(n,e){return{treePath:n,writeTree:e}}class bH{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,lE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,uE(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,vy(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,lE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const d1=new class IH{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class NR{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new vf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return MR(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ug(this.viewCache_),a=function CH(n,e,t,r,i,a){return function wH(n,e,t,r,i,a,l){let h;const _=wf(n.visibleWrites,e),w=Bg(_,an());if(null!=w)h=w;else{if(null==t)return[];h=Cy(_,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const D=[],S=l.getCompare(),N=a?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let V=N.getNext();for(;V&&D.length<i;)0!==S(V,r)&&D.push(V),V=N.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function h1(n,e,t,r,i,a){const l=e.eventCache;if(null!=QD(r,t))return e;{let h,_;if(Ht(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=Ug(e),S=RR(r,w instanceof kt?w:kt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const w=YD(r,Ug(e));h=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=jt(t);if(".priority"===w){(0,k.hu)(1===yf(t),"Can't have a priority with additional path components");const D=l.getNode();_=e.serverCache.getNode();const S=u1(r,t,D,_);h=null!=S?n.filter.updatePriority(D,S):l.getNode()}else{const D=Nn(t);let S;if(l.isCompleteForChild(w)){_=e.serverCache.getNode();const N=u1(r,t,l.getNode(),_);S=null!=N?l.getNode().getImmediateChild(w).updateChild(D,N):l.getNode().getImmediateChild(w)}else S=MR(r,w,e.serverCache);h=null!=S?n.filter.updateChild(l.getNode(),w,S,D,i,a):l.getNode()}}return fE(e,h,l.isFullyInitialized()||Ht(t),n.filter.filtersNodes())}}function JD(n,e,t,r,i,a,l,h){const _=e.serverCache;let w;const D=l?n.filter:n.filter.getIndexedFilter();if(Ht(t))w=D.updateFullNode(_.getNode(),r,null);else if(D.filtersNodes()&&!_.isFiltered()){const V=_.getNode().updateChild(t,r);w=D.updateFullNode(_.getNode(),V,null)}else{const V=jt(t);if(!_.isCompleteForPath(t)&&yf(t)>1)return e;const j=Nn(t),Me=_.getNode().getImmediateChild(V).updateChild(j,r);w=".priority"===V?D.updatePriority(_.getNode(),Me):D.updateChild(_.getNode(),V,Me,j,d1,null)}const S=n1(e,w,_.isFullyInitialized()||Ht(t),D.filtersNodes());return h1(n,S,t,i,new NR(i,S,a),h)}function PR(n,e,t,r,i,a,l){const h=e.eventCache;let _,w;const D=new NR(i,e,a);if(Ht(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,l),_=fE(e,w,!0,n.filter.filtersNodes());else{const S=jt(t);if(".priority"===S)w=n.filter.updatePriority(e.eventCache.getNode(),r),_=fE(e,w,h.isFullyInitialized(),h.isFiltered());else{const N=Nn(t),V=h.getNode().getImmediateChild(S);let j;if(Ht(N))j=r;else{const fe=D.getCompleteChild(S);j=null!=fe?".priority"===lR(N)&&fe.getChild(VO(N)).isEmpty()?fe:fe.updateChild(N,r):kt.EMPTY_NODE}_=V.equals(j)?e:fE(e,n.filter.updateChild(h.getNode(),S,j,N,D,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return _}function f1(n,e){return n.eventCache.isCompleteForChild(e)}function p1(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function kR(n,e,t,r,i,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,_=e;w=Ht(t)?r:new Un(null).setTree(t,r);const D=e.serverCache.getNode();return w.children.inorderTraversal((S,N)=>{if(D.hasChild(S)){const j=p1(0,e.serverCache.getNode().getImmediateChild(S),N);_=JD(n,_,new gn(S),j,i,a,l,h)}}),w.children.inorderTraversal((S,N)=>{const V=!e.serverCache.isCompleteForChild(S)&&void 0===N.value;if(!D.hasChild(S)&&!V){const fe=p1(0,e.serverCache.getNode().getImmediateChild(S),N);_=JD(n,_,new gn(S),fe,i,a,l,h)}}),_}class PH{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new yR(r.getIndex()),a=function zj(n){return n.loadsAllData()?new yR(n.getIndex()):n.hasLimit()?new qj(n):new cE(n)}(r);this.processor_=function DH(n){return{filter:n}}(a);const l=t.serverCache,h=t.eventCache,_=i.updateFullNode(kt.EMPTY_NODE,l.getNode(),null),w=a.updateFullNode(kt.EMPTY_NODE,h.getNode(),null),D=new vf(_,l.isFullyInitialized(),i.filtersNodes()),S=new vf(w,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=zD(S,D),this.eventGenerator_=new iH(this.query_)}get query(){return this.query_}}function FH(n,e){const t=Ug(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Ht(e)&&!t.getImmediateChild(jt(e)).isEmpty())?t.getChild(e):null}function g1(n){return 0===n.eventRegistrations_.length}function m1(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function _1(n,e,t,r){e.type===Na.MERGE&&null!==e.source.queryId&&((0,k.hu)(Ug(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(KD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function SH(n,e,t,r,i){const a=new bH;let l,h;if(t.type===Na.OVERWRITE){const w=t;w.source.fromUser?l=PR(n,e,w.path,w.snap,r,i,a):((0,k.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered()&&!Ht(w.path),l=JD(n,e,w.path,w.snap,r,i,h,a))}else if(t.type===Na.MERGE){const w=t;w.source.fromUser?l=function xH(n,e,t,r,i,a,l){let h=e;return r.foreach((_,w)=>{const D=Kn(t,_);f1(e,jt(D))&&(h=PR(n,h,D,w,i,a,l))}),r.foreach((_,w)=>{const D=Kn(t,_);f1(e,jt(D))||(h=PR(n,h,D,w,i,a,l))}),h}(n,e,w.path,w.children,r,i,a):((0,k.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered(),l=kR(n,e,w.path,w.children,r,i,h,a))}else if(t.type===Na.ACK_USER_WRITE){const w=t;l=w.revert?function NH(n,e,t,r,i,a){let l;if(null!=QD(r,t))return e;{const h=new NR(r,e,i),_=e.eventCache.getNode();let w;if(Ht(t)||".priority"===jt(t)){let D;if(e.serverCache.isFullyInitialized())D=YD(r,Ug(e));else{const S=e.serverCache.getNode();(0,k.hu)(S instanceof kt,"serverChildren would be complete if leaf node"),D=RR(r,S)}D=D,w=n.filter.updateFullNode(_,D,a)}else{const D=jt(t);let S=MR(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=_.getImmediateChild(D)),w=null!=S?n.filter.updateChild(_,D,S,Nn(t),h,a):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(_,D,kt.EMPTY_NODE,Nn(t),h,a):_,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=YD(r,Ug(e)),l.isLeafNode()&&(w=n.filter.updateFullNode(w,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=QD(r,an()),fE(e,w,l,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function RH(n,e,t,r,i,a,l){if(null!=QD(i,t))return e;const h=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(Ht(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return JD(n,e,t,_.getNode().getChild(t),i,a,h,l);if(Ht(t)){let w=new Un(null);return _.getNode().forEachChild(Xl,(D,S)=>{w=w.set(new gn(D),S)}),kR(n,e,t,w,i,a,h,l)}return e}{let w=new Un(null);return r.foreach((D,S)=>{const N=Kn(t,D);_.isCompleteForPath(N)&&(w=w.set(D,_.getNode().getChild(N)))}),kR(n,e,t,w,i,a,h,l)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==Na.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);l=function MH(n,e,t,r,i){const a=e.serverCache;return h1(n,n1(e,a.getNode(),a.isFullyInitialized()||Ht(t),a.isFiltered()),t,r,d1,i)}(n,e,t.path,r,a)}const _=a.getChanges();return function AH(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=KD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(JO(KD(e)))}}(e,l,_),{viewCache:l,changes:_}}(n.processor_,i,e,t,r);return function TH(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,k.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,y1(n,a.changes,a.viewCache.eventCache.getNode(),null)}function y1(n,e,t,r){return function sH(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function Wj(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),hE(n,i,"child_removed",e,r,t),hE(n,i,"child_added",e,r,t),hE(n,i,"child_moved",a,r,t),hE(n,i,"child_changed",e,r,t),hE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let XD,tT;class v1{constructor(){this.views=new Map}}function OR(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,k.hu)(null!=a,"SyncTree gave us an op for an invalid query."),_1(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(_1(l,e,t,r));return a}}function w1(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=YD(t,i?r:null),_=!1;h?_=!0:r instanceof kt?(h=RR(t,r),_=!1):(h=kt.EMPTY_NODE,_=!1);const w=zD(new vf(h,_,!1),new vf(r,i,!1));return new PH(e,w)}return l}function E1(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Ef(n,e){let t=null;for(const r of n.views.values())t=t||FH(r,e);return t}function C1(n,e){return e._queryParams.loadsAllData()?eT(n):n.views.get(e._queryIdentifier)}function b1(n,e){return null!=C1(n,e)}function Cf(n){return null!=eT(n)}function eT(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let qH=1;class I1{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Un(null),this.pendingWriteTree_=function EH(){return{visibleWrites:Pu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function FR(n,e,t,r,i){return function lH(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=pE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?by(n,new Vg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function bf(n,e,t=!1){const r=function dH(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function hH(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&fH(h,r.path)?i=!1:Ma(r.path,h.path)&&(a=!0)),l--}return!!i&&(a?(function pH(n){n.visibleWrites=o1(n.allWrites,gH,an()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=r1(n.visibleWrites,r.path):Di(r.children,_=>{n.visibleWrites=r1(n.visibleWrites,Kn(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let a=new Un(null);return null!=r.snap?a=a.set(an(),!0):Di(r.children,l=>{a=a.set(new gn(l),!0)}),by(n,new qD(r.path,a,t))}return[]}function gE(n,e,t){return by(n,new Vg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function LR(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let l=[];if(a&&("default"===e._queryIdentifier||b1(a,e))){const h=function $H(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const h=Cf(n);if("default"===i)for(const[_,w]of n.views.entries())l=l.concat(m1(w,t,r)),g1(w)&&(n.views.delete(_),w.query._queryParams.loadsAllData()||a.push(w.query));else{const _=n.views.get(i);_&&(l=l.concat(m1(_,t,r)),g1(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||a.push(_.query)))}return h&&!Cf(n)&&a.push(new(function BH(){return(0,k.hu)(XD,"Reference.ts has not been loaded"),XD}())(e._repo,e._path)),{removed:a,events:l}}(a,e,t,r);(function jH(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const _=h.removed;l=h.events;const w=-1!==_.findIndex(S=>S._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(i,(S,N)=>Cf(N));if(w&&!D){const S=n.syncPointTree_.subtree(i);if(!S.isEmpty()){const N=function e$(n){return n.fold((e,t,r)=>{if(t&&Cf(t))return[eT(t)];{let i=[];return t&&(i=E1(t)),Di(r,(a,l)=>{i=i.concat(l)}),i}})}(S);for(let V=0;V<N.length;++V){const j=N[V],fe=j.query,Me=A1(n,j);n.listenProvider_.startListening(mE(fe),rT(n,fe),Me.hashFn,Me.onComplete)}}}!D&&_.length>0&&!r&&(w?n.listenProvider_.stopListening(mE(e),null):_.forEach(S=>{const N=n.queryToTagMap.get(iT(S));n.listenProvider_.stopListening(mE(S),N)})),function t$(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=iT(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,_)}return l}function D1(n,e,t){const r=e._path;let i=null,a=!1;n.syncPointTree_.foreachOnPath(r,(S,N)=>{const V=Ns(S,r);i=i||Ef(N,V),a=a||Cf(N)});let h,l=n.syncPointTree_.get(r);l?(a=a||Cf(l),i=i||Ef(l,an())):(l=new v1,n.syncPointTree_=n.syncPointTree_.set(r,l)),null!=i?h=!0:(h=!1,i=kt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((N,V)=>{const j=Ef(V,an());j&&(i=i.updateImmediateChild(N,j))}));const _=b1(l,e);if(!_&&!e._queryParams.loadsAllData()){const S=iT(e);(0,k.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const N=function n$(){return qH++}();n.queryToTagMap.set(S,N),n.tagToQueryMap.set(N,S)}let D=function HH(n,e,t,r,i,a){const l=w1(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function LH(n,e){n.eventRegistrations_.push(e)}(l,t),function VH(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Vn,(a,l)=>{r.push(vy(a,l))}),t.isFullyInitialized()&&r.push(JO(t.getNode())),y1(n,r,t.getNode(),e)}(l,t)}(l,e,t,ZD(n.pendingWriteTree_,r),i,h);if(!_&&!a){const S=C1(l,e);D=D.concat(function r$(n,e,t){const r=e._path,i=rT(n,e),a=A1(n,t),l=n.listenProvider_.startListening(mE(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!Cf(h.value),"If we're adding a query, it shouldn't be shadowed");else{const _=h.fold((w,D,S)=>{if(!Ht(w)&&D&&Cf(D))return[eT(D).query];{let N=[];return D&&(N=N.concat(E1(D).map(V=>V.query))),Di(S,(V,j)=>{N=N.concat(j)}),N}});for(let w=0;w<_.length;++w){const D=_[w];n.listenProvider_.stopListening(mE(D),rT(n,D))}}return l}(n,e,S))}return D}function nT(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,h)=>{const w=Ef(h,Ns(l,e));if(w)return w});return a1(i,e,a,t,!0)}function by(n,e){return T1(e,n.syncPointTree_,null,ZD(n.pendingWriteTree_,an()))}function T1(n,e,t,r){if(Ht(n.path))return S1(n,e,t,r);{const i=e.get(an());null==t&&null!=i&&(t=Ef(i,an()));let a=[];const l=jt(n.path),h=n.operationForChild(l),_=e.children.get(l);if(_&&h){const w=t?t.getImmediateChild(l):null,D=l1(r,l);a=a.concat(T1(h,_,w,D))}return i&&(a=a.concat(OR(i,n,r,t))),a}}function S1(n,e,t,r){const i=e.get(an());null==t&&null!=i&&(t=Ef(i,an()));let a=[];return e.children.inorderTraversal((l,h)=>{const _=t?t.getImmediateChild(l):null,w=l1(r,l),D=n.operationForChild(l);D&&(a=a.concat(S1(D,h,_,w)))}),i&&(a=a.concat(OR(i,n,r,t))),a}function A1(n,e){const t=e.query,r=rT(n,t);return{hashFn:()=>(function kH(n){return n.viewCache_.serverCache.getNode()}(e)||kt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function YH(n,e,t){const r=VR(n,t);if(r){const i=UR(r),a=i.path,l=i.queryId,h=Ns(a,e);return BR(n,a,new dE(DR(l),h))}return[]}(n,t._path,r):function ZH(n,e){return by(n,new dE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function K2(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return LR(n,t,null,a)}}}}function rT(n,e){const t=iT(e);return n.queryToTagMap.get(t)}function iT(n){return n._path.toString()+"$"+n._queryIdentifier}function VR(n,e){return n.tagToQueryMap.get(e)}function UR(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new gn(n.substr(0,e))}}function BR(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),OR(r,t,ZD(n.pendingWriteTree_,e),null)}function mE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function WH(){return(0,k.hu)(tT,"Reference.ts has not been loaded"),tT}())(n._repo,n._path):n}class jR{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new jR(t)}node(){return this.node_}}class HR{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Kn(this.path_,e);return new HR(this.syncTree_,t)}node(){return nT(this.syncTree_,this.path_)}}const x1=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?s$(n[".sv"],e,t):"object"==typeof n[".sv"]?o$(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},s$=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},o$=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},R1=function(n,e,t,r){return GR(e,new HR(t,n),r)},$R=function(n,e,t){return GR(n,new jR(e),t)};function GR(n,e,t){const r=n.getPriority().val(),i=x1(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,h=x1(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new my(h,or(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new my(i))),l.forEachChild(Vn,(h,_)=>{const w=GR(_,e.getImmediateChild(h),t);w!==_&&(a=a.updateImmediateChild(h,w))}),a}}class WR{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function sT(n,e){let t=e instanceof gn?e:new gn(e),r=n,i=jt(t);for(;null!==i;){const a=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new WR(i,r,a),t=Nn(t),i=jt(t)}return r}function jg(n){return n.node.value}function qR(n,e){n.node.value=e,zR(n)}function M1(n){return n.node.childCount>0}function oT(n,e){Di(n.node.children,(t,r)=>{e(new WR(t,n,r))})}function N1(n,e,t,r){t&&!r&&e(n),oT(n,i=>{N1(i,e,!0,r)}),t&&r&&e(n)}function _E(n){return new gn(null===n.parent?n.name:_E(n.parent)+"/"+n.name)}function zR(n){null!==n.parent&&function l$(n,e,t){const r=function a$(n){return void 0===jg(n)&&!M1(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,zR(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,zR(n))}(n.parent,n.name,n)}const c$=/[\[\].#$\/\u0000-\u001F\u007F]/,d$=/[\[\].#$\u0000-\u001F\u007F]/,KR=10485760,aT=function(n){return"string"==typeof n&&0!==n.length&&!c$.test(n)},P1=function(n){return"string"==typeof n&&0!==n.length&&!d$.test(n)},yE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!PD(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},ec=function(n,e,t,r){r&&void 0===e||vE((0,k.gK)(n,"value"),e,t)},vE=function(n,e,t){const r=t instanceof gn?new Dj(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Fg(r));if("function"==typeof e)throw new Error(n+"contains a function "+Fg(r)+" with contents = "+e.toString());if(PD(e))throw new Error(n+"contains "+e.toString()+" "+Fg(r));if("string"==typeof e&&e.length>KR/3&&(0,k.ug)(e)>KR)throw new Error(n+"contains a string greater than "+KR+" utf8 bytes "+Fg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Di(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!aT(l)))throw new Error(n+" contains an invalid key ("+l+") "+Fg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Tj(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),UO(n)})(r,l),vE(n,h,r),function Sj(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Fg(r)+" in addition to actual children.")}},k1=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Di(e,(l,h)=>{const _=new gn(l);if(vE(i,h,Kn(t,_)),".priority"===lR(_)&&!yE(h))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=iE(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!aT(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Ij);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Ma(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},ZR=function(n,e,t){if(!t||void 0!==e){if(PD(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!yE(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},wE=function(n,e,t,r){if(!(r&&void 0===t||aT(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},EE=function(n,e,t,r){if(!(r&&void 0===t||P1(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Pa=function(n,e){if(".info"===jt(e))throw new Error(n+" failed = Can't modify data under /.info/")},O1=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!aT(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),P1(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class g${constructor(){this.eventLists_=[],this.recursionDepth_=0}}function uT(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!cR(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function YR(n,e,t){uT(n,t),F1(n,r=>cR(r,e))}function ka(n,e,t){uT(n,t),F1(n,r=>Ma(r,e)||Ma(e,r))}function F1(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(m$(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function m$(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();kg&&Ii("event: "+t.toString()),py(r)}}}const L1="repo_interrupt";class y${constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new g$,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=WD(),this.transactionQueueTree_=new WR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function V1(n){const t=n.infoData_.getNode(new gn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function CE(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:V1(n)})}function U1(n,e,t,r,i){n.dataUpdateCount++;const a=new gn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const _=(0,k.UI)(t,w=>or(w));l=function JH(n,e,t,r){const i=VR(n,r);if(i){const a=UR(i),l=a.path,h=a.queryId,_=Ns(l,e),w=Un.fromObject(t);return BR(n,l,new Ey(DR(h),_,w))}return[]}(n.serverSyncTree_,a,_,i)}else{const _=or(t);l=function QH(n,e,t,r){const i=VR(n,r);if(null!=i){const a=UR(i),l=a.path,h=a.queryId,_=Ns(l,e);return BR(n,l,new Vg(DR(h),_,t))}return[]}(n.serverSyncTree_,a,_,i)}else if(r){const _=(0,k.UI)(t,w=>or(w));l=function KH(n,e,t){const r=Un.fromObject(t);return by(n,new Ey({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,_)}else{const _=or(t);l=gE(n.serverSyncTree_,a,_)}let h=a;l.length>0&&(h=Dy(n,a)),ka(n.eventQueue_,h,l)}function B1(n,e){QR(n,"connected",e),!1===e&&function b$(n){Iy(n,"onDisconnectEvents");const e=CE(n),t=WD();CR(n.onDisconnect_,an(),(i,a)=>{const l=R1(i,a,n.serverSyncTree_,e);wy(t,i,l)});let r=[];CR(t,an(),(i,a)=>{r=r.concat(gE(n.serverSyncTree_,i,a));const l=tM(n,i);Dy(n,l)}),n.onDisconnect_=WD(),ka(n.eventQueue_,an(),r)}(n)}function QR(n,e,t){const r=new gn("/.info/"+e),i=or(t);n.infoData_.updateSnapshot(r,i);const a=gE(n.infoSyncTree_,r,i);ka(n.eventQueue_,r,a)}function lT(n){return n.nextWriteId_++}function JR(n,e,t,r,i){Iy(n,"set",{path:e.toString(),value:t,priority:r});const a=CE(n),l=or(t,r),h=nT(n.serverSyncTree_,e),_=$R(l,h,a),w=lT(n),D=FR(n.serverSyncTree_,e,_,w,!0);uT(n.eventQueue_,D),n.server_.put(e.toString(),l.val(!0),(N,V)=>{const j="ok"===N;j||ds("set at "+e+" failed: "+N);const fe=bf(n.serverSyncTree_,w,!j);ka(n.eventQueue_,e,fe),If(0,i,N,V)});const S=tM(n,e);Dy(n,S),ka(n.eventQueue_,S,[])}function I$(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&ER(n.onDisconnect_,e),If(0,t,r,i)})}function j1(n,e,t,r){const i=or(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&wy(n.onDisconnect_,e,i),If(0,r,a,l)})}function XR(n,e,t){let r;r=".info"===jt(e._path)?LR(n.infoSyncTree_,e,t):LR(n.serverSyncTree_,e,t),YR(n.eventQueue_,e._path,r)}function H1(n){n.persistentConnection_&&n.persistentConnection_.interrupt(L1)}function Iy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ii(t,...e)}function If(n,e,t,r){e&&py(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function eM(n,e,t){return nT(n.serverSyncTree_,e,t)||kt.EMPTY_NODE}function cT(n,e=n.transactionQueueTree_){if(e||dT(n,e),jg(e)){const t=G1(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function R$(n,e,t){const r=t.map(w=>w.currentWriteId),i=eM(n,e,r);let a=i;const l=i.hash();for(let w=0;w<t.length;w++){const D=t[w];(0,k.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=Ns(e,D.path);a=a.updateChild(S,D.currentOutputSnapshotRaw)}const h=a.val(!0),_=e;n.server_.put(_.toString(),h,w=>{Iy(n,"transaction put response",{path:_.toString(),status:w});let D=[];if("ok"===w){const S=[];for(let N=0;N<t.length;N++)t[N].status=2,D=D.concat(bf(n.serverSyncTree_,t[N].currentWriteId)),t[N].onComplete&&S.push(()=>t[N].onComplete(null,!0,t[N].currentOutputSnapshotResolved)),t[N].unwatcher();dT(n,sT(n.transactionQueueTree_,e)),cT(n,n.transactionQueueTree_),ka(n.eventQueue_,e,D);for(let N=0;N<S.length;N++)py(S[N])}else{if("datastale"===w)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{ds("transaction at "+_.toString()+" failed: "+w);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=w}Dy(n,e)}},l)}(n,_E(e),t)}else M1(e)&&oT(e,t=>{cT(n,t)})}function Dy(n,e){const t=$1(n,e),r=_E(t);return function M$(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const _=e[h],w=Ns(t,_.path);let S,D=!1;if((0,k.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)D=!0,S=_.abortReason,i=i.concat(bf(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)D=!0,S="maxretry",i=i.concat(bf(n.serverSyncTree_,_.currentWriteId,!0));else{const N=eM(n,_.path,l);_.currentInputSnapshot=N;const V=e[h].update(N.val());if(void 0!==V){vE("transaction failed: Data returned ",V,_.path);let j=or(V);"object"==typeof V&&null!=V&&(0,k.r3)(V,".priority")||(j=j.updatePriority(N.getPriority()));const Me=_.currentWriteId,nt=CE(n),lt=$R(j,N,nt);_.currentOutputSnapshotRaw=j,_.currentOutputSnapshotResolved=lt,_.currentWriteId=lT(n),l.splice(l.indexOf(Me),1),i=i.concat(FR(n.serverSyncTree_,_.path,lt,_.currentWriteId,_.applyLocally)),i=i.concat(bf(n.serverSyncTree_,Me,!0))}else D=!0,S="nodata",i=i.concat(bf(n.serverSyncTree_,_.currentWriteId,!0))}ka(n.eventQueue_,t,i),i=[],D&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}dT(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)py(r[h]);cT(n,n.transactionQueueTree_)}(n,G1(n,t),r),r}function $1(n,e){let t,r=n.transactionQueueTree_;for(t=jt(e);null!==t&&void 0===jg(r);)r=sT(r,t),t=jt(e=Nn(e));return r}function G1(n,e){const t=[];return W1(n,e,t),t.sort((r,i)=>r.order-i.order),t}function W1(n,e,t){const r=jg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);oT(e,i=>{W1(n,i,t)})}function dT(n,e){const t=jg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,qR(e,t.length>0?t:void 0)}oT(e,r=>{dT(n,r)})}function tM(n,e){const t=_E($1(n,e)),r=sT(n.transactionQueueTree_,e);return function u$(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{nM(n,i)}),nM(n,r),N1(r,i=>{nM(n,i)}),t}function nM(n,e){const t=jg(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,k.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,k.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(bf(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?qR(e,void 0):t.length=a+1,ka(n.eventQueue_,_E(e),i);for(let l=0;l<r.length;l++)py(r[l])}}const rM=function(n,e){const t=k$(n),r=t.namespace;return"firebase.com"===t.domain&&Ql(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Ql("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ds("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new rR(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new gn(t.pathString)}},k$=function(n){let e="",t="",r="",i="",a="",l=!0,h="https",_=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(h=n.substring(0,w-1),n=n.substring(w+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(i=function N$(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(D,S)));const N=function P$(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ds(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));w=e.indexOf(":"),w>=0?(l="https"===h||"wss"===h,_=parseInt(e.substring(w+1),10)):w=e.length;const V=e.slice(0,w);if("localhost"===V.toLowerCase())t="localhost";else if(V.split(".").length<=2)t=V;else{const j=e.indexOf(".");r=e.substring(0,j).toLowerCase(),t=e.substring(j+1),a=r}"ns"in N&&(a=N.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:a}};class q1{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Pz)(this.snapshot.exportVal())}}class z1{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class K1{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Z1{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return I$(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Pa("OnDisconnect.remove",this._path);const e=new k.BH;return j1(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Pa("OnDisconnect.set",this._path),ec("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return j1(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Pa("OnDisconnect.setWithPriority",this._path),ec("OnDisconnect.setWithPriority",e,this._path,!1),ZR("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function D$(n,e,t,r,i){const a=or(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,h)=>{"ok"===l&&wy(n.onDisconnect_,e,a),If(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Pa("OnDisconnect.update",this._path),k1("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function T$(n,e,t,r){if((0,k.xb)(t))return Ii("onDisconnect().update() called with empty data.  Don't do anything."),void If(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Di(t,(l,h)=>{const _=or(h);wy(n.onDisconnect_,Kn(e,l),_)}),If(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class ao{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Ht(this._path)?null:lR(this._path)}get ref(){return new Oa(this._repo,this._path)}get _queryIdentifier(){const e=e1(this._queryParams),t=eR(e);return"{}"===t?"default":t}get _queryObject(){return e1(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof ao))return!1;const t=this._repo===e._repo,r=cR(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function bj(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function hT(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Df(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Xl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==vd)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Jl)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Vn){if(null!=e&&!yE(e)||null!=t&&!yE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof gR||n.getIndex()===mR,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function fT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Oa extends ao{constructor(e,t){super(e,t,new HD,!1)}get parent(){const e=VO(this._path);return null===e?null:new Oa(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Hg{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new gn(e),r=$g(this.ref,e);return new Hg(this._node.getChild(t),r,Vn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Hg(i,$g(this.ref,r),Vn)))}hasChild(e){const t=new gn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Y1(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?$g(n._root,e):n._root}function Q1(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=rM(e,n._repo.repoInfo_.nodeAdmin);O1("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Ql("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Y1(n,t.path.toString())}function $g(n,e){return null===jt((n=(0,k.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),EE("child","path",t,!1)):EE("child","path",e,!1),new Oa(n._repo,Kn(n._path,e));var t}function iM(n,e){n=(0,k.m9)(n),Pa("set",n._path),ec("set",e,n._path,!1);const t=new k.BH;return JR(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function U$(n,e){k1("update",e,n._path,!1);const t=new k.BH;return function C$(n,e,t,r){Iy(n,"update",{path:e.toString(),value:t});let i=!0;const a=CE(n),l={};if(Di(t,(h,_)=>{i=!1,l[h]=R1(Kn(e,h),or(_),n.serverSyncTree_,a)}),i)Ii("update() called with empty data.  Don't do anything."),If(0,r,"ok",void 0);else{const h=lT(n),_=function zH(n,e,t,r){!function cH(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=SR(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Un.fromObject(t);return by(n,new Ey({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);uT(n.eventQueue_,_),n.server_.merge(e.toString(),t,(w,D)=>{const S="ok"===w;S||ds("update at "+e+" failed: "+w);const N=bf(n.serverSyncTree_,h,!S),V=N.length>0?Dy(n,e):e;ka(n.eventQueue_,V,N),If(0,r,w,D)}),Di(t,w=>{const D=tM(n,Kn(e,w));Dy(n,D)}),ka(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function B$(n){return function E$(n,e){const t=function XH(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,D)=>{const S=Ns(w,t);r=r||Ef(D,S)});let i=n.syncPointTree_.get(t);i?r=r||Ef(i,an()):(i=new v1,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new vf(r,!0,!1):null;return function OH(n){return KD(n.viewCache_)}(w1(i,e,ZD(n.pendingWriteTree_,e._path),a?l.getNode():kt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=or(r).withIndex(e._queryParams.getIndex()),a=gE(n.serverSyncTree_,e._path,i);return YR(n.eventQueue_,e._path,a),Promise.resolve(i)},r=>(Iy(n,"get for query "+(0,k.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,k.m9)(n))._repo,n).then(e=>new Hg(e,new Oa(n._repo,n._path),n._queryParams.getIndex()))}class pT{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new q1("value",this,new Hg(e.snapshotNode,new Oa(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new z1(this,e,t):null}matches(e){return e instanceof pT&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class gT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new z1(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=$g(new Oa(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new q1(e.type,this,new Hg(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof gT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function bE(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const _=t,w=(D,S)=>{XR(n._repo,n,h),_(D,S)};w.userCallback=t.userCallback,w.context=t.context,t=w}const l=new K1(t,a||void 0),h="value"===e?new pT(l):new gT(e,l);return function S$(n,e,t){let r;r=".info"===jt(e._path)?D1(n.infoSyncTree_,e,t):D1(n.serverSyncTree_,e,t),YR(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>XR(n._repo,n,h)}function sM(n,e,t,r){return bE(n,"value",e,t,r)}function J1(n,e,t,r){return bE(n,"child_added",e,t,r)}function X1(n,e,t,r){return bE(n,"child_changed",e,t,r)}function eF(n,e,t,r){return bE(n,"child_moved",e,t,r)}function tF(n,e,t,r){return bE(n,"child_removed",e,t,r)}function nF(n,e,t){let r=null;const i=t?new K1(t):null;"value"===e?r=new pT(i):e&&(r=new gT(e,i)),XR(n._repo,n,r)}class ku{}class rF extends ku{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ec("endAt",this._value,e._path,!0);const t=wR(e._queryParams,this._value,this._key);if(fT(t),Df(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ao(e._repo,e._path,t,e._orderByCalled)}}class H$ extends ku{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ec("endBefore",this._value,e._path,!1);const t=function Qj(n,e,t){let r,i;return n.index_===Xl?("string"==typeof e&&(e=QO(e)),i=wR(n,e,t)):(r=null==t?vd:QO(t),i=wR(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(fT(t),Df(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ao(e._repo,e._path,t,e._orderByCalled)}}class iF extends ku{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ec("startAt",this._value,e._path,!0);const t=vR(e._queryParams,this._value,this._key);if(fT(t),Df(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ao(e._repo,e._path,t,e._orderByCalled)}}class W$ extends ku{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ec("startAfter",this._value,e._path,!1);const t=function Yj(n,e,t){let r;if(n.index_===Xl)"string"==typeof e&&(e=YO(e)),r=vR(n,e,t);else{let i;i=null==t?Jl:YO(t),r=vR(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(fT(t),Df(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ao(e._repo,e._path,t,e._orderByCalled)}}class z$ extends ku{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ao(e._repo,e._path,function Kj(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class Z$ extends ku{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ao(e._repo,e._path,function Zj(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class Q$ extends ku{constructor(e){super(),this._path=e}_apply(e){hT(e,"orderByChild");const t=new gn(this._path);if(Ht(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new gR(t),i=$D(e._queryParams,r);return Df(i),new ao(e._repo,e._path,i,!0)}}class X$ extends ku{_apply(e){hT(e,"orderByKey");const t=$D(e._queryParams,Xl);return Df(t),new ao(e._repo,e._path,t,!0)}}class tG extends ku{_apply(e){hT(e,"orderByPriority");const t=$D(e._queryParams,Vn);return Df(t),new ao(e._repo,e._path,t,!0)}}class rG extends ku{_apply(e){hT(e,"orderByValue");const t=$D(e._queryParams,mR);return Df(t),new ao(e._repo,e._path,t,!0)}}class sG extends ku{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(ec("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new rF(this._value,this._key)._apply(new iF(this._value,this._key)._apply(e))}}function Ou(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function UH(n){(0,k.hu)(!XD,"__referenceConstructor has already been defined"),XD=n})(Oa),function GH(n){(0,k.hu)(!tT,"__referenceConstructor has already been defined"),tT=n}(Oa);const oM={};function oF(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Ql("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ii("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,w,l=rM(a,i),h=l.repoInfo;"undefined"!=typeof process&&process.env&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(_=!0,a=`http://${w}?ns=${h.namespace}`,l=rM(a,i),h=l.repoInfo):_=!l.repoInfo.secure;const D=i&&_?new rE(rE.OWNER):new J2(n.name,n.options,e);O1("Invalid Firebase Database URL",l),Ht(l.path)||Ql("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function cG(n,e,t,r){let i=oM[e.name];i||(i={},oM[e.name]=i);let a=i[n.toURLString()];return a&&Ql("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new y$(n,false,t,r),i[n.toURLString()]=a,a}(h,n,D,new Q2(n.name,t));return new hG(S,n)}class hG{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function v$(n,e,t){if(n.stats_=oR(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new GD(n.repoInfo_,(r,i,a,l)=>{U1(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>B1(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Lg(n.repoInfo_,e,(r,i,a,l)=>{U1(n,r,i,a,l)},r=>{B1(n,r)},r=>{!function w$(n,e){Di(e,(t,r)=>{QR(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function tj(n,e){const t=n.toString();return sR[t]||(sR[t]=e()),sR[t]}(n.repoInfo_,()=>new rH(n.stats_,n.server_)),n.infoData_=new Jj,n.infoSyncTree_=new I1({startListening:(r,i,a,l)=>{let h=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(h=gE(n.infoSyncTree_,r._path,_),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),QR(n,"connected",!1),n.serverSyncTree_=new I1({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(h,_)=>{const w=l(h,_);ka(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Oa(this._repo,an())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function lG(n,e){const t=oM[e];(!t||t[n.key]!==n)&&Ql(`Database ${e}(${n.repoInfo_}) has already been deleted.`),H1(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ql("Cannot call "+e+" on a deleted database.")}}function aF(){TO.IS_TRANSPORT_INITIALIZED&&ds("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function fG(){aF(),_f.forceDisallow()}function pG(){aF(),gy.forceDisallow(),_f.forceAllow()}function yG(n,e){oO(n,e)}const wG={".sv":"timestamp"};class bG{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Lg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Lg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function vG(n){tO(Ri.SDK_VERSION),(0,Ri._registerComponent)(new Xs.wA("database",(e,{instanceIdentifier:t})=>oF(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Ri.registerVersion)(Xk,"0.13.0",n),(0,Ri.registerVersion)(Xk,"0.13.0","esm2017")}();const SG=new Oo.Yd("@firebase/database-compat"),uF=function(n){SG.warn("FIREBASE WARNING: "+n)};class RG{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,uF("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class MG{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Tf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),EE("DataSnapshot.child","path",e,!1),new Tf(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),EE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Tf(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new Go(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ui{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const l=Ui.getCancelAndContextArgs_("Query.on",r,i),h=(w,D)=>{t.call(l.context,new Tf(this.database,w),D)};h.userCallback=t,h.context=l.context;const _=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return sM(this._delegate,h,_),t;case"child_added":return J1(this._delegate,h,_),t;case"child_removed":return tF(this._delegate,h,_),t;case"child_changed":return X1(this._delegate,h,_),t;case"child_moved":return eF(this._delegate,h,_),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,nF(this._delegate,e,i)}else nF(this._delegate,e)}get(){return B$(this._delegate).then(e=>new Tf(this.database,e))}once(e,t,r,i){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const a=Ui.getCancelAndContextArgs_("Query.once",r,i),l=new k.BH,h=(w,D)=>{const S=new Tf(this.database,w);t&&t.call(a.context,S,D),l.resolve(S)};h.userCallback=t,h.context=a.context;const _=w=>{a.cancel&&a.cancel.call(a.context,w),l.reject(w)};switch(e){case"value":sM(this._delegate,h,_,{onlyOnce:!0});break;case"child_added":J1(this._delegate,h,_,{onlyOnce:!0});break;case"child_removed":tF(this._delegate,h,_,{onlyOnce:!0});break;case"child_changed":X1(this._delegate,h,_,{onlyOnce:!0});break;case"child_moved":eF(this._delegate,h,_,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new Ui(this.database,Ou(this._delegate,function K$(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new z$(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new Ui(this.database,Ou(this._delegate,function Y$(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Z$(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new Ui(this.database,Ou(this._delegate,function J$(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return EE("orderByChild","path",n,!1),new Q$(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new Ui(this.database,Ou(this._delegate,function eG(){return new X$}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new Ui(this.database,Ou(this._delegate,function nG(){return new tG}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new Ui(this.database,Ou(this._delegate,function iG(){return new rG}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new Ui(this.database,Ou(this._delegate,function G$(n=null,e){return wE("startAt","key",e,!0),new iF(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new Ui(this.database,Ou(this._delegate,function q$(n,e){return wE("startAfter","key",e,!0),new W$(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new Ui(this.database,Ou(this._delegate,function j$(n,e){return wE("endAt","key",e,!0),new rF(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new Ui(this.database,Ou(this._delegate,function $$(n,e){return wE("endBefore","key",e,!0),new H$(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new Ui(this.database,Ou(this._delegate,function oG(n,e){return wE("equalTo","key",e,!0),new sG(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Ui))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,k.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Go(this.database,new Oa(this._delegate._repo,this._delegate._path))}}class Go extends Ui{constructor(e,t){super(e,new ao(t._repo,t._path,new HD,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Go(this.database,$g(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Go(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new Go(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=iM(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,uF("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Pa("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=U$(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function V$(n,e,t){if(Pa("setWithPriority",n._path),ec("setWithPriority",e,n._path,!1),ZR("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return JR(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function F$(n){return Pa("remove",n._path),iM(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function IG(n,e,t){var r;if(n=(0,k.m9)(n),Pa("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new k.BH,h=sM(n,()=>{});return function x$(n,e,t,r,i,a){Iy(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:rO(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=eM(n,e,void 0);l.currentInputSnapshot=h;const _=l.update(h.val());if(void 0===_)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{vE("transaction failed: Data returned ",_,l.path),l.status=0;const w=sT(n.transactionQueueTree_,e),D=jg(w)||[];let S;D.push(l),qR(w,D),"object"==typeof _&&null!==_&&(0,k.r3)(_,".priority")?(S=(0,k.DV)(_,".priority"),(0,k.hu)(yE(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(nT(n.serverSyncTree_,e)||kt.EMPTY_NODE).getPriority().val();const N=CE(n),V=or(_,S),j=$R(V,h,N);l.currentOutputSnapshotRaw=V,l.currentOutputSnapshotResolved=j,l.currentWriteId=lT(n);const fe=FR(n.serverSyncTree_,e,j,l.currentWriteId,l.applyLocally);ka(n.eventQueue_,e,fe),cT(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,w,D)=>{let S=null;_?a.reject(_):(S=new Hg(D,new Oa(n._repo,n._path),Vn),a.resolve(new bG(w,S)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new MG(a.committed,new Tf(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function L$(n,e){n=(0,k.m9)(n),Pa("setPriority",n._path),ZR("setPriority",e,!1);const t=new k.BH;return JR(n._repo,Kn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function O$(n,e){n=(0,k.m9)(n),Pa("push",n._path),ec("push",e,n._path,!0);const t=V1(n._repo),r=Gj(t),i=$g(n,r),a=$g(n,r);let l;return l=null!=e?iM(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Go(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new Go(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Pa("Reference.onDisconnect",this._delegate._path),new RG(new Z1(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class IE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:fG,forceLongPolling:pG}}useEmulator(e,t,r={}){!function gG(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ql("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ql('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new rE(rE.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);a=new rE(l)}!function uG(n,e,t,r){n.repoInfo_=new rR(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof Go){const t=Q1(this._delegate,e.toString());return new Go(this,t)}{const t=Y1(this._delegate,e);return new Go(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=Q1(this._delegate,e);return new Go(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function mG(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),H1(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function _G(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function A$(n){n.persistentConnection_&&n.persistentConnection_.resume(L1)}(n._repo)}(this._delegate)}}IE.ServerValue={TIMESTAMP:function EG(){return wG}(),increment:n=>function CG(n){return{".sv":{increment:n}}}(n)};var PG=Object.freeze({__proto__:null,initStandalone:function NG({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){tO(t);const l=new Xs.zt("auth-internal",new Xs.H0("database-standalone"));return l.setComponent(new Xs.wA("auth-internal",()=>r,"PRIVATE")),{instance:new IE(oF(n,l,void 0,e,a),n),namespace:i}}});const kG=IE.ServerValue;function lF(n){return null==n}function cF(n){return"function"==typeof n.set}function dF(n,e){return cF(e)?e:n.ref(e)}function hF(n,e){if(function FG(n){return"string"==typeof n}(n))return e.stringCase();if(cF(n))return e.firebaseCase();if(function LG(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function DE(n,e,t="on",r=Pm.z){return new wn.y(i=>{let a=null;return a=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,_t.U)(i=>{const{snapshot:a,prevKey:l}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:l,key:h}}),(0,pN.B)())}function fF(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function BG(n,e){const{payload:t,prevKey:r,key:i}=e,a=fF(n,i),l=function UG(n,e){if(lF(e))return 0;{const t=fF(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(_=>{const w={payload:_,type:"value",prevKey:h,key:_.key};return h=_.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function pF(n){return(lF(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function gF(n,e,t){return function VG(n,e,t){return DE(n,"value","once",t).pipe(En(r=>{const i=[tt(r)];return e.forEach(a=>i.push(DE(n,a,"on",t))),(0,LA.T)(...i).pipe(fi(BG,[]))}),ov())}(n,e=pF(e),t)}function mF(n,e,t){const r=(e=pF(e)).map(i=>DE(n,i,"on",t));return(0,LA.T)(...r)}function _F(n,e){return function(r,i){return hF(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function GG(n){return function(t){return t?hF(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function yF(n,e){return function(){return DE(n,"value","on",e)}}!function OG(n){n.INTERNAL.registerComponent(new Xs.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new IE(i,r)},"PUBLIC").setServiceProps({Reference:Go,Query:Ui,Database:IE,DataSnapshot:Tf,enableLogging:yG,INTERNAL:PG,ServerValue:kG}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.0")}(km.Z);const zG=new p.OlP("angularfire2.realtimeDatabaseURL"),KG=new p.OlP("angularfire2.database.use-emulator");let ZG=(()=>{class n{constructor(t,r,i,a,l,h,_,w,D,S,N,V,j,fe,Me){this.schedulers=h;const nt=_,lt=(0,fr.on)(t,l,r);w&&ux(lt,l,D,N,V,j,S,fe),this.database=(0,fr.cc)(`${lt.name}.database.${i}`,"AngularFireDatabase",lt.name,()=>{const ut=l.runOutsideAngular(()=>lt.database(i||void 0));return nt&&ut.useEmulator(...nt),ut},[nt])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>dF(this.database,t));let a=i;return r&&(a=r(i)),function WG(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:_F(r,"update"),set:_F(r,"set"),push:i=>r.push(i),remove:GG(r),snapshotChanges:i=>gF(n,i,t).pipe(Xt.iC),stateChanges:i=>mF(n,i,t).pipe(Xt.iC),auditTrail:i=>function jG(n,e,t){return function $G(n,e,t){return function HG(n,e){return DE(n,"value","on",e).pipe((0,_t.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function U2(...n){const e=(0,sa.jO)(n);return(0,jn.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),h=!1;for(let _=0;_<i;_++)(0,Eo.Xf)(n[_]).subscribe((0,pn.x)(r,w=>{a[_]=w,!h&&!l[_]&&(l[_]=!0,(h=l.every(hi.y))&&(l=null))},V2.Z));t.subscribe((0,pn.x)(r,_=>{if(h){const w=[_,...a];r.next(e?e(...w):w)}}))})}(e),(0,_t.U)(([i,a])=>{const l=i.lastKeyToLoad,h=a.map(_=>_.key);return{actions:a,lastKeyToLoad:l,loadedKeys:h}}),function B2(n){return(0,jn.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,pn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,_t.U)(i=>i.actions))}(n,mF(n,e).pipe(fi((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(Xt.iC),valueChanges:(i,a)=>gF(n,i,t).pipe((0,_t.U)(h=>h.map(_=>a&&a.idField?Object.assign(Object.assign({},_.payload.val()),{[a.idField]:_.key}):_.payload.val())),Xt.iC)}}(a,this)}object(t){return function qG(n,e){return{query:n,snapshotChanges:()=>yF(n,e.schedulers.outsideAngular)().pipe(Xt.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>yF(n,e.schedulers.outsideAngular)().pipe(Xt.iC,(0,_t.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>dF(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(fr.Dh),p.LFG(fr.xv,8),p.LFG(zG,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Xt.HU),p.LFG(KG,8),p.LFG(H0,8),p.LFG(nx,8),p.LFG(rx,8),p.LFG(ix,8),p.LFG(sx,8),p.LFG(ox,8),p.LFG(ax,8),p.LFG(j0,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),YG=(()=>{class n{constructor(){uD.Z.registerVersion("angularfire",Xt.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[ZG]}),n})();const vF_firebase={apiKey:"AIzaSyARNfl2ZTmnK7oLcwJVYOEmyKOU-jJlnak",authDomain:"ads-website-502e3.firebaseapp.com",projectId:"ads-website-502e3",storageBucket:"ads-website-502e3.appspot.com",messagingSenderId:"184968533750",appId:"1:184968533750:web:87a01bab97d5d16f557ed7",measurementId:"G-C7YJWK2CNJ"};let QG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n,bootstrap:[zU]}),n.\u0275inj=p.cJS({providers:[xg],imports:[[Ya,qU,pk,fr.hO.initializeApp(vF_firebase),mV,IV,L2,YG,VV,kU]]}),n})();(0,p.G48)(),Zu().bootstrapModule(QG).catch(n=>console.error(n))},5867:(Xe,Ee,O)=>{O.d(Ee,{Mq:()=>p.getApp,C6:()=>p.getApps});var p=O(9681);(0,p.registerVersion)("firebase","9.8.1","app")},127:(Xe,Ee,O)=>{O.d(Ee,{Z:()=>p.Z});var p=O(3942);p.Z.registerVersion("firebase","9.8.1","app-compat")},7092:(Xe,Ee,O)=>{O.r(Ee);var p=O(5861),ee=O(3942),F=O(2090),ue=O(9681),ie=O(655),me=O(1877),le=O(4859);const ke=function We(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Be=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pe=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),qe=new me.Yd("@firebase/auth");function Qe(y,...f){qe.logLevel<=me.in.ERROR&&qe.error(`Auth (${ue.SDK_VERSION}): ${y}`,...f)}function Se(y,...f){throw He(y,...f)}function be(y,...f){return He(y,...f)}function Ie(y,f,m){const E=Object.assign(Object.assign({},Be()),{[f]:m});return new F.LL("auth","Firebase",E).create(f,{appName:y.name})}function je(y,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&Se(y,"argument-error"),Ie(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function He(y,...f){if("string"!=typeof y){const m=f[0],E=[...f.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(m,...E)}return pe.create(y,...f)}function G(y,f,...m){if(!y)throw He(f,...m)}function Ce(y){const f="INTERNAL ASSERTION FAILED: "+y;throw Qe(f),new Error(f)}function Y(y,f){y||Ce(f)}const se=new Map;function te(y){Y(y instanceof Function,"Expected a class definition");let f=se.get(y);return f?(Y(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,se.set(y,f),f)}function Oe(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function dt(){return"http:"===Ut()||"https:"===Ut()}function Ut(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Jt{constructor(f,m){this.shortDelay=f,this.longDelay=m,Y(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function Ot(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(dt()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Pn(y,f){Y(y.emulator,"Emulator should always be set here");const{url:m}=y.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class tn{static initialize(f,m,E){this.fetchImpl=f,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ce("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ce("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ce("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Zt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},xr=new Jt(3e4,6e4);function $t(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Ft(y,f,m,E){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,p.Z)(function*(y,f,m,E,A={}){return ii(y,A,(0,p.Z)(function*(){let P={},Z={};E&&("GET"===f?Z=E:P={body:JSON.stringify(E)});const ge=(0,F.xO)(Object.assign({key:y.config.apiKey},Z)).slice(1),Ve=yield y._getAdditionalHeaders();return Ve["Content-Type"]="application/json",y.languageCode&&(Ve["X-Firebase-Locale"]=y.languageCode),tn.fetch()(Ps(y,y.config.apiHost,m,ge),Object.assign({method:f,headers:Ve,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function ii(y,f,m){return yr.apply(this,arguments)}function yr(){return(yr=(0,p.Z)(function*(y,f,m){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},Zt),f);try{const A=new Wr(y),P=yield Promise.race([m(),A.promise]);A.clearNetworkTimeout();const Z=yield P.json();if("needConfirmation"in Z)throw Hi(y,"account-exists-with-different-credential",Z);if(P.ok&&!("errorMessage"in Z))return Z;{const ge=P.ok?Z.errorMessage:Z.error.message,[Ve,Ze]=ge.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ve)throw Hi(y,"credential-already-in-use",Z);if("EMAIL_EXISTS"===Ve)throw Hi(y,"email-already-in-use",Z);const yt=E[Ve]||Ve.toLowerCase().replace(/[_\s]+/g,"-");if(Ze)throw Ie(y,yt,Ze);Se(y,yt)}}catch(A){if(A instanceof F.ZR)throw A;Se(y,"network-request-failed")}})).apply(this,arguments)}function Rr(y,f,m,E){return ji.apply(this,arguments)}function ji(){return(ji=(0,p.Z)(function*(y,f,m,E,A={}){const P=yield Ft(y,f,m,E,A);return"mfaPendingCredential"in P&&Se(y,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function Ps(y,f,m,E){const A=`${f}${m}?${E}`;return y.config.emulator?Pn(y.config,A):`${y.config.apiScheme}://${A}`}class Wr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(be(this.auth,"network-request-failed")),xr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hi(y,f,m){const E={appName:y.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const A=be(y,f,E);return A.customData._tokenResponse=m,A}function si(){return(si=(0,p.Z)(function*(y,f){return Ft(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function In(y,f){return kn.apply(this,arguments)}function kn(){return(kn=(0,p.Z)(function*(y,f){return Ft(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ks(y,f){return qr.apply(this,arguments)}function qr(){return(qr=(0,p.Z)(function*(y,f){return Ft(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Zn(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function uo(){return(uo=(0,p.Z)(function*(y,f=!1){const m=(0,F.m9)(y),E=yield m.getIdToken(f),A=at(E);G(A&&A.exp&&A.auth_time&&A.iat,m.auth,"internal-error");const P="object"==typeof A.firebase?A.firebase:void 0,Z=null==P?void 0:P.sign_in_provider;return{claims:A,token:E,authTime:Zn(Bt(A.auth_time)),issuedAtTime:Zn(Bt(A.iat)),expirationTime:Zn(Bt(A.exp)),signInProvider:Z||null,signInSecondFactor:(null==P?void 0:P.sign_in_second_factor)||null}})).apply(this,arguments)}function Bt(y){return 1e3*Number(y)}function at(y){const[f,m,E]=y.split(".");if(void 0===f||void 0===m||void 0===E)return Qe("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,F.tV)(m);return A?JSON.parse(A):(Qe("Failed to decode base64 JWT payload"),null)}catch(A){return Qe("Caught error parsing JWT payload as JSON",A),null}}function vr(y,f){return ai.apply(this,arguments)}function ai(){return(ai=(0,p.Z)(function*(y,f,m=!1){if(m)return f;try{return yield f}catch(E){throw E instanceof F.ZR&&Lt(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}function Lt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class lo{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const A=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(f);this.timerId=setTimeout((0,p.Z)(function*(){yield m.iteration()}),E)}iteration(){var f=this;return(0,p.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&f.schedule(!0))}f.schedule()})()}}class wr{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zn(this.lastLoginAt),this.creationTime=Zn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Er(y){return B.apply(this,arguments)}function B(){return(B=(0,p.Z)(function*(y){var f;const m=y.auth,E=yield y.getIdToken(),A=yield vr(y,ks(m,{idToken:E}));G(null==A?void 0:A.users.length,m,"internal-error");const P=A.users[0];y._notifyReloadListener(P);const Z=(null===(f=P.providerUserInfo)||void 0===f?void 0:f.length)?q(P.providerUserInfo):[],ge=De(y.providerData,Z),yt=!!y.isAnonymous&&!(y.email&&P.passwordHash||(null==ge?void 0:ge.length)),ht={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:ge,metadata:new wr(P.createdAt,P.lastLoginAt),isAnonymous:yt};Object.assign(y,ht)})).apply(this,arguments)}function K(){return(K=(0,p.Z)(function*(y){const f=(0,F.m9)(y);yield Er(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function De(y,f){return[...y.filter(E=>!f.some(A=>A.providerId===E.providerId)),...f]}function q(y){return y.map(f=>{var{providerId:m}=f,E=(0,ie._T)(f,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Ne(){return(Ne=(0,p.Z)(function*(y,f){const m=yield ii(y,{},(0,p.Z)(function*(){const E=(0,F.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:A,apiKey:P}=y.config,Z=Ps(y,A,"/v1/token",`key=${P}`),ge=yield y._getAdditionalHeaders();return ge["Content-Type"]="application/x-www-form-urlencoded",tn.fetch()(Z,{method:"POST",headers:ge,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class et{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){G(f.idToken,"internal-error"),G(void 0!==f.idToken,"internal-error"),G(void 0!==f.refreshToken,"internal-error");const m="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function wt(y){const f=at(y);return G(f,"internal-error"),G(void 0!==f.exp,"internal-error"),G(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var E=this;return(0,p.Z)(function*(){return G(!E.accessToken||E.refreshToken,f,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(f,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var E=this;return(0,p.Z)(function*(){const{accessToken:A,refreshToken:P,expiresIn:Z}=yield function X(y,f){return Ne.apply(this,arguments)}(f,m);E.updateTokensAndExpiration(A,P,Number(Z))})()}updateTokensAndExpiration(f,m,E){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(f,m){const{refreshToken:E,accessToken:A,expirationTime:P}=m,Z=new et;return E&&(G("string"==typeof E,"internal-error",{appName:f}),Z.refreshToken=E),A&&(G("string"==typeof A,"internal-error",{appName:f}),Z.accessToken=A),P&&(G("number"==typeof P,"internal-error",{appName:f}),Z.expirationTime=P),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new et,this.toJSON())}_performRefresh(){return Ce("not implemented")}}function pt(y,f){G("string"==typeof y||void 0===y,"internal-error",{appName:f})}class bt{constructor(f){var{uid:m,auth:E,stsTokenManager:A}=f,P=(0,ie._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new wr(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,p.Z)(function*(){const E=yield vr(m,m.stsTokenManager.getToken(m.auth,f));return G(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(f){return function oi(y){return uo.apply(this,arguments)}(this,f)}reload(){return function z(y){return K.apply(this,arguments)}(this)}_assign(f){this!==f&&(G(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new bt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var E=this;return(0,p.Z)(function*(){let A=!1;f.idToken&&f.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(f),A=!0),m&&(yield Er(E)),yield E.auth._persistUserIfCurrent(E),A&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var f=this;return(0,p.Z)(function*(){const m=yield f.getIdToken();return yield vr(f,function mt(y,f){return si.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var E,A,P,Z,ge,Ve,Ze,yt;const ht=null!==(E=m.displayName)&&void 0!==E?E:void 0,Sn=null!==(A=m.email)&&void 0!==A?A:void 0,Ci=null!==(P=m.phoneNumber)&&void 0!==P?P:void 0,xc=null!==(Z=m.photoURL)&&void 0!==Z?Z:void 0,Zy=null!==(ge=m.tenantId)&&void 0!==ge?ge:void 0,wa=null!==(Ve=m._redirectEventId)&&void 0!==Ve?Ve:void 0,sh=null!==(Ze=m.createdAt)&&void 0!==Ze?Ze:void 0,oh=null!==(yt=m.lastLoginAt)&&void 0!==yt?yt:void 0,{uid:Qf,emailVerified:ah,isAnonymous:Dr,providerData:Jf,stsTokenManager:Xf}=m;G(Qf&&Xf,f,"internal-error");const uh=et.fromJSON(this.name,Xf);G("string"==typeof Qf,f,"internal-error"),pt(ht,f.name),pt(Sn,f.name),G("boolean"==typeof ah,f,"internal-error"),G("boolean"==typeof Dr,f,"internal-error"),pt(Ci,f.name),pt(xc,f.name),pt(Zy,f.name),pt(wa,f.name),pt(sh,f.name),pt(oh,f.name);const ko=new bt({uid:Qf,auth:f,email:Sn,emailVerified:ah,displayName:ht,isAnonymous:Dr,photoURL:xc,phoneNumber:Ci,tenantId:Zy,stsTokenManager:uh,createdAt:sh,lastLoginAt:oh});return Jf&&Array.isArray(Jf)&&(ko.providerData=Jf.map(ml=>Object.assign({},ml))),wa&&(ko._redirectEventId=wa),ko}static _fromIdTokenResponse(f,m,E=!1){return(0,p.Z)(function*(){const A=new et;A.updateFromServerResponse(m);const P=new bt({uid:m.localId,auth:f,stsTokenManager:A,isAnonymous:E});return yield Er(P),P})()}}const Et=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(m,E){var A=this;return(0,p.Z)(function*(){A.storage[m]=E})()}_get(m){var E=this;return(0,p.Z)(function*(){const A=E.storage[m];return void 0===A?null:A})()}_remove(m){var E=this;return(0,p.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return y.type="NONE",y})();function Hn(y,f,m){return`firebase:${y}:${f}:${m}`}class Mr{constructor(f,m,E){this.persistence=f,this.auth=m,this.userKey=E;const{config:A,name:P}=this.auth;this.fullUserKey=Hn(this.userKey,A.apiKey,P),this.fullPersistenceKey=Hn("persistence",A.apiKey,P),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,p.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?bt._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,p.Z)(function*(){if(m.persistence===f)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,E="authUser"){return(0,p.Z)(function*(){if(!m.length)return new Mr(te(Et),f,E);const A=(yield Promise.all(m.map(function(){var Ze=(0,p.Z)(function*(yt){if(yield yt._isAvailable())return yt});return function(yt){return Ze.apply(this,arguments)}}()))).filter(Ze=>Ze);let P=A[0]||te(Et);const Z=Hn(E,f.config.apiKey,f.name);let ge=null;for(const Ze of m)try{const yt=yield Ze._get(Z);if(yt){const ht=bt._fromJSON(f,yt);Ze!==P&&(ge=ht),P=Ze;break}}catch(yt){}const Ve=A.filter(Ze=>Ze._shouldAllowMigration);return P._shouldAllowMigration&&Ve.length?(P=Ve[0],ge&&(yield P._set(Z,ge.toJSON())),yield Promise.all(m.map(function(){var Ze=(0,p.Z)(function*(yt){if(yt!==P)try{yield yt._remove(Z)}catch(ht){}});return function(yt){return Ze.apply(this,arguments)}}())),new Mr(P,f,E)):new Mr(P,f,E)})()}}function Lu(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if($n(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Fa(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(hs(f))return"Blackberry";if(Gn(f))return"Webos";if(Vu(f))return"Safari";if((f.includes("chrome/")||La(f))&&!f.includes("edge/"))return"Chrome";if(Nr(f))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Fa(y=(0,F.z$)()){return/firefox\//i.test(y)}function Vu(y=(0,F.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function La(y=(0,F.z$)()){return/crios\//i.test(y)}function $n(y=(0,F.z$)()){return/iemobile/i.test(y)}function Nr(y=(0,F.z$)()){return/android/i.test(y)}function hs(y=(0,F.z$)()){return/blackberry/i.test(y)}function Gn(y=(0,F.z$)()){return/webos/i.test(y)}function zr(y=(0,F.z$)()){return/iphone|ipad|ipod/i.test(y)}function Os(y=(0,F.z$)()){return zr(y)||Nr(y)||Gn(y)||hs(y)||/windows phone/i.test(y)||$n(y)}function Wo(y,f=[]){let m;switch(y){case"Browser":m=Lu((0,F.z$)());break;case"Worker":m=`${Lu((0,F.z$)())}-${y}`;break;default:m=y}const E=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${ue.SDK_VERSION}/${E}`}class Kr{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const E=P=>new Promise((Z,ge)=>{try{Z(f(P))}catch(Ve){ge(Ve)}});E.onAbort=m,this.queue.push(E);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,p.Z)(function*(){if(m.auth.currentUser===f)return;const E=[];try{for(const A of m.queue)yield A(f),A.onAbort&&E.push(A.onAbort)}catch(A){E.reverse();for(const P of E)try{P()}catch(Z){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:A.message})}})()}}class Ke{constructor(f,m,E){this.app=f,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nn(this),this.idTokenSubscription=new nn(this),this.beforeStateQueue=new Kr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(f,m){var E=this;return m&&(this._popupRedirectResolver=te(m)),this._initializationPromise=this.queue((0,p.Z)(function*(){var A,P;if(!E._deleted&&(E.persistenceManager=yield Mr.create(E,f),!E._deleted)){if(null===(A=E._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(Z){}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(P=E.currentUser)||void 0===P?void 0:P.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,p.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,p.Z)(function*(){var E;const A=yield m.assertedPersistence.getCurrentUser();let P=A,Z=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const ge=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,Ve=null==P?void 0:P._redirectEventId,Ze=yield m.tryRedirectSignIn(f);(!ge||ge===Ve)&&(null==Ze?void 0:Ze.user)&&(P=Ze.user,Z=!0)}if(!P)return m.directlySetCurrentUser(null);if(!P._redirectEventId){if(Z)try{yield m.beforeStateQueue.runMiddleware(P)}catch(ge){P=A,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(ge))}return P?m.reloadAndSetCurrentUserOrClear(P):m.directlySetCurrentUser(null)}return G(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===P._redirectEventId?m.directlySetCurrentUser(P):m.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(f){var m=this;return(0,p.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch(A){yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,p.Z)(function*(){try{yield Er(f)}catch(E){if("auth/network-request-failed"!==E.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Je(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,p.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,p.Z)(function*(){const E=f?(0,F.m9)(f):null;return E&&G(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(f,m=!1){var E=this;return(0,p.Z)(function*(){if(!E._deleted)return f&&G(E.tenantId===f.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(f)),E.queue((0,p.Z)(function*(){yield E.directlySetCurrentUser(f),E.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,p.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,p.Z)(function*(){yield m.assertedPersistence.setPersistence(te(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new F.LL("auth","Firebase",f())}onAuthStateChanged(f,m,E){return this.registerStateListener(this.authStateSubscription,f,m,E)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,E){return this.registerStateListener(this.idTokenSubscription,f,m,E)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var E=this;return(0,p.Z)(function*(){const A=yield E.getOrInitRedirectPersistenceManager(m);return null===f?A.removeCurrentUser():A.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,p.Z)(function*(){if(!m.redirectPersistenceManager){const E=f&&te(f)||m._popupRedirectResolver;G(E,m,"argument-error"),m.redirectPersistenceManager=yield Mr.create(m,[te(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,p.Z)(function*(){var E,A;return m._isInitialized&&(yield m.queue((0,p.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===f?m._currentUser:(null===(A=m.redirectUser)||void 0===A?void 0:A._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,p.Z)(function*(){if(f===m.currentUser)return m.queue((0,p.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,E,A){if(this._deleted)return()=>{};const P="function"==typeof m?m:m.next.bind(m),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return G(Z,this,"internal-error"),Z.then(()=>P(this.currentUser)),"function"==typeof m?f.addObserver(m,E,A):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,p.Z)(function*(){m.currentUser&&m.currentUser!==f&&(m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh()),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Wo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,p.Z)(function*(){var m;const E={"X-Client-Version":f.clientVersion};f.app.options.appId&&(E["X-Firebase-gmpid"]=f.app.options.appId);const A=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return A&&(E["X-Firebase-Client"]=A),E})()}}function ct(y){return(0,F.m9)(y)}class nn{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,F.ne)(m=>this.observer=m)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function $i(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Gi(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class Ti{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return Ce("not implemented")}_getIdTokenResponse(f){return Ce("not implemented")}_linkToIdToken(f,m){return Ce("not implemented")}_getReauthenticationResolver(f){return Ce("not implemented")}}function Fn(y,f){return St.apply(this,arguments)}function St(){return(St=(0,p.Z)(function*(y,f){return Ft(y,"POST","/v1/accounts:resetPassword",$t(y,f))})).apply(this,arguments)}function qo(y,f){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,p.Z)(function*(y,f){return Ft(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Uu(y,f){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,p.Z)(function*(y,f){return Ft(y,"POST","/v1/accounts:update",$t(y,f))})).apply(this,arguments)}function ho(){return(ho=(0,p.Z)(function*(y,f){return Rr(y,"POST","/v1/accounts:signInWithPassword",$t(y,f))})).apply(this,arguments)}function Vs(y,f){return ur.apply(this,arguments)}function ur(){return(ur=(0,p.Z)(function*(y,f){return Ft(y,"POST","/v1/accounts:sendOobCode",$t(y,f))})).apply(this,arguments)}function on(y,f){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,p.Z)(function*(y,f){return Vs(y,f)})).apply(this,arguments)}function Ua(y,f){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,p.Z)(function*(y,f){return Vs(y,f)})).apply(this,arguments)}function Wi(y,f){return ju.apply(this,arguments)}function ju(){return(ju=(0,p.Z)(function*(y,f){return Vs(y,f)})).apply(this,arguments)}function Cd(y,f){return qi.apply(this,arguments)}function qi(){return(qi=(0,p.Z)(function*(y,f){return Vs(y,f)})).apply(this,arguments)}function tc(){return(tc=(0,p.Z)(function*(y,f){return Rr(y,"POST","/v1/accounts:signInWithEmailLink",$t(y,f))})).apply(this,arguments)}function bd(){return(bd=(0,p.Z)(function*(y,f){return Rr(y,"POST","/v1/accounts:signInWithEmailLink",$t(y,f))})).apply(this,arguments)}class Cr extends Ti{constructor(f,m,E,A=null){super("password",E),this._email=f,this._password=m,this._tenantId=A}static _fromEmailAndPassword(f,m){return new Cr(f,m,"password")}static _fromEmailAndCode(f,m,E=null){return new Cr(f,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,p.Z)(function*(){switch(m.signInMethod){case"password":return function Yn(y,f){return ho.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function zi(y,f){return tc.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:Se(f,"internal-error")}})()}_linkToIdToken(f,m){var E=this;return(0,p.Z)(function*(){switch(E.signInMethod){case"password":return qo(f,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Gg(y,f){return bd.apply(this,arguments)}(f,{idToken:m,email:E._email,oobCode:E._password});default:Se(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Us(y,f){return Id.apply(this,arguments)}function Id(){return(Id=(0,p.Z)(function*(y,f){return Rr(y,"POST","/v1/accounts:signInWithIdp",$t(y,f))})).apply(this,arguments)}class fs extends Ti{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new fs(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):Se("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:A}=m,P=(0,ie._T)(m,["providerId","signInMethod"]);if(!E||!A)return null;const Z=new fs(E,A);return Z.idToken=P.idToken||void 0,Z.accessToken=P.accessToken||void 0,Z.secret=P.secret,Z.nonce=P.nonce,Z.pendingToken=P.pendingToken||null,Z}_getIdTokenResponse(f){return Us(f,this.buildRequest())}_linkToIdToken(f,m){const E=this.buildRequest();return E.idToken=m,Us(f,E)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Us(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,F.xO)(m)}return f}}function qg(y,f){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,p.Z)(function*(y,f){return Ft(y,"POST","/v1/accounts:sendVerificationCode",$t(y,f))})).apply(this,arguments)}function Bs(){return(Bs=(0,p.Z)(function*(y,f){return Rr(y,"POST","/v1/accounts:signInWithPhoneNumber",$t(y,f))})).apply(this,arguments)}function Td(){return(Td=(0,p.Z)(function*(y,f){const m=yield Rr(y,"POST","/v1/accounts:signInWithPhoneNumber",$t(y,f));if(m.temporaryProof)throw Hi(y,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Kg={USER_NOT_FOUND:"user-not-found"};function Sd(){return(Sd=(0,p.Z)(function*(y,f){return Rr(y,"POST","/v1/accounts:signInWithPhoneNumber",$t(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Kg)})).apply(this,arguments)}class zo extends Ti{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new zo({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new zo({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function nc(y,f){return Bs.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function zg(y,f){return Td.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Zg(y,f){return Sd.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:E,verificationCode:A}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:E,code:A}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:E,phoneNumber:A,temporaryProof:P}=f;return E||m||A||P?new zo({verificationId:m,verificationCode:E,phoneNumber:A,temporaryProof:P}):null}}class Hu{constructor(f){var m,E,A,P,Z,ge;const Ve=(0,F.zd)((0,F.pd)(f)),Ze=null!==(m=Ve.apiKey)&&void 0!==m?m:null,yt=null!==(E=Ve.oobCode)&&void 0!==E?E:null,ht=function Sf(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Ve.mode)&&void 0!==A?A:null);G(Ze&&yt&&ht,"argument-error"),this.apiKey=Ze,this.operation=ht,this.code=yt,this.continueUrl=null!==(P=Ve.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(Z=Ve.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(ge=Ve.tenantId)&&void 0!==ge?ge:null}static parseLink(f){const m=function Ba(y){const f=(0,F.zd)((0,F.pd)(y)).link,m=f?(0,F.zd)((0,F.pd)(f)).deep_link_id:null,E=(0,F.zd)((0,F.pd)(y)).deep_link_id;return(E?(0,F.zd)((0,F.pd)(E)).link:null)||E||m||f||y}(f);try{return new Hu(m)}catch(E){return null}}}let xd=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(m,E){return Cr._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const A=Hu.parseLink(E);return G(A,"argument-error"),Cr._fromEmailAndCode(m,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class br{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class fo extends br{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Ki extends fo{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return G("providerId"in m&&"signInMethod"in m,"argument-error"),fs._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return G(f.idToken||f.accessToken,"argument-error"),fs._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Ki.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Ki.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:A,pendingToken:P,nonce:Z,providerId:ge}=f;if(!E&&!A&&!m&&!P||!ge)return null;try{return new Ki(ge)._credential({idToken:m,accessToken:E,nonce:Z,pendingToken:P})}catch(Ve){return null}}}let Ko=(()=>{class y extends fo{constructor(){super("facebook.com")}static credential(m){return fs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch(E){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Rd=(()=>{class y extends fo{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return fs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:A}=m;if(!E&&!A)return null;try{return y.credential(E,A)}catch(P){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Af=(()=>{class y extends fo{constructor(){super("github.com")}static credential(m){return fs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch(E){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class po extends Ti{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return Us(f,this.buildRequest())}_linkToIdToken(f,m){const E=this.buildRequest();return E.idToken=m,Us(f,E)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Us(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:A,pendingToken:P}=m;return E&&A&&P&&E===A?new po(E,P):null}static _create(f,m){return new po(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Pr extends br{constructor(f){G(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Pr.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Pr.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=po.fromJSON(f);return G(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:E}=f;if(!m||!E)return null;try{return po._create(E,m)}catch(A){return null}}}let Nd=(()=>{class y extends fo{constructor(){super("twitter.com")}static credential(m,E){return fs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:A}=m;if(!E||!A)return null;try{return y.credential(E,A)}catch(P){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function kr(y,f){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,p.Z)(function*(y,f){return Rr(y,"POST","/v1/accounts:signUp",$t(y,f))})).apply(this,arguments)}class ui{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,E,A=!1){return(0,p.Z)(function*(){const P=yield bt._fromIdTokenResponse(f,E,A),Z=rc(E);return new ui({user:P,providerId:Z,_tokenResponse:E,operationType:m})})()}static _forOperation(f,m,E){return(0,p.Z)(function*(){yield f._updateTokensIfNecessary(E,!0);const A=rc(E);return new ui({user:f,providerId:A,_tokenResponse:E,operationType:m})})()}}function rc(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function ic(){return(ic=(0,p.Z)(function*(y){var f;const m=ct(y);if(yield m._initializationPromise,null===(f=m.currentUser)||void 0===f?void 0:f.isAnonymous)return new ui({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield kr(m,{returnSecureToken:!0}),A=yield ui._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class Qo extends F.ZR{constructor(f,m,E,A){var P;super(m.code,m.message),this.operationType=E,this.user=A,Object.setPrototypeOf(this,Qo.prototype),this.customData={appName:f.name,tenantId:null!==(P=f.tenantId)&&void 0!==P?P:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(f,m,E,A){return new Qo(f,m,E,A)}}function sc(y,f,m,E){return("reauthenticate"===f?m._getReauthenticationResolver(y):m._getIdTokenResponse(y)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Qo._fromErrorAndOperation(y,P,f,E):P})}function Zi(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function rn(){return(rn=(0,p.Z)(function*(y,f){const m=(0,F.m9)(y);yield Yt(!0,m,f);const{providerUserInfo:E}=yield In(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),A=Zi(E||[]);return m.providerData=m.providerData.filter(P=>A.has(P.providerId)),A.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function ja(y,f){return go.apply(this,arguments)}function go(){return(go=(0,p.Z)(function*(y,f,m=!1){const E=yield vr(y,f._linkToIdToken(y.auth,yield y.getIdToken()),m);return ui._forOperation(y,"link",E)})).apply(this,arguments)}function Yt(y,f,m){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,p.Z)(function*(y,f,m){yield Er(f);const A=!1===y?"provider-already-linked":"no-such-provider";G(Zi(f.providerData).has(m)===y,f.auth,A)})).apply(this,arguments)}function $u(y,f){return js.apply(this,arguments)}function js(){return(js=(0,p.Z)(function*(y,f,m=!1){const{auth:E}=y,A="reauthenticate";try{const P=yield vr(y,sc(E,A,f,y),m);G(P.idToken,E,"internal-error");const Z=at(P.idToken);G(Z,E,"internal-error");const{sub:ge}=Z;return G(y.uid===ge,E,"user-mismatch"),ui._forOperation(y,A,P)}catch(P){throw"auth/user-not-found"===(null==P?void 0:P.code)&&Se(E,"user-mismatch"),P}})).apply(this,arguments)}function lr(y,f){return oc.apply(this,arguments)}function oc(){return(oc=(0,p.Z)(function*(y,f,m=!1){const E="signIn",A=yield sc(y,E,f),P=yield ui._fromIdTokenResponse(y,E,A);return m||(yield y._updateCurrentUser(P.user)),P})).apply(this,arguments)}function vn(y,f){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,p.Z)(function*(y,f){return lr(ct(y),f)})).apply(this,arguments)}function cr(y,f){return mo.apply(this,arguments)}function mo(){return(mo=(0,p.Z)(function*(y,f){const m=(0,F.m9)(y);return yield Yt(!1,m,f.providerId),ja(m,f)})).apply(this,arguments)}function ps(y,f){return $a.apply(this,arguments)}function $a(){return($a=(0,p.Z)(function*(y,f){return $u((0,F.m9)(y),f)})).apply(this,arguments)}function Si(y,f){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,p.Z)(function*(y,f){return Rr(y,"POST","/v1/accounts:signInWithCustomToken",$t(y,f))})).apply(this,arguments)}function gt(){return(gt=(0,p.Z)(function*(y,f){const m=ct(y),E=yield Si(m,{token:f,returnSecureToken:!0}),A=yield ui._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class Xo{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?Gu._fromServerResponse(f,m):Se(f,"internal-error")}}class Gu extends Xo{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new Gu(m)}}function Ga(y,f,m){var E;G((null===(E=m.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),G(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(G(m.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(G(m.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function Wa(){return(Wa=(0,p.Z)(function*(y,f,m){const E=(0,F.m9)(y),A={requestType:"PASSWORD_RESET",email:f};m&&Ga(E,A,m),yield Ua(E,A)})).apply(this,arguments)}function lc(){return(lc=(0,p.Z)(function*(y,f,m){yield Fn((0,F.m9)(y),{oobCode:f,newPassword:m})})).apply(this,arguments)}function Nt(){return(Nt=(0,p.Z)(function*(y,f){yield Uu((0,F.m9)(y),{oobCode:f})})).apply(this,arguments)}function Wu(y,f){return mn.apply(this,arguments)}function mn(){return(mn=(0,p.Z)(function*(y,f){const m=(0,F.m9)(y),E=yield Fn(m,{oobCode:f}),A=E.requestType;switch(G(A,m,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":G(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":G(E.mfaInfo,m,"internal-error");default:G(E.email,m,"internal-error")}let P=null;return E.mfaInfo&&(P=Xo._fromServerResponse(ct(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:P},operation:A}})).apply(this,arguments)}function _o(){return(_o=(0,p.Z)(function*(y,f){const{data:m}=yield Wu((0,F.m9)(y),f);return m.email})).apply(this,arguments)}function qa(){return(qa=(0,p.Z)(function*(y,f,m){const E=ct(y),A=yield kr(E,{returnSecureToken:!0,email:f,password:m}),P=yield ui._fromIdTokenResponse(E,"signIn",A);return yield E._updateCurrentUser(P.user),P})).apply(this,arguments)}function qu(){return(qu=(0,p.Z)(function*(y,f,m){const E=(0,F.m9)(y),A={requestType:"EMAIL_SIGNIN",email:f};G(m.handleCodeInApp,E,"argument-error"),m&&Ga(E,A,m),yield Wi(E,A)})).apply(this,arguments)}function Ln(){return(Ln=(0,p.Z)(function*(y,f,m){const E=(0,F.m9)(y),A=xd.credentialWithLink(f,m||Oe());return G(A._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),vn(E,A)})).apply(this,arguments)}function gs(y,f){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,p.Z)(function*(y,f){return Ft(y,"POST","/v1/accounts:createAuthUri",$t(y,f))})).apply(this,arguments)}function Ai(){return(Ai=(0,p.Z)(function*(y,f){const E={identifier:f,continueUri:dt()?Oe():"http://localhost"},{signinMethods:A}=yield gs((0,F.m9)(y),E);return A||[]})).apply(this,arguments)}function Ku(){return(Ku=(0,p.Z)(function*(y,f){const m=(0,F.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&Ga(m.auth,A,f);const{email:P}=yield on(m.auth,A);P!==y.email&&(yield y.reload())})).apply(this,arguments)}function Zu(){return(Zu=(0,p.Z)(function*(y,f,m){const E=(0,F.m9)(y),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};m&&Ga(E.auth,P,m);const{email:Z}=yield Cd(E.auth,P);Z!==y.email&&(yield y.reload())})).apply(this,arguments)}function Za(y,f){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,p.Z)(function*(y,f){return Ft(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Qa(){return(Qa=(0,p.Z)(function*(y,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const E=(0,F.m9)(y),P={idToken:yield E.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},Z=yield vr(E,Za(E.auth,P));E.displayName=Z.displayName||null,E.photoURL=Z.photoUrl||null;const ge=E.providerData.find(({providerId:Ve})=>"password"===Ve);ge&&(ge.displayName=E.displayName,ge.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Z)})).apply(this,arguments)}function ta(y,f,m){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,p.Z)(function*(y,f,m){const{auth:E}=y,P={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(P.email=f),m&&(P.password=m);const Z=yield vr(y,qo(E,P));yield y._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class na{constructor(f,m,E={}){this.isNewUser=f,this.providerId=m,this.profile=E}}class Od extends na{constructor(f,m,E,A){super(f,m,E),this.username=A}}class ra extends na{constructor(f,m){super(f,"facebook.com",m)}}class Ji extends Od{constructor(f,m){super(f,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Rf extends na{constructor(f,m){super(f,"google.com",m)}}class Qn extends Od{constructor(f,m,E){super(f,"twitter.com",m,E)}}function Xi(y){const{user:f,_tokenResponse:m}=y;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function kd(y){var f,m;if(!y)return null;const{providerId:E}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},P=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&(null==y?void 0:y.idToken)){const Z=null===(m=null===(f=at(y.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(Z)return new na(P,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!E)return null;switch(E){case"facebook.com":return new ra(P,A);case"github.com":return new Ji(P,A);case"google.com":return new Rf(P,A);case"twitter.com":return new Qn(P,A,y.screenName||null);case"custom":case"anonymous":return new na(P,null);default:return new na(P,E,A)}}(m)}class ms{constructor(f,m){this.type=f,this.credential=m}static _fromIdtoken(f){return new ms("enroll",f)}static _fromMfaPendingCredential(f){return new ms("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,E;if(null==f?void 0:f.multiFactorSession){if(null===(m=f.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return ms._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(E=f.multiFactorSession)||void 0===E?void 0:E.idToken)return ms._fromIdtoken(f.multiFactorSession.idToken)}return null}}class ia{constructor(f,m,E){this.session=f,this.hints=m,this.signInResolver=E}static _fromError(f,m){const E=ct(f),A=m.customData._serverResponse,P=(A.mfaInfo||[]).map(ge=>Xo._fromServerResponse(E,ge));G(A.mfaPendingCredential,E,"internal-error");const Z=ms._fromMfaPendingCredential(A.mfaPendingCredential);return new ia(Z,P,function(){var ge=(0,p.Z)(function*(Ve){const Ze=yield Ve._process(E,Z);delete A.mfaInfo,delete A.mfaPendingCredential;const yt=Object.assign(Object.assign({},A),{idToken:Ze.idToken,refreshToken:Ze.refreshToken});switch(m.operationType){case"signIn":const ht=yield ui._fromIdTokenResponse(E,m.operationType,yt);return yield E._updateCurrentUser(ht.user),ht;case"reauthenticate":return G(m.user,E,"internal-error"),ui._forOperation(m.user,m.operationType,yt);default:Se(E,"internal-error")}});return function(Ve){return ge.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,p.Z)(function*(){return m.signInResolver(f)})()}}function Nf(y,f){return Ft(y,"POST","/v2/accounts/mfaEnrollment:start",$t(y,f))}class Vd{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>Xo._fromServerResponse(f.auth,E)))})}static _fromUser(f){return new Vd(f)}getSession(){var f=this;return(0,p.Z)(function*(){return ms._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,m){var E=this;return(0,p.Z)(function*(){const A=f,P=yield E.getSession(),Z=yield vr(E.user,A._process(E.user.auth,P,m));return yield E.user._updateTokensIfNecessary(Z),E.user.reload()})()}unenroll(f){var m=this;return(0,p.Z)(function*(){const E="string"==typeof f?f:f.uid,A=yield m.user.getIdToken(),P=yield vr(m.user,function Yu(y,f){return Ft(y,"POST","/v2/accounts/mfaEnrollment:withdraw",$t(y,f))}(m.user.auth,{idToken:A,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Z})=>Z!==E),yield m.user._updateTokensIfNecessary(P);try{yield m.user.reload()}catch(Z){if("auth/user-token-expired"!==Z.code)throw Z}})()}}const Qu=new WeakMap,vo="__sak";class Ud{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(vo,"1"),this.storage.removeItem(vo),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const ci=(()=>{class y extends Ud{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Xg(){const y=(0,F.z$)();return Vu(y)||zr(y)}()&&function ar(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Os(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const A=this.storage.getItem(E),P=this.localCache[E];A!==P&&m(E,P,A)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((ge,Ve,Ze)=>{this.notifyListeners(ge,Ze)});const A=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ge=this.storage.getItem(A);if(m.newValue!==ge)null!==m.newValue?this.storage.setItem(A,m.newValue):this.storage.removeItem(A);else if(this.localCache[A]===m.newValue&&!E)return}const P=()=>{const ge=this.storage.getItem(A);!E&&this.localCache[A]===ge||this.notifyListeners(A,ge)},Z=this.storage.getItem(A);!function Va(){return(0,F.w1)()&&10===document.documentMode}()||Z===m.newValue||m.newValue===m.oldValue?P():setTimeout(P,10)}notifyListeners(m,E){this.localCache[m]=E;const A=this.listeners[m];if(A)for(const P of Array.from(A))P(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var A=()=>super._set,P=this;return(0,p.Z)(function*(){yield A().call(P,m,E),P.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,A=this;return(0,p.Z)(function*(){const P=yield E().call(A,m);return A.localCache[m]=JSON.stringify(P),P})()}_remove(m){var E=()=>super._remove,A=this;return(0,p.Z)(function*(){yield E().call(A,m),delete A.localCache[m]})()}}return y.type="LOCAL",y})(),wn=(()=>{class y extends Ud{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return y.type="SESSION",y})();let Bd=(()=>{class y{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(P=>P.isListeningto(m));if(E)return E;const A=new y(m);return this.receivers.push(A),A}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,p.Z)(function*(){const A=m,{eventId:P,eventType:Z,data:ge}=A.data,Ve=E.handlersMap[Z];if(!(null==Ve?void 0:Ve.size))return;A.ports[0].postMessage({status:"ack",eventId:P,eventType:Z});const Ze=Array.from(Ve).map(function(){var ht=(0,p.Z)(function*(Sn){return Sn(A.origin,ge)});return function(Sn){return ht.apply(this,arguments)}}()),yt=yield function gc(y){return Promise.all(y.map(function(){var f=(0,p.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return f.apply(this,arguments)}}()))}(Ze);A.ports[0].postMessage({status:"done",eventId:P,eventType:Z,response:yt})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function es(y="",f=10){let m="";for(let E=0;E<f;E++)m+=Math.floor(10*Math.random());return y+m}class mc{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,E=50){var A=this;return(0,p.Z)(function*(){const P="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let Z,ge;return new Promise((Ve,Ze)=>{const yt=es("",20);P.port1.start();const ht=setTimeout(()=>{Ze(new Error("unsupported_event"))},E);ge={messageChannel:P,onMessage(Sn){const Ci=Sn;if(Ci.data.eventId===yt)switch(Ci.data.status){case"ack":clearTimeout(ht),Z=setTimeout(()=>{Ze(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),Ve(Ci.data.response);break;default:clearTimeout(ht),clearTimeout(Z),Ze(new Error("invalid_response"))}}},A.handlers.add(ge),P.port1.addEventListener("message",ge.onMessage),A.target.postMessage({eventType:f,eventId:yt,data:m},[P.port2])}).finally(()=>{ge&&A.removeMessageHandler(ge)})})()}}function ln(){return window}function hi(){return void 0!==ln().WorkerGlobalScope&&"function"==typeof ln().importScripts}function Xu(){return(Xu=(0,p.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const _c="firebaseLocalStorageDb",oa="firebaseLocalStorage",aa="fbase_key";class $s{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function dr(y,f){return y.transaction([oa],f?"readwrite":"readonly").objectStore(oa)}function Gs(){const y=indexedDB.open(_c,1);return new Promise((f,m)=>{y.addEventListener("error",()=>{m(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore(oa,{keyPath:aa})}catch(A){m(A)}}),y.addEventListener("success",(0,p.Z)(function*(){const E=y.result;E.objectStoreNames.contains(oa)?f(E):(E.close(),yield function el(){const y=indexedDB.deleteDatabase(_c);return new $s(y).toPromise()}(),f(yield Gs()))}))})}function ua(y,f,m){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,p.Z)(function*(y,f,m){const E=dr(y,!0).put({[aa]:f,value:m});return new $s(E).toPromise()})).apply(this,arguments)}function wo(){return(wo=(0,p.Z)(function*(y,f){const m=dr(y,!1).get(f),E=yield new $s(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function ca(y,f){const m=dr(y,!0).delete(f);return new $s(m).toPromise()}const qs=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,p.Z)(function*(){return m.db||(m.db=yield Gs()),m.db})()}_withRetries(m){var E=this;return(0,p.Z)(function*(){let A=0;for(;;)try{const P=yield E._openDb();return yield m(P)}catch(P){if(A++>3)throw P;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,p.Z)(function*(){return hi()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,p.Z)(function*(){m.receiver=Bd._getInstance(function Hd(){return hi()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,p.Z)(function*(A,P){return{keyProcessed:(yield m._poll()).includes(P.key)}});return function(A,P){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,p.Z)(function*(A,P){return["keyChanged"]});return function(A,P){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,p.Z)(function*(){var E,A;if(m.activeServiceWorker=yield function _t(){return Xu.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new mc(m.activeServiceWorker);const P=yield m.sender._send("ping",{},800);!P||(null===(E=P[0])||void 0===E?void 0:E.fulfilled)&&(null===(A=P[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,p.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function jd(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Gs();return yield ua(m,vo,"1"),yield ca(m,vo),!0}catch(m){}return!1})()}_withPendingWrite(m){var E=this;return(0,p.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var A=this;return(0,p.Z)(function*(){return A._withPendingWrite((0,p.Z)(function*(){return yield A._withRetries(P=>ua(P,m,E)),A.localCache[m]=E,A.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,p.Z)(function*(){const A=yield E._withRetries(P=>function la(y,f){return wo.apply(this,arguments)}(P,m));return E.localCache[m]=A,A})()}_remove(m){var E=this;return(0,p.Z)(function*(){return E._withPendingWrite((0,p.Z)(function*(){return yield E._withRetries(A=>ca(A,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,p.Z)(function*(){const E=yield m._withRetries(Z=>{const ge=dr(Z,!1).getAll();return new $s(ge).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const A=[],P=new Set;for(const{fbase_key:Z,value:ge}of E)P.add(Z),JSON.stringify(m.localCache[Z])!==JSON.stringify(ge)&&(m.notifyListeners(Z,ge),A.push(Z));for(const Z of Object.keys(m.localCache))m.localCache[Z]&&!P.has(Z)&&(m.notifyListeners(Z,null),A.push(Z));return A})()}notifyListeners(m,E){this.localCache[m]=E;const A=this.listeners[m];if(A)for(const P of Array.from(A))P(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function jn(y,f){return Ft(y,"POST","/v2/accounts/mfaSignIn:start",$t(y,f))}function En(){return(En=(0,p.Z)(function*(y){return(yield Ft(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ts(y){return new Promise((f,m)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=f,E.onerror=A=>{const P=be("internal-error");P.customData=A,m(P)},E.type="text/javascript",E.charset="UTF-8",function bo(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(E)})}function _s(y){return`__${y}${Math.floor(1e6*Math.random())}`}const pi=1e12;class Tn{constructor(f){this.auth=f,this.counter=pi,this._widgets=new Map}render(f,m){const E=this.counter;return this._widgets.set(E,new nu(f,this.auth.name,m||{})),this.counter++,E}reset(f){var m;const E=f||pi;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(f){var m;return(null===(m=this._widgets.get(f||pi))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,p.Z)(function*(){var E;return null===(E=m._widgets.get(f||pi))||void 0===E||E.execute(),""})()}}class nu{constructor(f,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof f?document.getElementById(f):f;G(A,"argument-error",{appName:m}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ru(y){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<y;E++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const _n=_s("rcb"),em=new Jt(3e4,6e4);class Sy{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!ln().grecaptcha}load(f,m=""){return G(function ha(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(m),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(ln().grecaptcha):new Promise((E,A)=>{const P=ln().setTimeout(()=>{A(be(f,"network-request-failed"))},em.get());ln()[_n]=()=>{ln().clearTimeout(P),delete ln()[_n];const ge=ln().grecaptcha;if(!ge)return void A(be(f,"internal-error"));const Ve=ge.render;ge.render=(Ze,yt)=>{const ht=Ve(Ze,yt);return this.counter++,ht},this.hostLanguage=m,E(ge)},ts(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:_n,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(P),A(be(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!ln().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Jr{load(f){return(0,p.Z)(function*(){return new Tn(f)})()}clearedOneInstance(){}}const $d="recaptcha",zs={theme:"light",type:"image"};class Io{constructor(f,m=Object.assign({},zs),E){this.parameters=m,this.type=$d,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ct(E),this.isInvisible="invisible"===this.parameters.size,G("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof f?document.getElementById(f):f;G(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Jr:new Sy,this.validateStartingState()}verify(){var f=this;return(0,p.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),E=f.getAssertedRecaptcha();return E.getResponse(m)||new Promise(P=>{const Z=ge=>{!ge||(f.tokenChangeListeners.delete(Z),P(ge))};f.tokenChangeListeners.add(Z),f.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){G(!this.parameters.sitekey,this.auth,"argument-error"),G(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),G("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof f)f(m);else if("string"==typeof f){const E=ln()[f];"function"==typeof E&&E(m)}}}assertNotDestroyed(){G(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,p.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,p.Z)(function*(){G(dt()&&!hi(),f.auth,"internal-error"),yield function nl(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function tl(y){return En.apply(this,arguments)}(f.auth);G(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return G(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Cn{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=zo._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function Do(){return(Do=(0,p.Z)(function*(y,f,m){const E=ct(y),A=yield fa(E,f,(0,F.m9)(m));return new Cn(A,P=>vn(E,P))})).apply(this,arguments)}function vc(){return(vc=(0,p.Z)(function*(y,f,m){const E=(0,F.m9)(y);yield Yt(!1,E,"phone");const A=yield fa(E.auth,f,(0,F.m9)(m));return new Cn(A,P=>cr(E,P))})).apply(this,arguments)}function Xr(){return(Xr=(0,p.Z)(function*(y,f,m){const E=(0,F.m9)(y),A=yield fa(E.auth,f,(0,F.m9)(m));return new Cn(A,P=>ps(E,P))})).apply(this,arguments)}function fa(y,f,m){return To.apply(this,arguments)}function To(){return(To=(0,p.Z)(function*(y,f,m){var E;const A=yield m.verify();try{let P;if(G("string"==typeof A,y,"argument-error"),G(m.type===$d,y,"argument-error"),P="string"==typeof f?{phoneNumber:f}:f,"session"in P){const Z=P.session;if("phoneNumber"in P)return G("enroll"===Z.type,y,"internal-error"),(yield Nf(y,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{G("signin"===Z.type,y,"internal-error");const ge=(null===(E=P.multiFactorHint)||void 0===E?void 0:E.uid)||P.multiFactorUid;return G(ge,y,"missing-multi-factor-info"),(yield jn(y,{mfaPendingCredential:Z.credential,mfaEnrollmentId:ge,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield qg(y,{phoneNumber:P.phoneNumber,recaptchaToken:A});return Z}}finally{m._reset()}})).apply(this,arguments)}function pa(){return(pa=(0,p.Z)(function*(y,f){yield ja((0,F.m9)(y),f)})).apply(this,arguments)}let Ao=(()=>{class y{constructor(m){this.providerId=y.PROVIDER_ID,this.auth=ct(m)}verifyPhoneNumber(m,E){return fa(this.auth,m,(0,F.m9)(E))}static credential(m,E){return zo._fromVerification(m,E)}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:A}=m;return E&&A?zo._fromTokenResponse(E,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function ys(y,f){return f?te(f):(G(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class iu extends Ti{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Us(f,this._buildIdpRequest())}_linkToIdToken(f,m){return Us(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return Us(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function Rt(y){return lr(y.auth,new iu(y),y.bypassAuthState)}function rl(y){const{auth:f,user:m}=y;return G(m,f,"internal-error"),$u(m,new iu(y),y.bypassAuthState)}function Xn(y){return su.apply(this,arguments)}function su(){return(su=(0,p.Z)(function*(y){const{auth:f,user:m}=y;return G(m,f,"internal-error"),ja(m,new iu(y),y.bypassAuthState)})).apply(this,arguments)}class Ks{constructor(f,m,E,A,P=!1){this.auth=f,this.resolver=E,this.user=A,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,p.Z)(function*(E,A){f.pendingPromise={resolve:E,reject:A};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(P){f.reject(P)}});return function(E,A){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,p.Z)(function*(){const{urlResponse:E,sessionId:A,postBody:P,tenantId:Z,error:ge,type:Ve}=f;if(ge)return void m.reject(ge);const Ze={auth:m.auth,requestUri:E,sessionId:A,tenantId:Z||void 0,postBody:P||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Ve)(Ze))}catch(yt){m.reject(yt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Rt;case"linkViaPopup":case"linkViaRedirect":return Xn;case"reauthViaPopup":case"reauthViaRedirect":return rl;default:Se(this.auth,"internal-error")}}resolve(f){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const nm=new Jt(2e3,1e4);function Zs(){return(Zs=(0,p.Z)(function*(y,f,m){const E=ct(y);je(y,f,br);const A=ys(E,m);return new wc(E,"signInViaPopup",f,A).executeNotNull()})).apply(this,arguments)}function il(){return(il=(0,p.Z)(function*(y,f,m){const E=(0,F.m9)(y);je(E.auth,f,br);const A=ys(E.auth,m);return new wc(E.auth,"reauthViaPopup",f,A,E).executeNotNull()})).apply(this,arguments)}function ns(){return(ns=(0,p.Z)(function*(y,f,m){const E=(0,F.m9)(y);je(E.auth,f,br);const A=ys(E.auth,m);return new wc(E.auth,"linkViaPopup",f,A,E).executeNotNull()})).apply(this,arguments)}let wc=(()=>{class y extends Ks{constructor(m,E,A,P,Z){super(m,E,P,Z),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var m=this;return(0,p.Z)(function*(){const E=yield m.execute();return G(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,p.Z)(function*(){Y(1===m.filter.length,"Popup operations only handle one event");const E=es();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(A=>{m.reject(A)}),m.resolver._isIframeWebStorageSupported(m.auth,A=>{A||m.reject(be(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(be(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,A;this.pollId=(null===(A=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(be(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,nm.get())};m()}}return y.currentPopupAction=null,y})();const er=new Map;class xy extends Ks{constructor(f,m,E=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,p.Z)(function*(){let E=er.get(m.auth._key());if(!E){try{const P=(yield function ga(y,f){return ma.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;E=()=>Promise.resolve(P)}catch(A){E=()=>Promise.reject(A)}er.set(m.auth._key(),E)}return m.bypassAuthState||er.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,E=this;return(0,p.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(E,f);if("unknown"!==f.type){if(f.eventId){const A=yield E.auth._redirectUserForId(f.eventId);if(A)return E.user=A,m().call(E,f);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function ma(){return(ma=(0,p.Z)(function*(y,f){const m=U(f),E=M(y);if(!(yield E._isAvailable()))return!1;const A="true"===(yield E._get(m));return yield E._remove(m),A})).apply(this,arguments)}function xo(y,f){return qd.apply(this,arguments)}function qd(){return(qd=(0,p.Z)(function*(y,f){return M(y)._set(U(f),"true")})).apply(this,arguments)}function T(y,f){er.set(y._key(),f)}function M(y){return te(y._redirectPersistence)}function U(y){return Hn("pendingRedirect",y.config.apiKey,y.name)}function _e(){return(_e=(0,p.Z)(function*(y,f,m){const E=ct(y);je(y,f,br);const A=ys(E,m);return yield xo(A,E),A._openRedirect(E,f,"signInViaRedirect")})).apply(this,arguments)}function ft(){return(ft=(0,p.Z)(function*(y,f,m){const E=(0,F.m9)(y);je(E.auth,f,br);const A=ys(E.auth,m);yield xo(A,E.auth);const P=yield _i(E);return A._openRedirect(E.auth,f,"reauthViaRedirect",P)})).apply(this,arguments)}function Ir(){return(Ir=(0,p.Z)(function*(y,f,m){const E=(0,F.m9)(y);je(E.auth,f,br);const A=ys(E.auth,m);yield Yt(!1,E,f.providerId),yield xo(A,E.auth);const P=yield _i(E);return A._openRedirect(E.auth,f,"linkViaRedirect",P)})).apply(this,arguments)}function vs(){return(vs=(0,p.Z)(function*(y,f){return yield ct(y)._initializationPromise,ei(y,f,!1)})).apply(this,arguments)}function ei(y,f){return mi.apply(this,arguments)}function mi(){return(mi=(0,p.Z)(function*(y,f,m=!1){const E=ct(y),A=ys(E,f),Z=yield new xy(E,A,m).execute();return Z&&!m&&(delete Z.user._redirectEventId,yield E._persistUserIfCurrent(Z.user),yield E._setRedirectUser(null,f)),Z})).apply(this,arguments)}function _i(y){return yi.apply(this,arguments)}function yi(){return(yi=(0,p.Z)(function*(y){const f=es(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class ol{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(f,E)&&(m=!0,this.sendToConsumer(f,E),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function rm(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return al(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var E;if(f.error&&!al(f)){const A=(null===(E=f.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(be(this.auth,A))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const E=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&E}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ec(f))}saveEventToCache(f){this.cachedEventUids.add(Ec(f)),this.lastProcessedEventTime=Date.now()}}function Ec(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function al({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function im(y){return Pf.apply(this,arguments)}function Pf(){return(Pf=(0,p.Z)(function*(y,f={}){return Ft(y,"GET","/v1/projects",f)})).apply(this,arguments)}const Ro=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Cc=/^https?/;function sm(){return(sm=(0,p.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield im(y);for(const m of f)try{if(om(m))return}catch(E){}Se(y,"unauthorized-domain")})).apply(this,arguments)}function om(y){const f=Oe(),{protocol:m,hostname:E}=new URL(f);if(y.startsWith("chrome-extension://")){const Z=new URL(y);return""===Z.hostname&&""===E?"chrome-extension:"===m&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&Z.hostname===E}if(!Cc.test(m))return!1;if(Ro.test(y))return E===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(E)}const My=new Jt(3e4,6e4);function am(){const y=ln().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let m=0;m<y.CP.length;m++)y.CP[m]=null}let ul=null;function Mo(y){return ul=ul||function kf(y){return new Promise((f,m)=>{var E,A,P;function Z(){am(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{am(),m(be(y,"network-request-failed"))},timeout:My.get()})}if(null===(A=null===(E=ln().gapi)||void 0===E?void 0:E.iframes)||void 0===A?void 0:A.Iframe)f(gapi.iframes.getContext());else{if(!(null===(P=ln().gapi)||void 0===P?void 0:P.load)){const ge=_s("iframefcb");return ln()[ge]=()=>{gapi.load?Z():m(be(y,"network-request-failed"))},ts(`https://apis.google.com/js/api.js?onload=${ge}`).catch(Ve=>m(Ve))}Z()}}).catch(f=>{throw ul=null,f})}(y),ul}const No=new Jt(5e3,15e3),Ny={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ll=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Py(y){const f=y.config;G(f.authDomain,y,"auth-domain-config-required");const m=f.emulator?Pn(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,E={apiKey:f.apiKey,appName:y.name,v:ue.SDK_VERSION},A=ll.get(y.config.apiHost);A&&(E.eid=A);const P=y._getFrameworks();return P.length&&(E.fw=P.join(",")),`${m}?${(0,F.xO)(E).slice(1)}`}function _a(){return _a=(0,p.Z)(function*(y){const f=yield Mo(y),m=ln().gapi;return G(m,y,"internal-error"),f.open({where:document.body,url:Py(y),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ny,dontclear:!0},E=>new Promise(function(){var A=(0,p.Z)(function*(P,Z){yield E.restyle({setHideOnLeave:!1});const ge=be(y,"network-request-failed"),Ve=ln().setTimeout(()=>{Z(ge)},No.get());function Ze(){ln().clearTimeout(Ve),P(E)}E.ping(Ze).then(Ze,()=>{Z(ge)})});return function(P,Z){return A.apply(this,arguments)}}()))}),_a.apply(this,arguments)}const Of={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class um{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function Ys(y,f,m,E,A,P){G(y.config.authDomain,y,"auth-domain-config-required"),G(y.config.apiKey,y,"invalid-api-key");const Z={apiKey:y.config.apiKey,appName:y.name,authType:m,redirectUrl:E,v:ue.SDK_VERSION,eventId:A};if(f instanceof br){f.setDefaultLanguage(y.languageCode),Z.providerId=f.providerId||"",(0,F.xb)(f.getCustomParameters())||(Z.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Ve,Ze]of Object.entries(P||{}))Z[Ve]=Ze}if(f instanceof fo){const Ve=f.getScopes().filter(Ze=>""!==Ze);Ve.length>0&&(Z.scopes=Ve.join(","))}y.tenantId&&(Z.tid=y.tenantId);const ge=Z;for(const Ve of Object.keys(ge))void 0===ge[Ve]&&delete ge[Ve];return`${function Ic({config:y}){return y.emulator?Pn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,F.xO)(ge).slice(1)}`}const Qd="webStorageSupport";class Jd extends class AE{constructor(f){this.factorId=f}_process(f,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,E);case"signin":return this._finalizeSignIn(f,m.credential);default:return Ce("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Jd(f)}_finalizeEnroll(f,m,E){return function yo(y,f){return Ft(y,"POST","/v2/accounts/mfaEnrollment:finalize",$t(y,f))}(f,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function Co(y,f){return Ft(y,"POST","/v2/accounts/mfaSignIn:finalize",$t(y,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let cm=(()=>{class y{constructor(){}static assertion(m){return Jd._fromCredential(m)}}return y.FACTOR_ID="phone",y})();var dm="@firebase/auth";class fm{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,p.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(E=>{var A;f((null===(A=E)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);!m||(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Qs(){return window}function au(){return(au=(0,p.Z)(function*(y,f,m){var E;const{BuildInfo:A}=Qs();Y(f.sessionId,"AuthEvent did not contain a session ID");const P=yield Uf(f.sessionId),Z={};return zr()?Z.ibi=A.packageName:Nr()?Z.apn=A.packageName:Se(y,"operation-not-supported-in-this-environment"),A.displayName&&(Z.appDisplayName=A.displayName),Z.sessionId=P,Ys(y,m,f.type,void 0,null!==(E=f.eventId)&&void 0!==E?E:void 0,Z)})).apply(this,arguments)}function eh(){return(eh=(0,p.Z)(function*(y){const{BuildInfo:f}=Qs(),m={};zr()?m.iosBundleId=f.packageName:Nr()?m.androidPackageName=f.packageName:Se(y,"operation-not-supported-in-this-environment"),yield im(y,m)})).apply(this,arguments)}function mm(){return(mm=(0,p.Z)(function*(y,f,m){const{cordova:E}=Qs();let A=()=>{};try{yield new Promise((P,Z)=>{let ge=null;function Ve(){var ht;P();const Sn=null===(ht=E.plugins.browsertab)||void 0===ht?void 0:ht.close;"function"==typeof Sn&&Sn(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function Ze(){ge||(ge=window.setTimeout(()=>{Z(be(y,"redirect-cancelled-by-user"))},2e3))}function yt(){"visible"===(null==document?void 0:document.visibilityState)&&Ze()}f.addPassiveListener(Ve),document.addEventListener("resume",Ze,!1),Nr()&&document.addEventListener("visibilitychange",yt,!1),A=()=>{f.removePassiveListener(Ve),document.removeEventListener("resume",Ze,!1),document.removeEventListener("visibilitychange",yt,!1),ge&&window.clearTimeout(ge)}})}finally{A()}})).apply(this,arguments)}function Uf(y){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,p.Z)(function*(y){const f=Bf(y),m=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(m)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Bf(y){if(Y(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),m=new Uint8Array(f);for(let E=0;E<y.length;E++)m[E]=y.charCodeAt(E);return m}!function xE(y){(0,ue._registerComponent)(new le.wA("auth",(f,{options:m})=>{const E=f.getProvider("app").getImmediate(),A=f.getProvider("heartbeat"),{apiKey:P,authDomain:Z}=E.options;return((ge,Ve)=>{G(P&&!P.includes(":"),"invalid-api-key",{appName:ge.name}),G(!(null==Z?void 0:Z.includes(":")),"argument-error",{appName:ge.name});const Ze={apiKey:P,authDomain:Z,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Wo(y)},yt=new Ke(ge,Ve,Ze);return function ae(y,f){const m=(null==f?void 0:f.persistence)||[],E=(Array.isArray(m)?m:[m]).map(te);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(E,null==f?void 0:f.popupRedirectResolver)}(yt,m),yt})(E,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,E)=>{f.getProvider("auth-internal").initialize()})),(0,ue._registerComponent)(new le.wA("auth-internal",f=>{const m=ct(f.getProvider("auth").getImmediate());return new fm(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ue.registerVersion)(dm,"0.20.1",function Xd(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ue.registerVersion)(dm,"0.20.1","esm2017")}("Browser");class nh extends ol{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(f)),super.onEvent(f)}initialized(){var f=this;return(0,p.Z)(function*(){yield f.initPromise})()}}function hl(y){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,p.Z)(function*(y){const f=yield lu()._get(Hf(y));return f&&(yield lu()._remove(Hf(y))),f})).apply(this,arguments)}function jf(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const E=Math.floor(Math.random()*f.length);y.push(f.charAt(E))}return y.join("")}function lu(){return te(ci)}function Hf(y){return Hn("authEvent",y.config.apiKey,y.name)}function Gt(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...m]=y.split("?");return(0,F.zd)(m.join("?"))}function pl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:be("no-auth-event")}}function cu(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function vm(y=(0,F.z$)()){return!("file:"!==cu()&&"ionic:"!==cu()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function qf(){try{const y=self.localStorage,f=es();if(y)return y.setItem(f,"1"),y.removeItem(f),!function Wf(y=(0,F.z$)()){return function Or(){return(0,F.w1)()&&11===(null==document?void 0:document.documentMode)}()||function du(y=(0,F.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,F.hl)()}catch(y){return hr()&&(0,F.hl)()}return!1}function hr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function hu(){return(function $y(){return"http:"===cu()||"https:"===cu()}()||(0,F.ru)()||vm())&&!function va(){return(0,F.b$)()||(0,F.UG)()}()&&qf()&&!hr()}function rh(){return vm()&&"undefined"!=typeof document}function Sc(){return(Sc=(0,p.Z)(function*(){return!!rh()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const vi={LOCAL:"local",NONE:"none",SESSION:"session"},Po=G,Em="persistence";function gl(y){return zf.apply(this,arguments)}function zf(){return(zf=(0,p.Z)(function*(y){yield y._initializationPromise;const f=bm(),m=Hn(Em,y.config.apiKey,y.name);f&&f.setItem(m,y._getPersistence())})).apply(this,arguments)}function bm(){var y;try{return(null===(y=function wm(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const Wy=G;class wi{constructor(){this.browserResolver=te(class Fy{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wn,this._completeRedirectFn=ei,this._overrideRedirectResult=T}_openPopup(f,m,E,A){var P=this;return(0,p.Z)(function*(){var Z;Y(null===(Z=P.eventManagers[f._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const ge=Ys(f,m,E,Oe(),A);return function bc(y,f,m,E=500,A=600){const P=Math.max((window.screen.availHeight-A)/2,0).toString(),Z=Math.max((window.screen.availWidth-E)/2,0).toString();let ge="";const Ve=Object.assign(Object.assign({},Of),{width:E.toString(),height:A.toString(),top:P,left:Z}),Ze=(0,F.z$)().toLowerCase();m&&(ge=La(Ze)?"_blank":m),Fa(Ze)&&(f=f||"http://localhost",Ve.scrollbars="yes");const yt=Object.entries(Ve).reduce((Sn,[Ci,xc])=>`${Sn}${Ci}=${xc},`,"");if(function co(y=(0,F.z$)()){var f;return zr(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Ze)&&"_self"!==ge)return function ky(y,f){const m=document.createElement("a");m.href=y,m.target=f;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(f||"",ge),new um(null);const ht=window.open(f||"",ge,yt);G(ht,y,"popup-blocked");try{ht.focus()}catch(Sn){}return new um(ht)}(f,ge,es())})()}_openRedirect(f,m,E,A){var P=this;return(0,p.Z)(function*(){return yield P._originValidation(f),function eu(y){ln().location.href=y}(Ys(f,m,E,Oe(),A)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:A,promise:P}=this.eventManagers[m];return A?Promise.resolve(A):(Y(P,"If manager is not set, promise should be"),P)}const E=this.initAndGetManager(f);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(f){var m=this;return(0,p.Z)(function*(){const E=yield function Kd(y){return _a.apply(this,arguments)}(f),A=new ol(f);return E.register("authEvent",P=>(G(null==P?void 0:P.authEvent,f,"invalid-auth-event"),{status:A.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:A},m.iframes[f._key()]=E,A})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(Qd,{type:Qd},A=>{var P;const Z=null===(P=null==A?void 0:A[0])||void 0===P?void 0:P[Qd];void 0!==Z&&m(!!Z),Se(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Ry(y){return sm.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return Os()||Vu()||zr()}}),this.cordovaResolver=te(class ym{constructor(){this._redirectPersistence=wn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ei,this._overrideRedirectResult=T}_initialize(f){var m=this;return(0,p.Z)(function*(){const E=f._key();let A=m.eventManagers.get(E);return A||(A=new nh(f),m.eventManagers.set(E,A),m.attachCallbackListeners(f,A)),A})()}_openPopup(f){Se(f,"operation-not-supported-in-this-environment")}_openRedirect(f,m,E,A){var P=this;return(0,p.Z)(function*(){!function cl(y){var f,m,E,A,P,Z,ge,Ve,Ze,yt;const ht=Qs();G("function"==typeof(null===(f=null==ht?void 0:ht.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),G(void 0!==(null===(m=null==ht?void 0:ht.BuildInfo)||void 0===m?void 0:m.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),G("function"==typeof(null===(P=null===(A=null===(E=null==ht?void 0:ht.cordova)||void 0===E?void 0:E.plugins)||void 0===A?void 0:A.browsertab)||void 0===P?void 0:P.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===(Ve=null===(ge=null===(Z=null==ht?void 0:ht.cordova)||void 0===Z?void 0:Z.plugins)||void 0===ge?void 0:ge.browsertab)||void 0===Ve?void 0:Ve.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===(yt=null===(Ze=null==ht?void 0:ht.cordova)||void 0===Ze?void 0:Ze.InAppBrowser)||void 0===yt?void 0:yt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const Z=yield P._initialize(f);yield Z.initialized(),Z.resetRedirect(),function I(){er.clear()}(),yield P._originValidation(f);const ge=function dl(y,f,m=null){return{type:f,eventId:m,urlResponse:null,sessionId:jf(),postBody:null,tenantId:y.tenantId,error:be(y,"no-auth-event")}}(f,E,A);yield function Ly(y,f){return lu()._set(Hf(y),f)}(f,ge);const Ve=yield function ws(y,f,m){return au.apply(this,arguments)}(f,ge,m),Ze=yield function th(y){const{cordova:f}=Qs();return new Promise(m=>{f.plugins.browsertab.isAvailable(E=>{let A=null;E?f.plugins.browsertab.openUrl(y):A=f.InAppBrowser.open(y,function Ed(y=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),m(A)})})}(Ve);return function uu(y,f,m){return mm.apply(this,arguments)}(f,Z,Ze)})()}_isIframeWebStorageSupported(f,m){throw new Error("Method not implemented.")}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function gm(y){return eh.apply(this,arguments)}(f)),this.originValidationPromises[m]}attachCallbackListeners(f,m){const{universalLinks:E,handleOpenURL:A,BuildInfo:P}=Qs(),Z=setTimeout((0,p.Z)(function*(){yield hl(f),m.onEvent(pl())}),500),ge=function(){var yt=(0,p.Z)(function*(ht){clearTimeout(Z);const Sn=yield hl(f);let Ci=null;Sn&&(null==ht?void 0:ht.url)&&(Ci=function Vy(y,f){var m,E;const A=function Gf(y){const f=Gt(y),m=f.link?decodeURIComponent(f.link):void 0,E=Gt(m).link,A=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Gt(A).link||A||E||m||y}(f);if(A.includes("/__/auth/callback")){const P=Gt(A),Z=P.firebaseError?function $f(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(P.firebaseError)):null,ge=null===(E=null===(m=null==Z?void 0:Z.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],Ve=ge?be(ge):null;return Ve?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(Sn,ht.url)),m.onEvent(Ci||pl())});return function(Sn){return yt.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,ge);const Ve=A,Ze=`${P.packageName.toLowerCase()}://`;Qs().handleOpenURL=function(){var yt=(0,p.Z)(function*(ht){if(ht.toLowerCase().startsWith(Ze)&&ge({url:ht}),"function"==typeof Ve)try{Ve(ht)}catch(Sn){console.error(Sn)}});return function(ht){return yt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=wn,this._completeRedirectFn=ei,this._overrideRedirectResult=T}_initialize(f){var m=this;return(0,p.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,m,E,A){var P=this;return(0,p.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(f,m,E,A)})()}_openRedirect(f,m,E,A){var P=this;return(0,p.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(f,m,E,A)})()}_isIframeWebStorageSupported(f,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,m)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return rh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Wy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,p.Z)(function*(){if(f.underlyingResolver)return;const m=yield function Gy(){return Sc.apply(this,arguments)}();f.underlyingResolver=m?f.cordovaResolver:f.browserResolver})()}}function Im(y){return y.unwrap()}function ih(y){return Dm(y)}function Dm(y){const{_tokenResponse:f}=y instanceof F.ZR?y.customData:y;if(!f)return null;if(!(y instanceof F.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Ao.credentialFromResult(y);const m=f.providerId;if(!m||"password"===m)return null;let E;switch(m){case"google.com":E=Rd;break;case"facebook.com":E=Ko;break;case"github.com":E=Af;break;case"twitter.com":E=Nd;break;default:const{oauthIdToken:A,oauthAccessToken:P,oauthTokenSecret:Z,pendingToken:ge,nonce:Ve}=f;return P||Z||A||ge?ge?m.startsWith("saml.")?po._create(m,ge):fs._fromParams({providerId:m,signInMethod:m,pendingToken:ge,idToken:A,accessToken:P}):new Ki(m).credential({idToken:A,accessToken:P,rawNonce:Ve}):null}return y instanceof F.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function Ei(y,f){return f.catch(m=>{throw m instanceof F.ZR&&function zy(y,f){var m;const E=null===(m=f.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new Tm(y,function Jn(y,f){var m;const E=(0,F.m9)(y),A=f;return G(f.customData.operationType,E,"argument-error"),G(null===(m=A.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),ia._fromError(E,A)}(y,f));else if(E){const A=Dm(f),P=f;A&&(P.credential=A,P.tenantId=E.tenantId||void 0,P.email=E.email||void 0,P.phoneNumber=E.phoneNumber||void 0)}}(y,m),m}).then(m=>{const A=m.user;return{operationType:m.operationType,credential:ih(m),additionalUserInfo:Xi(m),user:Js.getOrCreate(A)}})}function Kf(y,f){return Zf.apply(this,arguments)}function Zf(){return(Zf=(0,p.Z)(function*(y,f){const m=yield f;return{verificationId:m.verificationId,confirm:E=>Ei(y,m.confirm(E))}})).apply(this,arguments)}class Tm{constructor(f,m){this.resolver=m,this.auth=function qy(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Ei(Im(this.auth),this.resolver.resolveSignIn(f))}}class Js{constructor(f){this._delegate=f,this.multiFactor=function Ju(y){const f=(0,F.m9)(y);return Qu.has(f)||Qu.set(f,Vd._fromUser(f)),Qu.get(f)}(f)}static getOrCreate(f){return Js.USER_MAP.has(f)||Js.USER_MAP.set(f,new Js(f)),Js.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var m=this;return(0,p.Z)(function*(){return Ei(m.auth,cr(m._delegate,f))})()}linkWithPhoneNumber(f,m){var E=this;return(0,p.Z)(function*(){return Kf(E.auth,function Ay(y,f,m){return vc.apply(this,arguments)}(E._delegate,f,m))})()}linkWithPopup(f){var m=this;return(0,p.Z)(function*(){return Ei(m.auth,function Wd(y,f,m){return ns.apply(this,arguments)}(m._delegate,f,wi))})()}linkWithRedirect(f){var m=this;return(0,p.Z)(function*(){return yield gl(ct(m.auth)),function Vt(y,f,m){return function Ct(y,f,m){return Ir.apply(this,arguments)}(y,f,m)}(m._delegate,f,wi)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var m=this;return(0,p.Z)(function*(){return Ei(m.auth,ps(m._delegate,f))})()}reauthenticateWithPhoneNumber(f,m){return Kf(this.auth,function gi(y,f,m){return Xr.apply(this,arguments)}(this._delegate,f,m))}reauthenticateWithPopup(f){return Ei(this.auth,function xi(y,f,m){return il.apply(this,arguments)}(this._delegate,f,wi))}reauthenticateWithRedirect(f){var m=this;return(0,p.Z)(function*(){return yield gl(ct(m.auth)),function Ue(y,f,m){return function It(y,f,m){return ft.apply(this,arguments)}(y,f,m)}(m._delegate,f,wi)})()}sendEmailVerification(f){return function dc(y,f){return Ku.apply(this,arguments)}(this._delegate,f)}unlink(f){var m=this;return(0,p.Z)(function*(){return yield function xf(y,f){return rn.apply(this,arguments)}(m._delegate,f),m})()}updateEmail(f){return function Qg(y,f){return ta((0,F.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function pc(y,f){return ta((0,F.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function So(y,f){return pa.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function fc(y,f){return Qa.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,m){return function hc(y,f,m){return Zu.apply(this,arguments)}(this._delegate,f,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Js.USER_MAP=new WeakMap;const Ac=G;let Sm=(()=>{class y{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=m.options;Ac(A,"invalid-api-key",{appName:m.name}),Ac(A,"invalid-api-key",{appName:m.name});const P="undefined"!=typeof window?wi:void 0;this._delegate=E.initialize({options:{persistence:Ky(A,m.name),popupRedirectResolver:P}}),this._delegate._updateErrorMap(ke),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Js.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function Zr(y,f,m){const E=ct(y);G(E._canInitEmulator,E,"emulator-config-failed"),G(/^https?:\/\//.test(f),E,"invalid-emulator-scheme");const A=!!(null==m?void 0:m.disableWarnings),P=$i(f),{host:Z,port:ge}=function Bn(y){const f=$i(y),m=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(E);if(A){const P=A[1];return{host:P,port:Gi(E.substr(P.length+1))}}{const[P,Z]=E.split(":");return{host:P,port:Gi(Z)}}}(f);E.config.emulator={url:`${P}//${Z}${null===ge?"":`:${ge}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Z,port:ge,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function fn(){function y(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,m,E)}applyActionCode(m){return function Ae(y,f){return Nt.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Wu(this._delegate,m)}confirmPasswordReset(m,E){return function uc(y,f,m){return lc.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var A=this;return(0,p.Z)(function*(){return Ei(A._delegate,function li(y,f,m){return qa.apply(this,arguments)}(A._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Hs(y,f){return Ai.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function za(y,f){const m=Hu.parseLink(f);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,p.Z)(function*(){Ac(hu(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function tr(y,f){return vs.apply(this,arguments)}(m._delegate,wi);return E?Ei(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Uy(y,f){ct(y)._logFramework(f)}(this._delegate,m)}onAuthStateChanged(m,E,A){const{next:P,error:Z,complete:ge}=Am(m,E,A);return this._delegate.onAuthStateChanged(P,Z,ge)}onIdTokenChanged(m,E,A){const{next:P,error:Z,complete:ge}=Am(m,E,A);return this._delegate.onIdTokenChanged(P,Z,ge)}sendSignInLinkToEmail(m,E){return function Yg(y,f,m){return qu.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function ac(y,f,m){return Wa.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,p.Z)(function*(){let A;switch(function Cm(y,f){Po(Object.values(vi).includes(f),y,"invalid-persistence-type"),(0,F.b$)()?Po(f!==vi.SESSION,y,"unsupported-persistence-type"):(0,F.UG)()?Po(f===vi.NONE,y,"unsupported-persistence-type"):hr()?Po(f===vi.NONE||f===vi.LOCAL&&(0,F.hl)(),y,"unsupported-persistence-type"):Po(f===vi.NONE||qf(),y,"unsupported-persistence-type")}(E._delegate,m),m){case vi.SESSION:A=wn;break;case vi.LOCAL:A=(yield te(qs)._isAvailable())?qs:ci;break;case vi.NONE:A=Et;break;default:return Se("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return Ei(this._delegate,function Pd(y){return ic.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return Ei(this._delegate,vn(this._delegate,m))}signInWithCustomToken(m){return Ei(this._delegate,function Jo(y,f){return gt.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return Ei(this._delegate,function cc(y,f,m){return vn((0,F.m9)(y),xd.credential(f,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return Ei(this._delegate,function zu(y,f,m){return Ln.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return Kf(this._delegate,function yc(y,f,m){return Do.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,p.Z)(function*(){return Ac(hu(),E._delegate,"operation-not-supported-in-this-environment"),Ei(E._delegate,function Gd(y,f,m){return Zs.apply(this,arguments)}(E._delegate,m,wi))})()}signInWithRedirect(m){var E=this;return(0,p.Z)(function*(){return Ac(hu(),E._delegate,"operation-not-supported-in-this-environment"),yield gl(E._delegate),function Q(y,f,m){return function re(y,f,m){return _e.apply(this,arguments)}(y,f,m)}(E._delegate,m,wi)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function ea(y,f){return _o.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=vi,y})();function Am(y,f,m){let E=y;"function"!=typeof y&&({next:E,error:f,complete:m}=y);const A=E;return{next:Z=>A(Z&&Js.getOrCreate(Z)),error:f,complete:m}}function Ky(y,f){const m=function fu(y,f){const m=bm();if(!m)return[];const E=Hn(Em,y,f);switch(m.getItem(E)){case vi.NONE:return[Et];case vi.LOCAL:return[qs,wn];case vi.SESSION:return[wn];default:return[]}}(y,f);if("undefined"!=typeof self&&!m.includes(qs)&&m.push(qs),"undefined"!=typeof window)for(const E of[ci,wn])m.includes(E)||m.push(E);return m.includes(Et)||m.push(Et),m}class Yf{constructor(){this.providerId="phone",this._delegate=new Ao(Im(ee.Z.auth()))}static credential(f,m){return Ao.credential(f,m)}verifyPhoneNumber(f,m){return this._delegate.verifyPhoneNumber(f,m)}unwrap(){return this._delegate}}Yf.PHONE_SIGN_IN_METHOD=Ao.PHONE_SIGN_IN_METHOD,Yf.PROVIDER_ID=Ao.PROVIDER_ID;const xm=G;class ME{constructor(f,m,E=ee.Z.app()){var A;xm(null===(A=E.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Io(f,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Es(y){y.INTERNAL.registerComponent(new le.wA("auth-compat",f=>{const m=f.getProvider("app-compat").getImmediate(),E=f.getProvider("auth");return new Sm(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:xd,FacebookAuthProvider:Ko,GithubAuthProvider:Af,GoogleAuthProvider:Rd,OAuthProvider:Ki,SAMLAuthProvider:Pr,PhoneAuthProvider:Yf,PhoneMultiFactorGenerator:cm,RecaptchaVerifier:ME,TwitterAuthProvider:Nd,Auth:Sm,AuthCredential:Ti,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.14")}(ee.Z)},8306:(Xe,Ee,O)=>{O.d(Ee,{y:()=>W});var p=O(930),ee=O(727),F=O(8822),ue=O(4671);var le=O(2416),oe=O(576),ce=O(2806);let W=(()=>{class Re{constructor(Be){Be&&(this._subscribe=Be)}lift(Be){const pe=new Re;return pe.source=this,pe.operator=Be,pe}subscribe(Be,pe,Te){const qe=function We(Re){return Re&&Re instanceof p.Lv||function ne(Re){return Re&&(0,oe.m)(Re.next)&&(0,oe.m)(Re.error)&&(0,oe.m)(Re.complete)}(Re)&&(0,ee.Nn)(Re)}(Be)?Be:new p.Hp(Be,pe,Te);return(0,ce.x)(()=>{const{operator:Qe,source:Se}=this;qe.add(Qe?Qe.call(qe,Se):Se?this._subscribe(qe):this._trySubscribe(qe))}),qe}_trySubscribe(Be){try{return this._subscribe(Be)}catch(pe){Be.error(pe)}}forEach(Be,pe){return new(pe=$(pe))((Te,qe)=>{const Qe=new p.Hp({next:Se=>{try{Be(Se)}catch(be){qe(be),Qe.unsubscribe()}},error:qe,complete:Te});this.subscribe(Qe)})}_subscribe(Be){var pe;return null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(Be)}[F.L](){return this}pipe(...Be){return function me(Re){return 0===Re.length?ue.y:1===Re.length?Re[0]:function(Be){return Re.reduce((pe,Te)=>Te(pe),Be)}}(Be)(this)}toPromise(Be){return new(Be=$(Be))((pe,Te)=>{let qe;this.subscribe(Qe=>qe=Qe,Qe=>Te(Qe),()=>pe(qe))})}}return Re.create=ke=>new Re(ke),Re})();function $(Re){var ke;return null!==(ke=null!=Re?Re:le.v.Promise)&&void 0!==ke?ke:Promise}},7579:(Xe,Ee,O)=>{O.d(Ee,{x:()=>le});var p=O(8306),ee=O(727);const ue=(0,O(3888).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=O(8737),me=O(2806);let le=(()=>{class ce extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const ne=new oe(this,this);return ne.operator=$,ne}_throwIfClosed(){if(this.closed)throw new ue}next($){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ne of this.currentObservers)ne.next($)}})}error($){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:ne}=this;for(;ne.length;)ne.shift().error($)}})}complete(){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:ne,isStopped:We,observers:Re}=this;return ne||We?ee.Lc:(this.currentObservers=null,Re.push($),new ee.w0(()=>{this.currentObservers=null,(0,ie.P)(Re,$)}))}_checkFinalizedStatuses($){const{hasError:ne,thrownError:We,isStopped:Re}=this;ne?$.error(We):Re&&$.complete()}asObservable(){const $=new p.y;return $.source=this,$}}return ce.create=(W,$)=>new oe(W,$),ce})();class oe extends le{constructor(W,$){super(),this.destination=W,this.source=$}next(W){var $,ne;null===(ne=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===ne||ne.call($,W)}error(W){var $,ne;null===(ne=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===ne||ne.call($,W)}complete(){var W,$;null===($=null===(W=this.destination)||void 0===W?void 0:W.complete)||void 0===$||$.call(W)}_subscribe(W){var $,ne;return null!==(ne=null===($=this.source)||void 0===$?void 0:$.subscribe(W))&&void 0!==ne?ne:ee.Lc}}},930:(Xe,Ee,O)=>{O.d(Ee,{Hp:()=>Be,Lv:()=>ne});var p=O(576),ee=O(727),F=O(2416),ue=O(7849),ie=O(5032);const me=ce("C",void 0,void 0);function ce(Se,be,Ie){return{kind:Se,value:be,error:Ie}}var W=O(3410),$=O(2806);class ne extends ee.w0{constructor(be){super(),this.isStopped=!1,be?(this.destination=be,(0,ee.Nn)(be)&&be.add(this)):this.destination=Qe}static create(be,Ie,je){return new Be(be,Ie,je)}next(be){this.isStopped?qe(function oe(Se){return ce("N",Se,void 0)}(be),this):this._next(be)}error(be){this.isStopped?qe(function le(Se){return ce("E",void 0,Se)}(be),this):(this.isStopped=!0,this._error(be))}complete(){this.isStopped?qe(me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(be){this.destination.next(be)}_error(be){try{this.destination.error(be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const We=Function.prototype.bind;function Re(Se,be){return We.call(Se,be)}class ke{constructor(be){this.partialObserver=be}next(be){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(be)}catch(je){pe(je)}}error(be){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(be)}catch(je){pe(je)}else pe(be)}complete(){const{partialObserver:be}=this;if(be.complete)try{be.complete()}catch(Ie){pe(Ie)}}}class Be extends ne{constructor(be,Ie,je){let He;if(super(),(0,p.m)(be)||!be)He={next:null!=be?be:void 0,error:null!=Ie?Ie:void 0,complete:null!=je?je:void 0};else{let G;this&&F.v.useDeprecatedNextContext?(G=Object.create(be),G.unsubscribe=()=>this.unsubscribe(),He={next:be.next&&Re(be.next,G),error:be.error&&Re(be.error,G),complete:be.complete&&Re(be.complete,G)}):He=be}this.destination=new ke(He)}}function pe(Se){F.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(Se):(0,ue.h)(Se)}function qe(Se,be){const{onStoppedNotification:Ie}=F.v;Ie&&W.z.setTimeout(()=>Ie(Se,be))}const Qe={closed:!0,next:ie.Z,error:function Te(Se){throw Se},complete:ie.Z}},727:(Xe,Ee,O)=>{O.d(Ee,{Lc:()=>me,w0:()=>ie,Nn:()=>le});var p=O(576);const F=(0,O(3888).d)(ce=>function($){ce(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((ne,We)=>`${We+1}) ${ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var ue=O(8737);class ie{constructor(W){this.initialTeardown=W,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let W;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Re of $)Re.remove(this);else $.remove(this);const{initialTeardown:ne}=this;if((0,p.m)(ne))try{ne()}catch(Re){W=Re instanceof F?Re.errors:[Re]}const{_finalizers:We}=this;if(We){this._finalizers=null;for(const Re of We)try{oe(Re)}catch(ke){W=null!=W?W:[],ke instanceof F?W=[...W,...ke.errors]:W.push(ke)}}if(W)throw new F(W)}}add(W){var $;if(W&&W!==this)if(this.closed)oe(W);else{if(W instanceof ie){if(W.closed||W._hasParent(this))return;W._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(W)}}_hasParent(W){const{_parentage:$}=this;return $===W||Array.isArray($)&&$.includes(W)}_addParent(W){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(W),$):$?[$,W]:W}_removeParent(W){const{_parentage:$}=this;$===W?this._parentage=null:Array.isArray($)&&(0,ue.P)($,W)}remove(W){const{_finalizers:$}=this;$&&(0,ue.P)($,W),W instanceof ie&&W._removeParent(this)}}ie.EMPTY=(()=>{const ce=new ie;return ce.closed=!0,ce})();const me=ie.EMPTY;function le(ce){return ce instanceof ie||ce&&"closed"in ce&&(0,p.m)(ce.remove)&&(0,p.m)(ce.add)&&(0,p.m)(ce.unsubscribe)}function oe(ce){(0,p.m)(ce)?ce():ce.unsubscribe()}},2416:(Xe,Ee,O)=>{O.d(Ee,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Xe,Ee,O)=>{O.d(Ee,{E:()=>ee});const ee=new(O(8306).y)(ie=>ie.complete())},8996:(Xe,Ee,O)=>{O.d(Ee,{D:()=>be});var p=O(8421),ee=O(5363),F=O(9468),me=O(8306),oe=O(2202),ce=O(576),W=O(9672);function ne(Ie,je){if(!Ie)throw new Error("Iterable cannot be null");return new me.y(He=>{(0,W.f)(He,je,()=>{const G=Ie[Symbol.asyncIterator]();(0,W.f)(He,je,()=>{G.next().then(Ce=>{Ce.done?He.complete():He.next(Ce.value)})},0,!0)})})}var We=O(3670),Re=O(8239),ke=O(1144),Be=O(6495),pe=O(2206),Te=O(4532),qe=O(3260);function be(Ie,je){return je?function Se(Ie,je){if(null!=Ie){if((0,We.c)(Ie))return function ue(Ie,je){return(0,p.Xf)(Ie).pipe((0,F.R)(je),(0,ee.Q)(je))}(Ie,je);if((0,ke.z)(Ie))return function le(Ie,je){return new me.y(He=>{let G=0;return je.schedule(function(){G===Ie.length?He.complete():(He.next(Ie[G++]),He.closed||this.schedule())})})}(Ie,je);if((0,Re.t)(Ie))return function ie(Ie,je){return(0,p.Xf)(Ie).pipe((0,F.R)(je),(0,ee.Q)(je))}(Ie,je);if((0,pe.D)(Ie))return ne(Ie,je);if((0,Be.T)(Ie))return function $(Ie,je){return new me.y(He=>{let G;return(0,W.f)(He,je,()=>{G=Ie[oe.h](),(0,W.f)(He,je,()=>{let Ce,Y;try{({value:Ce,done:Y}=G.next())}catch(se){return void He.error(se)}Y?He.complete():He.next(Ce)},0,!0)}),()=>(0,ce.m)(null==G?void 0:G.return)&&G.return()})}(Ie,je);if((0,qe.L)(Ie))return function Qe(Ie,je){return ne((0,qe.Q)(Ie),je)}(Ie,je)}throw(0,Te.z)(Ie)}(Ie,je):(0,p.Xf)(Ie)}},8421:(Xe,Ee,O)=>{O.d(Ee,{Xf:()=>We});var p=O(655),ee=O(1144),F=O(8239),ue=O(8306),ie=O(3670),me=O(2206),le=O(4532),oe=O(6495),ce=O(3260),W=O(576),$=O(7849),ne=O(8822);function We(Se){if(Se instanceof ue.y)return Se;if(null!=Se){if((0,ie.c)(Se))return function Re(Se){return new ue.y(be=>{const Ie=Se[ne.L]();if((0,W.m)(Ie.subscribe))return Ie.subscribe(be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Se);if((0,ee.z)(Se))return function ke(Se){return new ue.y(be=>{for(let Ie=0;Ie<Se.length&&!be.closed;Ie++)be.next(Se[Ie]);be.complete()})}(Se);if((0,F.t)(Se))return function Be(Se){return new ue.y(be=>{Se.then(Ie=>{be.closed||(be.next(Ie),be.complete())},Ie=>be.error(Ie)).then(null,$.h)})}(Se);if((0,me.D)(Se))return Te(Se);if((0,oe.T)(Se))return function pe(Se){return new ue.y(be=>{for(const Ie of Se)if(be.next(Ie),be.closed)return;be.complete()})}(Se);if((0,ce.L)(Se))return function qe(Se){return Te((0,ce.Q)(Se))}(Se)}throw(0,le.z)(Se)}function Te(Se){return new ue.y(be=>{(function Qe(Se,be){var Ie,je,He,G;return(0,p.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,p.KL)(Se);!(je=yield Ie.next()).done;)if(be.next(je.value),be.closed)return}catch(Ce){He={error:Ce}}finally{try{je&&!je.done&&(G=Ie.return)&&(yield G.call(Ie))}finally{if(He)throw He.error}}be.complete()})})(Se,be).catch(Ie=>be.error(Ie))})}},6451:(Xe,Ee,O)=>{O.d(Ee,{T:()=>me});var p=O(8189),ee=O(8421),F=O(515),ue=O(7669),ie=O(8996);function me(...le){const oe=(0,ue.yG)(le),ce=(0,ue._6)(le,1/0),W=le;return W.length?1===W.length?(0,ee.Xf)(W[0]):(0,p.J)(ce)((0,ie.D)(W,oe)):F.E}},5403:(Xe,Ee,O)=>{O.d(Ee,{x:()=>ee});var p=O(930);function ee(ue,ie,me,le,oe){return new F(ue,ie,me,le,oe)}class F extends p.Lv{constructor(ie,me,le,oe,ce,W){super(ie),this.onFinalize=ce,this.shouldUnsubscribe=W,this._next=me?function($){try{me($)}catch(ne){ie.error(ne)}}:super._next,this._error=oe?function($){try{oe($)}catch(ne){ie.error(ne)}finally{this.unsubscribe()}}:super._error,this._complete=le?function(){try{le()}catch($){ie.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:me}=this;super.unsubscribe(),!me&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},4004:(Xe,Ee,O)=>{O.d(Ee,{U:()=>F});var p=O(4482),ee=O(5403);function F(ue,ie){return(0,p.e)((me,le)=>{let oe=0;me.subscribe((0,ee.x)(le,ce=>{le.next(ue.call(ie,ce,oe++))}))})}},8189:(Xe,Ee,O)=>{O.d(Ee,{J:()=>F});var p=O(5577),ee=O(4671);function F(ue=1/0){return(0,p.z)(ee.y,ue)}},5577:(Xe,Ee,O)=>{O.d(Ee,{z:()=>oe});var p=O(4004),ee=O(8421),F=O(4482),ue=O(9672),ie=O(5403),le=O(576);function oe(ce,W,$=1/0){return(0,le.m)(W)?oe((ne,We)=>(0,p.U)((Re,ke)=>W(ne,Re,We,ke))((0,ee.Xf)(ce(ne,We))),$):("number"==typeof W&&($=W),(0,F.e)((ne,We)=>function me(ce,W,$,ne,We,Re,ke,Be){const pe=[];let Te=0,qe=0,Qe=!1;const Se=()=>{Qe&&!pe.length&&!Te&&W.complete()},be=je=>Te<ne?Ie(je):pe.push(je),Ie=je=>{Re&&W.next(je),Te++;let He=!1;(0,ee.Xf)($(je,qe++)).subscribe((0,ie.x)(W,G=>{null==We||We(G),Re?be(G):W.next(G)},()=>{He=!0},void 0,()=>{if(He)try{for(Te--;pe.length&&Te<ne;){const G=pe.shift();ke?(0,ue.f)(W,ke,()=>Ie(G)):Ie(G)}Se()}catch(G){W.error(G)}}))};return ce.subscribe((0,ie.x)(W,be,()=>{Qe=!0,Se()})),()=>{null==Be||Be()}}(ne,We,ce,$)))}},5363:(Xe,Ee,O)=>{O.d(Ee,{Q:()=>ue});var p=O(9672),ee=O(4482),F=O(5403);function ue(ie,me=0){return(0,ee.e)((le,oe)=>{le.subscribe((0,F.x)(oe,ce=>(0,p.f)(oe,ie,()=>oe.next(ce),me),()=>(0,p.f)(oe,ie,()=>oe.complete(),me),ce=>(0,p.f)(oe,ie,()=>oe.error(ce),me)))})}},3099:(Xe,Ee,O)=>{O.d(Ee,{B:()=>me});var p=O(8996),ee=O(5698),F=O(7579),ue=O(930),ie=O(4482);function me(oe={}){const{connector:ce=(()=>new F.x),resetOnError:W=!0,resetOnComplete:$=!0,resetOnRefCountZero:ne=!0}=oe;return We=>{let Re=null,ke=null,Be=null,pe=0,Te=!1,qe=!1;const Qe=()=>{null==ke||ke.unsubscribe(),ke=null},Se=()=>{Qe(),Re=Be=null,Te=qe=!1},be=()=>{const Ie=Re;Se(),null==Ie||Ie.unsubscribe()};return(0,ie.e)((Ie,je)=>{pe++,!qe&&!Te&&Qe();const He=Be=null!=Be?Be:ce();je.add(()=>{pe--,0===pe&&!qe&&!Te&&(ke=le(be,ne))}),He.subscribe(je),Re||(Re=new ue.Hp({next:G=>He.next(G),error:G=>{qe=!0,Qe(),ke=le(Se,W,G),He.error(G)},complete:()=>{Te=!0,Qe(),ke=le(Se,$),He.complete()}}),(0,p.D)(Ie).subscribe(Re))})(We)}}function le(oe,ce,...W){return!0===ce?(oe(),null):!1===ce?null:ce(...W).pipe((0,ee.q)(1)).subscribe(()=>oe())}},9468:(Xe,Ee,O)=>{O.d(Ee,{R:()=>ee});var p=O(4482);function ee(F,ue=0){return(0,p.e)((ie,me)=>{me.add(F.schedule(()=>ie.subscribe(me),ue))})}},5698:(Xe,Ee,O)=>{O.d(Ee,{q:()=>ue});var p=O(515),ee=O(4482),F=O(5403);function ue(ie){return ie<=0?()=>p.E:(0,ee.e)((me,le)=>{let oe=0;me.subscribe((0,F.x)(le,ce=>{++oe<=ie&&(le.next(ce),ie<=oe&&le.complete())}))})}},8505:(Xe,Ee,O)=>{O.d(Ee,{b:()=>ie});var p=O(576),ee=O(4482),F=O(5403),ue=O(4671);function ie(me,le,oe){const ce=(0,p.m)(me)||le||oe?{next:me,error:le,complete:oe}:me;return ce?(0,ee.e)((W,$)=>{var ne;null===(ne=ce.subscribe)||void 0===ne||ne.call(ce);let We=!0;W.subscribe((0,F.x)($,Re=>{var ke;null===(ke=ce.next)||void 0===ke||ke.call(ce,Re),$.next(Re)},()=>{var Re;We=!1,null===(Re=ce.complete)||void 0===Re||Re.call(ce),$.complete()},Re=>{var ke;We=!1,null===(ke=ce.error)||void 0===ke||ke.call(ce,Re),$.error(Re)},()=>{var Re,ke;We&&(null===(Re=ce.unsubscribe)||void 0===Re||Re.call(ce)),null===(ke=ce.finalize)||void 0===ke||ke.call(ce)}))}):ue.y}},4408:(Xe,Ee,O)=>{O.d(Ee,{o:()=>ie});var p=O(727);class ee extends p.w0{constructor(le,oe){super()}schedule(le,oe=0){return this}}const F={setInterval(me,le,...oe){const{delegate:ce}=F;return(null==ce?void 0:ce.setInterval)?ce.setInterval(me,le,...oe):setInterval(me,le,...oe)},clearInterval(me){const{delegate:le}=F;return((null==le?void 0:le.clearInterval)||clearInterval)(me)},delegate:void 0};var ue=O(8737);class ie extends ee{constructor(le,oe){super(le,oe),this.scheduler=le,this.work=oe,this.pending=!1}schedule(le,oe=0){if(this.closed)return this;this.state=le;const ce=this.id,W=this.scheduler;return null!=ce&&(this.id=this.recycleAsyncId(W,ce,oe)),this.pending=!0,this.delay=oe,this.id=this.id||this.requestAsyncId(W,this.id,oe),this}requestAsyncId(le,oe,ce=0){return F.setInterval(le.flush.bind(le,this),ce)}recycleAsyncId(le,oe,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return oe;F.clearInterval(oe)}execute(le,oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(le,oe);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,oe){let W,ce=!1;try{this.work(le)}catch($){ce=!0,W=$||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:le,scheduler:oe}=this,{actions:ce}=oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(ce,this),null!=le&&(this.id=this.recycleAsyncId(oe,le,null)),this.delay=null,super.unsubscribe()}}}},7565:(Xe,Ee,O)=>{O.d(Ee,{v:()=>F});var p=O(6063);class ee{constructor(ie,me=ee.now){this.schedulerActionCtor=ie,this.now=me}schedule(ie,me=0,le){return new this.schedulerActionCtor(this,ie).schedule(le,me)}}ee.now=p.l.now;class F extends ee{constructor(ie,me=ee.now){super(ie,me),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ie){const{actions:me}=this;if(this._active)return void me.push(ie);let le;this._active=!0;do{if(le=ie.execute(ie.state,ie.delay))break}while(ie=me.shift());if(this._active=!1,le){for(;ie=me.shift();)ie.unsubscribe();throw le}}}},4986:(Xe,Ee,O)=>{O.d(Ee,{z:()=>F});var p=O(4408);const F=new(O(7565).v)(p.o)},6063:(Xe,Ee,O)=>{O.d(Ee,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(Xe,Ee,O)=>{O.d(Ee,{z:()=>p});const p={setTimeout(ee,F,...ue){const{delegate:ie}=p;return(null==ie?void 0:ie.setTimeout)?ie.setTimeout(ee,F,...ue):setTimeout(ee,F,...ue)},clearTimeout(ee){const{delegate:F}=p;return((null==F?void 0:F.clearTimeout)||clearTimeout)(ee)},delegate:void 0}},2202:(Xe,Ee,O)=>{O.d(Ee,{h:()=>ee});const ee=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Xe,Ee,O)=>{O.d(Ee,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Xe,Ee,O)=>{O.d(Ee,{_6:()=>me,jO:()=>ue,yG:()=>ie});var p=O(576);function F(le){return le[le.length-1]}function ue(le){return(0,p.m)(F(le))?le.pop():void 0}function ie(le){return function ee(le){return le&&(0,p.m)(le.schedule)}(F(le))?le.pop():void 0}function me(le,oe){return"number"==typeof F(le)?le.pop():oe}},8737:(Xe,Ee,O)=>{function p(ee,F){if(ee){const ue=ee.indexOf(F);0<=ue&&ee.splice(ue,1)}}O.d(Ee,{P:()=>p})},3888:(Xe,Ee,O)=>{function p(ee){const ue=ee(ie=>{Error.call(ie),ie.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}O.d(Ee,{d:()=>p})},2806:(Xe,Ee,O)=>{O.d(Ee,{x:()=>F,O:()=>ue});var p=O(2416);let ee=null;function F(ie){if(p.v.useDeprecatedSynchronousErrorHandling){const me=!ee;if(me&&(ee={errorThrown:!1,error:null}),ie(),me){const{errorThrown:le,error:oe}=ee;if(ee=null,le)throw oe}}else ie()}function ue(ie){p.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=ie)}},9672:(Xe,Ee,O)=>{function p(ee,F,ue,ie=0,me=!1){const le=F.schedule(function(){ue(),me?ee.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(ee.add(le),!me)return le}O.d(Ee,{f:()=>p})},4671:(Xe,Ee,O)=>{function p(ee){return ee}O.d(Ee,{y:()=>p})},1144:(Xe,Ee,O)=>{O.d(Ee,{z:()=>p});const p=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(Xe,Ee,O)=>{O.d(Ee,{D:()=>ee});var p=O(576);function ee(F){return Symbol.asyncIterator&&(0,p.m)(null==F?void 0:F[Symbol.asyncIterator])}},576:(Xe,Ee,O)=>{function p(ee){return"function"==typeof ee}O.d(Ee,{m:()=>p})},3670:(Xe,Ee,O)=>{O.d(Ee,{c:()=>F});var p=O(8822),ee=O(576);function F(ue){return(0,ee.m)(ue[p.L])}},6495:(Xe,Ee,O)=>{O.d(Ee,{T:()=>F});var p=O(2202),ee=O(576);function F(ue){return(0,ee.m)(null==ue?void 0:ue[p.h])}},8239:(Xe,Ee,O)=>{O.d(Ee,{t:()=>ee});var p=O(576);function ee(F){return(0,p.m)(null==F?void 0:F.then)}},3260:(Xe,Ee,O)=>{O.d(Ee,{Q:()=>F,L:()=>ue});var p=O(655),ee=O(576);function F(ie){return(0,p.FC)(this,arguments,function*(){const le=ie.getReader();try{for(;;){const{value:oe,done:ce}=yield(0,p.qq)(le.read());if(ce)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(oe)}}finally{le.releaseLock()}})}function ue(ie){return(0,ee.m)(null==ie?void 0:ie.getReader)}},4482:(Xe,Ee,O)=>{O.d(Ee,{A:()=>ee,e:()=>F});var p=O(576);function ee(ue){return(0,p.m)(null==ue?void 0:ue.lift)}function F(ue){return ie=>{if(ee(ie))return ie.lift(function(me){try{return ue(me,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Xe,Ee,O)=>{function p(){}O.d(Ee,{Z:()=>p})},7849:(Xe,Ee,O)=>{O.d(Ee,{h:()=>F});var p=O(2416),ee=O(3410);function F(ue){ee.z.setTimeout(()=>{const{onUnhandledError:ie}=p.v;if(!ie)throw ue;ie(ue)})}},4532:(Xe,Ee,O)=>{function p(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Ee,{z:()=>p})},655:(Xe,Ee,O)=>{function ue(Y,se){var te={};for(var ve in Y)Object.prototype.hasOwnProperty.call(Y,ve)&&se.indexOf(ve)<0&&(te[ve]=Y[ve]);if(null!=Y&&"function"==typeof Object.getOwnPropertySymbols){var ae=0;for(ve=Object.getOwnPropertySymbols(Y);ae<ve.length;ae++)se.indexOf(ve[ae])<0&&Object.prototype.propertyIsEnumerable.call(Y,ve[ae])&&(te[ve[ae]]=Y[ve[ae]])}return te}function oe(Y,se,te,ve){return new(te||(te=Promise))(function(Oe,dt){function Ut(Jt){try{Je(ve.next(Jt))}catch(Pn){dt(Pn)}}function Ot(Jt){try{Je(ve.throw(Jt))}catch(Pn){dt(Pn)}}function Je(Jt){Jt.done?Oe(Jt.value):function ae(Oe){return Oe instanceof te?Oe:new te(function(dt){dt(Oe)})}(Jt.value).then(Ut,Ot)}Je((ve=ve.apply(Y,se||[])).next())})}function pe(Y){return this instanceof pe?(this.v=Y,this):new pe(Y)}function Te(Y,se,te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ae,ve=te.apply(Y,se||[]),Oe=[];return ae={},dt("next"),dt("throw"),dt("return"),ae[Symbol.asyncIterator]=function(){return this},ae;function dt(tn){ve[tn]&&(ae[tn]=function(Zt){return new Promise(function(xr,$t){Oe.push([tn,Zt,xr,$t])>1||Ut(tn,Zt)})})}function Ut(tn,Zt){try{!function Ot(tn){tn.value instanceof pe?Promise.resolve(tn.value.v).then(Je,Jt):Pn(Oe[0][2],tn)}(ve[tn](Zt))}catch(xr){Pn(Oe[0][3],xr)}}function Je(tn){Ut("next",tn)}function Jt(tn){Ut("throw",tn)}function Pn(tn,Zt){tn(Zt),Oe.shift(),Oe.length&&Ut(Oe[0][0],Oe[0][1])}}function Qe(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var te,se=Y[Symbol.asyncIterator];return se?se.call(Y):(Y=function ne(Y){var se="function"==typeof Symbol&&Symbol.iterator,te=se&&Y[se],ve=0;if(te)return te.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&ve>=Y.length&&(Y=void 0),{value:Y&&Y[ve++],done:!Y}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),te={},ve("next"),ve("throw"),ve("return"),te[Symbol.asyncIterator]=function(){return this},te);function ve(Oe){te[Oe]=Y[Oe]&&function(dt){return new Promise(function(Ut,Ot){!function ae(Oe,dt,Ut,Ot){Promise.resolve(Ot).then(function(Je){Oe({value:Je,done:Ut})},dt)}(Ut,Ot,(dt=Y[Oe](dt)).done,dt.value)})}}}O.d(Ee,{_T:()=>ue,mG:()=>oe,qq:()=>pe,FC:()=>Te,KL:()=>Qe})},5e3:(Xe,Ee,O)=>{O.d(Ee,{deG:()=>em,tb:()=>q_,AFp:()=>o0,ip1:()=>fI,CZH:()=>dg,hGG:()=>HI,z2F:()=>gg,sBO:()=>hA,Sil:()=>u0,_Vd:()=>Ol,EJc:()=>rA,SBq:()=>od,qLn:()=>ih,vpe:()=>us,tBr:()=>ei,XFs:()=>mt,OlP:()=>_n,zs3:()=>to,ZZ4:()=>wg,aQg:()=>sy,soG:()=>$l,YKP:()=>zp,h0i:()=>xa,PXZ:()=>DI,R0b:()=>so,FiY:()=>mi,Lbi:()=>Su,g9A:()=>hd,Qsj:()=>Nb,FYo:()=>Nw,JOm:()=>A,tp0:()=>yi,Rgc:()=>Xp,dDg:()=>CI,q4F:()=>kw,GfV:()=>Pb,s_b:()=>tg,ifc:()=>Bt,eFA:()=>Q_,G48:()=>m0,Gpc:()=>$,X6Q:()=>Au,_c5:()=>wA,VLi:()=>d0,c2e:()=>fd,zSh:()=>_u,wAp:()=>vt,vHH:()=>ke,cg1:()=>td,kL8:()=>hb,dqk:()=>Lt,sIi:()=>bl,CqO:()=>wu,QGY:()=>h_,F4k:()=>Ge,RDi:()=>sc,AaK:()=>oe,qOj:()=>i_,TTD:()=>Ki,_Bn:()=>Rw,xp6:()=>BE,uIk:()=>Ep,ekj:()=>aw,Suo:()=>Qb,Xpm:()=>pt,lG2:()=>Vu,Yz7:()=>Zt,cJS:()=>$t,oAB:()=>Mr,Yjl:()=>La,Y36:()=>Ia,_UZ:()=>Tp,qZA:()=>Da,TgZ:()=>xn,EpF:()=>Nh,n5z:()=>tl,LFG:()=>Ue,$8M:()=>bo,$Z:()=>VC,NdJ:()=>Ph,CRH:()=>Jb,oxw:()=>qc,Q6J:()=>rr,iGM:()=>Ar,MAs:()=>bp,CHM:()=>Wu,LSH:()=>fl,YNc:()=>zv,_uU:()=>ZC,Oqu:()=>Pp});var p=O(7579),ee=O(727),F=O(8306),ue=O(6451),ie=O(3099);function me(s){for(let o in s)if(s[o]===me)return o;throw Error("Could not find renamed property on target object.")}function le(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function oe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(oe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function ce(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const W=me({__forward_ref__:me});function $(s){return s.__forward_ref__=$,s.toString=function(){return oe(this())},s}function ne(s){return We(s)?s():s}function We(s){return"function"==typeof s&&s.hasOwnProperty(W)&&s.__forward_ref__===$}class ke extends Error{constructor(o,u){super(function Be(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function pe(s){return"string"==typeof s?s:null==s?"":String(s)}function Te(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():pe(s)}function be(s,o){const u=o?` in ${o}`:"";throw new ke(-201,`No provider for ${Te(s)} found${u}`)}function Ot(s,o){null==s&&function Je(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Zt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function $t(s){return{providers:s.providers||[],imports:s.imports||[]}}function Ft(s){return Bi(s,ji)||Bi(s,Wr)}function Bi(s,o){return s.hasOwnProperty(o)?s[o]:null}function Rr(s){return s&&(s.hasOwnProperty(Ps)||s.hasOwnProperty(Hi))?s[Ps]:null}const ji=me({\u0275prov:me}),Ps=me({\u0275inj:me}),Wr=me({ngInjectableDef:me}),Hi=me({ngInjectorDef:me});var mt=(()=>((mt=mt||{})[mt.Default=0]="Default",mt[mt.Host=1]="Host",mt[mt.Self=2]="Self",mt[mt.SkipSelf=4]="SkipSelf",mt[mt.Optional=8]="Optional",mt))();let si;function kn(s){const o=si;return si=s,o}function ks(s,o,u){const c=Ft(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&mt.Optional?null:void 0!==o?o:void be(oe(s),"Injector")}function Zn(s){return{toString:s}.toString()}var On=(()=>((On=On||{})[On.OnPush=0]="OnPush",On[On.Default=1]="Default",On))(),Bt=(()=>{return(s=Bt||(Bt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Bt;var s})();const at="undefined"!=typeof globalThis&&globalThis,wt="undefined"!=typeof window&&window,vr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Lt=at||"undefined"!=typeof global&&global||wt||vr,Er={},B=[],z=me({\u0275cmp:me}),K=me({\u0275dir:me}),De=me({\u0275pipe:me}),q=me({\u0275mod:me}),X=me({\u0275fac:me}),Ne=me({__NG_ELEMENT_ID__:me});let et=0;function pt(s){return Zn(()=>{const u={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===On.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||B,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Bt.Emulated,id:"c",styles:s.styles||B,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,g=s.features,v=s.pipes;return c.id+=et++,c.inputs=Fa(s.inputs,u),c.outputs=Fa(s.outputs),g&&g.forEach(C=>C(c)),c.directiveDefs=d?()=>("function"==typeof d?d():d).map(hn):null,c.pipeDefs=v?()=>("function"==typeof v?v():v).map(Et):null,c})}function hn(s){return $n(s)||function Nr(s){return s[K]||null}(s)}function Et(s){return function hs(s){return s[De]||null}(s)}const Hn={};function Mr(s){return Zn(()=>{const o={type:s.type,bootstrap:s.bootstrap||B,declarations:s.declarations||B,imports:s.imports||B,exports:s.exports||B,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Hn[s.id]=s.type),o})}function Fa(s,o){if(null==s)return Er;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),u[d]=c,o&&(o[d]=g)}return u}const Vu=pt;function La(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function $n(s){return s[z]||null}function Gn(s,o){const u=s[q]||null;if(!u&&!0===o)throw new Error(`Type ${oe(s)} does not have '\u0275mod' property.`);return u}function Yr(s){return Array.isArray(s)&&"object"==typeof s[1]}function Wi(s){return Array.isArray(s)&&!0===s[1]}function ju(s){return 0!=(8&s.flags)}function Cd(s){return 2==(2&s.flags)}function qi(s){return 1==(1&s.flags)}function zi(s){return null!==s.template}function tc(s){return 0!=(512&s[2])}function br(s,o){return s.hasOwnProperty(X)?s[X]:null}class fo{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Ki(){return Ko}function Ko(s){return s.type.prototype.ngOnChanges&&(s.setInput=Af),Rd}function Rd(){const s=po(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===Er)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Af(s,o,u,c){const d=po(s)||function Zo(s,o){return s[Md]=o}(s,{previous:Er,current:null}),g=d.current||(d.current={}),v=d.previous,C=this.declaredInputs[u],b=v[C];g[C]=new fo(b&&b.currentValue,o,v===Er),s[c]=o}Ki.ngInherit=!0;const Md="__ngSimpleChanges__";function po(s){return s[Md]||null}let Qo;function sc(s){Qo=s}function rn(s){return!!s.listen}const ja={createRenderer:(s,o)=>function Zi(){return void 0!==Qo?Qo:"undefined"!=typeof document?document:void 0}()};function Yt(s){for(;Array.isArray(s);)s=s[0];return s}function js(s,o){return Yt(o[s])}function lr(s,o){return Yt(o[s.index])}function vn(s,o){return s.data[o]}function cr(s,o){const u=o[s];return Yr(u)?u:u[0]}function mo(s){return 4==(4&s[2])}function ps(s){return 128==(128&s[2])}function Si(s,o){return null==o?null:s[o]}function Qi(s){s[18]=0}function Jo(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const gt={lFrame:kd(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Wa(){return gt.bindingsEnabled}function Ae(){return gt.lFrame.lView}function Nt(){return gt.lFrame.tView}function Wu(s){return gt.lFrame.contextLView=s,s[8]}function mn(){let s=ea();for(;null!==s&&64===s.type;)s=s.parent;return s}function ea(){return gt.lFrame.currentTNode}function li(s,o){const u=gt.lFrame;u.currentTNode=s,u.isParent=o}function qa(){return gt.lFrame.isParent}function za(){return gt.isInCheckNoChangesMode}function zu(s){gt.isInCheckNoChangesMode=s}function Hs(){return gt.lFrame.bindingIndex++}function hc(s,o){const u=gt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Za(o)}function Za(s){gt.lFrame.currentDirectiveIndex=s}function fc(){return gt.lFrame.currentQueryIndex}function Qa(s){gt.lFrame.currentQueryIndex=s}function Qg(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function pc(s,o,u){if(u&mt.SkipSelf){let d=o,g=s;for(;!(d=d.parent,null!==d||u&mt.Host||(d=Qg(g),null===d||(g=g[15],10&d.type))););if(null===d)return!1;o=d,s=g}const c=gt.lFrame=Ja();return c.currentTNode=o,c.lView=s,!0}function ta(s){const o=Ja(),u=s[1];gt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Ja(){const s=gt.lFrame,o=null===s?null:s.child;return null===o?kd(s):o}function kd(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function na(){const s=gt.lFrame;return gt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Od=na;function ra(){const s=na();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Qn(){return gt.lFrame.selectedIndex}function Xi(s){gt.lFrame.selectedIndex=s}function Dn(){const s=gt.lFrame;return vn(s.tView,s.selectedIndex)}function Ld(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const g=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:C,ngAfterViewInit:b,ngAfterViewChecked:x,ngOnDestroy:R}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-u,v),C&&((s.contentHooks||(s.contentHooks=[])).push(u,C),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,C)),b&&(s.viewHooks||(s.viewHooks=[])).push(-u,b),x&&((s.viewHooks||(s.viewHooks=[])).push(u,x),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,x)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(u,R)}}function Xa(s,o,u){Jn(s,o,3,u)}function ms(s,o,u,c){(3&s[2])===u&&Jn(s,o,u,c)}function ia(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function Jn(s,o,u,c){const g=null!=c?c:-1,v=o.length-1;let C=0;for(let b=void 0!==c?65535&s[18]:0;b<v;b++)if("number"==typeof o[b+1]){if(C=o[b],null!=c&&C>=c)break}else o[b]<0&&(s[18]+=65536),(C<g||-1==g)&&(Nf(s,u,o,b),s[18]=(4294901760&s[18])+b+2),b++}function Nf(s,o,u,c){const d=u[c]<0,g=u[c+1],C=s[d?-u[c]:u[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(C)}finally{}}}else try{g.call(C)}finally{}}class Yu{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function tt(s,o,u){const c=rn(s);let d=0;for(;d<u.length;){const g=u[d];if("number"==typeof g){if(0!==g)break;d++;const v=u[d++],C=u[d++],b=u[d++];c?s.setAttribute(o,C,b,v):o.setAttributeNS(v,C,b)}else{const v=g,C=u[++d];di(v)?c&&s.setProperty(o,v,C):c?s.setAttribute(o,v,C):o.setAttribute(v,C),d++}}return d}function ci(s){return 3===s||4===s||6===s}function di(s){return 64===s.charCodeAt(0)}function wn(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||gc(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function gc(s,o,u,c,d){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const C=s[g++];if("number"==typeof C){if(C===o){v=-1;break}if(C>o){v=g-1;break}}}for(;g<s.length;){const C=s[g];if("number"==typeof C)break;if(C===u){if(null===c)return void(null!==d&&(s[g+1]=d));if(c===s[g+1])return void(s[g+2]=d)}g++,null!==c&&g++,null!==d&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,u),null!==c&&s.splice(g++,0,c),null!==d&&s.splice(g++,0,d)}function Bd(s){return-1!==s}function es(s){return 32767&s}function ln(s,o){let u=function mc(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let eu=!0;function hi(s){const o=eu;return eu=s,o}let Hd=0;function pn(s,o){const u=aa(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,oa(c.data,s),oa(o,null),oa(c.blueprint,null));const d=$s(s,o),g=s.injectorIndex;if(Bd(d)){const v=es(d),C=ln(d,o),b=C[1].data;for(let x=0;x<8;x++)o[g+x]=C[v+x]|b[v+x]}return o[g+8]=d,g}function oa(s,o){s.push(0,0,0,0,0,0,0,0,o)}function aa(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function $s(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){const g=d[1],v=g.type;if(c=2===v?g.declTNode:1===v?d[6]:null,null===c)return-1;if(u++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function dr(s,o,u){!function _c(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Ne)&&(c=u[Ne]),null==c&&(c=u[Ne]=Hd++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function Gs(s,o,u){if(u&mt.Optional)return s;be(o,"NodeInjector")}function ua(s,o,u,c){if(u&mt.Optional&&void 0===c&&(c=null),0==(u&(mt.Self|mt.Host))){const d=s[9],g=kn(void 0);try{return d?d.get(o,c,u&mt.Optional):ks(o,c,u&mt.Optional)}finally{kn(g)}}return Gs(c,o,u)}function Ws(s,o,u,c=mt.Default,d){if(null!==s){const g=function tu(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Ne)?s[Ne]:void 0;return"number"==typeof o?o>=0?255&o:wo:o}(u);if("function"==typeof g){if(!pc(o,s,c))return c&mt.Host?Gs(d,u,c):ua(o,u,c,d);try{const v=g(c);if(null!=v||c&mt.Optional)return v;be(u)}finally{Od()}}else if("number"==typeof g){let v=null,C=aa(s,o),b=-1,x=c&mt.Host?o[16][6]:null;for((-1===C||c&mt.SkipSelf)&&(b=-1===C?$s(s,o):o[C+8],-1!==b&&jn(c,!1)?(v=o[1],C=es(b),o=ln(b,o)):C=-1);-1!==C;){const R=o[1];if(qs(g,C,R.data)){const L=ca(C,o,u,v,c,x);if(L!==la)return L}b=o[C+8],-1!==b&&jn(c,o[1].data[C+8]===x)&&qs(g,C,o)?(v=R,C=es(b),o=ln(b,o)):C=-1}}}return ua(o,u,c,d)}const la={};function wo(){return new Co(mn(),Ae())}function ca(s,o,u,c,d,g){const v=o[1],C=v.data[s+8],R=Eo(C,v,u,null==c?Cd(C)&&eu:c!=v&&0!=(3&C.type),d&mt.Host&&g===C);return null!==R?da(o,v,R,C):la}function Eo(s,o,u,c,d){const g=s.providerIndexes,v=o.data,C=1048575&g,b=s.directiveStart,R=g>>20,H=d?C+R:s.directiveEnd;for(let J=c?C:C+R;J<H;J++){const we=v[J];if(J<b&&u===we||J>=b&&we.type===u)return J}if(d){const J=v[b];if(J&&zi(J)&&J.type===u)return b}return null}function da(s,o,u,c){let d=s[u];const g=o.data;if(function Vd(s){return s instanceof Yu}(d)){const v=d;v.resolving&&function qe(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new ke(-200,`Circular dependency in DI detected for ${s}${u}`)}(Te(g[u]));const C=hi(v.canSeeViewProviders);v.resolving=!0;const b=v.injectImpl?kn(v.injectImpl):null;pc(s,c,mt.Default);try{d=s[u]=v.factory(void 0,g,s,c),o.firstCreatePass&&u>=c.directiveStart&&function Jg(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(c){const v=Ko(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,v)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),g&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,g),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,g))}(u,g[u],o)}finally{null!==b&&kn(b),hi(C),v.resolving=!1,Od()}}return d}function qs(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function jn(s,o){return!(s&mt.Self||s&mt.Host&&o)}class Co{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return Ws(this._tNode,this._lView,o,c,u)}}function tl(s){return Zn(()=>{const o=s.prototype.constructor,u=o[X]||En(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const g=d[X]||En(d);if(g&&g!==u)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function En(s){return We(s)?()=>{const o=En(ne(s));return o&&o()}:br(s)}function bo(s){return function el(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const g=u[d];if(ci(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(g===o)return u[d+1];d+=2}}}return null}(mn(),s)}const _s="__parameters__";function Tn(s,o,u){return Zn(()=>{const c=function pi(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...g){if(this instanceof d)return c.apply(this,g),this;const v=new d(...g);return C.annotation=v,C;function C(b,x,R){const L=b.hasOwnProperty(_s)?b[_s]:Object.defineProperty(b,_s,{value:[]})[_s];for(;L.length<=R;)L.push(null);return(L[R]=L[R]||[]).push(v),b}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class _n{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Zt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const em=new _n("AnalyzeForEntryComponents");function gi(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),gi(c,o)):o!==s&&o.push(c)}return o}function Xr(s,o){s.forEach(u=>Array.isArray(u)?Xr(u,o):o(u))}function fa(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function To(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Xn(s,o,u){let c=Ks(s,o);return c>=0?s[1|c]=u:(c=~c,function ys(s,o,u,c){let d=s.length;if(d==o)s.push(u,c);else if(1===d)s.push(c,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function su(s,o){const u=Ks(s,o);if(u>=0)return s[1|u]}function Ks(s,o){return function Gd(s,o,u){let c=0,d=s.length>>u;for(;d!==c;){const g=c+(d-c>>1),v=s[g<<u];if(o===v)return g<<u;v>o?d=g:c=g+1}return~(d<<u)}(s,o,1)}const ga={},ma="__NG_DI_FLAG__",xo="ngTempTokenPath",I=/\n/gm,M="__source",U=me({provide:String,useValue:me});let Q;function re(s){const o=Q;return Q=s,o}function _e(s,o=mt.Default){if(void 0===Q)throw new ke(203,"");return null===Q?ks(s,void 0,o):Q.get(s,o&mt.Optional?null:void 0,o)}function Ue(s,o=mt.Default){return(function In(){return si}()||_e)(ne(s),o)}const ft=Ue;function Vt(s){const o=[];for(let u=0;u<s.length;u++){const c=ne(s[u]);if(Array.isArray(c)){if(0===c.length)throw new ke(900,"");let d,g=mt.Default;for(let v=0;v<c.length;v++){const C=c[v],b=Ir(C);"number"==typeof b?-1===b?d=C.token:g|=b:d=C}o.push(Ue(d,g))}else o.push(Ue(c))}return o}function Ct(s,o){return s[ma]=o,s.prototype[ma]=o,s}function Ir(s){return s[ma]}const ei=Ct(Tn("Inject",s=>({token:s})),-1),mi=Ct(Tn("Optional"),8),yi=Ct(Tn("SkipSelf"),4);class Yd{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ya(s){return s instanceof Yd?s.changingThisBreaksApplicationSecurity:s}const Xd=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,pm=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Gt=(()=>((Gt=Gt||{})[Gt.NONE=0]="NONE",Gt[Gt.HTML=1]="HTML",Gt[Gt.STYLE=2]="STYLE",Gt[Gt.SCRIPT=3]="SCRIPT",Gt[Gt.URL=4]="URL",Gt[Gt.RESOURCE_URL=5]="RESOURCE_URL",Gt))();function fl(s){const o=function va(){const s=Ae();return s&&s[12]}();return o?o.sanitize(Gt.URL,s)||"":function Ys(s,o){const u=function Ic(s){return s instanceof Yd&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?ya(s):function Qs(s){return(s=String(s)).match(Xd)||s.match(pm)?s:"unsafe:"+s}(pe(s))}const qf="__ngContext__";function hr(s,o){s[qf]=o}function rh(s){const o=function hu(s){return s[qf]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function wi(s){return s.ngOriginalError}function qy(s,...o){s.error(...o)}class ih{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),c=function Im(s){return s&&s.ngErrorLogger||qy}(o);c(this._console,"ERROR",o),u&&c(this._console,"ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&wi(o);for(;u&&wi(u);)u=wi(u);return u||null}}const Ky=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Lt))();function Es(s){return s instanceof Function?s():s}var A=(()=>((A=A||{})[A.Important=1]="Important",A[A.DashCase=2]="DashCase",A))();function Z(s,o){return undefined(s,o)}function Ze(s){const o=s[3];return Wi(o)?o[3]:o}function Sn(s){return xc(s[13])}function Ci(s){return xc(s[4])}function xc(s){for(;null!==s&&!Wi(s);)s=s[4];return s}function wa(s,o,u,c,d){if(null!=c){let g,v=!1;Wi(c)?g=c:Yr(c)&&(v=!0,c=c[0]);const C=Yt(c);0===s&&null!==u?null==d?Xy(o,u,C):Cs(o,u,C,d||null,!0):1===s&&null!==u?Cs(o,u,C,d||null,!0):2===s?function rv(s,o,u){const c=ep(s,o);c&&function _T(s,o,u,c){rn(s)?s.removeChild(o,u,c):o.removeChild(u)}(s,c,o,u)}(o,C,v):3===s&&o.destroyNode(C),null!=g&&function Xt(s,o,u,c,d){const g=u[7];g!==Yt(u)&&wa(o,s,c,g,d);for(let C=10;C<u.length;C++){const b=u[C];Nm(b[1],b,s,o,c,g)}}(o,s,g,u,d)}}function ah(s,o,u){if(rn(s))return s.createElement(o,u);{const c=null!==u?function ic(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(u):null;return null===c?s.createElement(o):s.createElementNS(c,o)}}function NE(s,o){const u=s[9],c=u.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Jo(d,-1)),u.splice(c,1)}function Yy(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const d=c[17];null!==d&&d!==s&&NE(d,c),o>0&&(s[u-1][4]=c[4]);const g=To(s,10+o);!function Dr(s,o){Nm(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=g[19];null!==v&&v.detachView(g[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function Qy(s,o){if(!(256&o[2])){const u=o[11];rn(u)&&u.destroyNode&&Nm(s,o,u,3,null,null),function uh(s){let o=s[13];if(!o)return Jy(s[1],s);for(;o;){let u=null;if(Yr(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)Yr(o)&&Jy(o[1],o),o=o[3];null===o&&(o=s),Yr(o)&&Jy(o[1],o),u=o&&o[4]}o=u}}(o)}}function Jy(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function kE(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof Yu)){const g=u[c+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const C=d[g[v]],b=g[v+1];try{b.call(C)}finally{}}else try{g.call(d)}finally{}}}}(s,o),function PE(s,o){const u=s.cleanup,c=o[7];let d=-1;if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const v=u[g+1],C="function"==typeof v?v(o):Yt(o[v]),b=c[d=u[g+2]],x=u[g+3];"boolean"==typeof x?C.removeEventListener(u[g],b,x):x>=0?c[d=x]():c[d=-x].unsubscribe(),g+=2}else{const v=c[d=u[g+1]];u[g].call(v)}if(null!==c){for(let g=d+1;g<c.length;g++)c[g]();o[7]=null}}(s,o),1===o[1].type&&rn(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&Wi(o[3])){u!==o[3]&&NE(u,o);const c=o[19];null!==c&&c.detachView(s)}}}function Rm(s,o,u){return function mT(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===Bt.None||d===Bt.Emulated)return null}return lr(c,u)}(s,o.parent,u)}function Cs(s,o,u,c,d){rn(s)?s.insertBefore(o,u,c,d):o.insertBefore(u,c,d)}function Xy(s,o,u){rn(s)?s.appendChild(o,u):o.appendChild(u)}function OE(s,o,u,c,d){null!==c?Cs(s,o,u,c,d):Xy(s,o,u)}function ep(s,o){return rn(s)?s.parentNode(o):o.parentNode}let ev=function LE(s,o,u){return 40&s.type?lr(s,u):null};function Mm(s,o,u,c){const d=Rm(s,c,o),g=o[11],C=function FE(s,o,u){return ev(s,o,u)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(u))for(let b=0;b<u.length;b++)OE(g,d,u[b],C,!1);else OE(g,d,u,C,!1)}function lh(s,o){if(null!==o){const u=o.type;if(3&u)return lr(o,s);if(4&u)return nv(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return lh(s,c);{const d=s[o.index];return Wi(d)?nv(-1,d):Yt(d)}}if(32&u)return Z(o,s)()||Yt(s[o.index]);{const c=UE(s,o);return null!==c?Array.isArray(c)?c[0]:lh(Ze(s[16]),c):lh(s,o.next)}}return null}function UE(s,o){return null!==o?s[16][6].projection[o.projection]:null}function nv(s,o){const u=10+s+1;if(u<o.length){const c=o[u],d=c[1].firstChild;if(null!==d)return lh(c,d)}return o[7]}function iv(s,o,u,c,d,g,v){for(;null!=u;){const C=c[u.index],b=u.type;if(v&&0===o&&(C&&hr(Yt(C),c),u.flags|=4),64!=(64&u.flags))if(8&b)iv(s,o,u.child,c,d,g,!1),wa(o,s,d,C,g);else if(32&b){const x=Z(u,c);let R;for(;R=x();)wa(o,s,d,R,g);wa(o,s,d,C,g)}else 16&b?Pm(s,o,c,u,d,g):wa(o,s,d,C,g);u=v?u.projectionNext:u.next}}function Nm(s,o,u,c,d,g){iv(u,c,s.firstChild,o,d,g,!1)}function Pm(s,o,u,c,d,g){const v=u[16],b=v[6].projection[c.projection];if(Array.isArray(b))for(let x=0;x<b.length;x++)wa(o,s,d,b[x],g);else iv(s,o,b,v[3],d,g,!0)}function ov(s,o,u){rn(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function av(s,o,u){rn(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function fr(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=o.length;if(d+g===c||s.charCodeAt(d+g)<=32)return d}u=d+1}}const km="ng-template";function Ri(s,o,u){let c=0;for(;c<s.length;){let d=s[c++];if(u&&"class"===d){if(d=s[c],-1!==fr(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function Xs(s){return 4===s.type&&s.value!==km}function Oo(s,o,u){return o===(4!==s.type||u?s.value:km)}function k(s,o,u){let c=4;const d=s.attrs||[],g=function At(s){for(let o=0;o<s.length;o++)if(ci(s[o]))return o;return s.length}(d);let v=!1;for(let C=0;C<o.length;C++){const b=o[C];if("number"!=typeof b){if(!v)if(4&c){if(c=2|1&c,""!==b&&!Oo(s,b,u)||""===b&&1===o.length){if(Fo(c))return!1;v=!0}}else{const x=8&c?b:o[++C];if(8&c&&null!==s.attrs){if(!Ri(s.attrs,x,u)){if(Fo(c))return!1;v=!0}continue}const L=gu(8&c?"class":b,d,Xs(s),u);if(-1===L){if(Fo(c))return!1;v=!0;continue}if(""!==x){let H;H=L>g?"":d[L+1].toLowerCase();const J=8&c?H:null;if(J&&-1!==fr(J,x,0)||2&c&&x!==H){if(Fo(c))return!1;v=!0}}}}else{if(!v&&!Fo(c)&&!Fo(b))return!1;if(v&&Fo(b))continue;v=!1,c=b|1&c}}return Fo(c)||v}function Fo(s){return 0==(1&s)}function gu(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let g=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)g=!0;else{if(1===v||2===v){let C=o[++d];for(;"string"==typeof C;)C=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=g?1:2}return-1}return function Om(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function rt(s,o,u=!1){for(let c=0;c<o.length;c++)if(k(s,o[c],u))return!0;return!1}function ch(s,o){return s?":not("+o.trim()+")":o}function vT(s){let o=s[0],u=1,c=2,d="",g=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&c){const C=s[++u];d+="["+v+(C.length>0?'="'+C+'"':"")+"]"}else 8&c?d+="."+v:4&c&&(d+=" "+v);else""!==d&&!Fo(v)&&(o+=ch(g,d),d=""),c=v,g=g||!Fo(c);u++}return""!==d&&(o+=ch(g,d)),o}const xt={};function BE(s){Fr(Nt(),Ae(),Qn()+s,za())}function Fr(s,o,u,c){if(!c)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&Xa(o,g,u)}else{const g=s.preOrderHooks;null!==g&&ms(o,g,0,u)}Xi(u)}function pr(s,o){return s<<17|o<<2}function Lr(s){return s>>17&32767}function Fm(s){return 2|s}function Ea(s){return(131068&s)>>2}function dv(s,o){return-131069&s|o<<2}function np(s){return 1|s}function tC(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const d=u[c],g=u[c+1];if(-1!==g){const v=s.data[g];Qa(d),v.contentQueries(2,o[g],g)}}}function Rc(s,o,u,c,d,g,v,C,b,x){const R=o.blueprint.slice();return R[0]=d,R[2]=140|c,Qi(R),R[3]=R[15]=s,R[8]=u,R[10]=v||s&&s[10],R[11]=C||s&&s[11],R[12]=b||s&&s[12]||null,R[9]=x||s&&s[9]||null,R[6]=g,R[16]=2==o.type?s[16]:R,R}function Mc(s,o,u,c,d){let g=s.data[o];if(null===g)g=function Ev(s,o,u,c,d){const g=ea(),v=qa(),b=s.data[o]=function bv(s,o,u,c,d,g){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=b),null!==g&&(v?null==g.child&&null!==b.parent&&(g.child=b):null===g.next&&(g.next=b)),b}(s,o,u,c,d),function dc(){return gt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=u,g.value=c,g.attrs=d;const v=function _o(){const s=gt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return li(g,!0),g}function _l(s,o,u,c){if(0===u)return-1;const d=o.length;for(let g=0;g<u;g++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function Nc(s,o,u){ta(o);try{const c=s.viewQuery;null!==c&&Zm(1,c,u);const d=s.template;null!==d&&Br(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&tC(s,o),s.staticViewQueries&&Zm(2,s.viewQuery,u);const g=s.components;null!==g&&function rC(s,o){for(let u=0;u<o.length;u++)Mv(s,o[u])}(o,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,ra()}}function yl(s,o,u,c){const d=o[2];if(256==(256&d))return;ta(o);const g=za();try{Qi(o),function Ka(s){return gt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&Br(s,o,u,2,c);const v=3==(3&d);if(!g)if(v){const x=s.preOrderCheckHooks;null!==x&&Xa(o,x,null)}else{const x=s.preOrderHooks;null!==x&&ms(o,x,0,null),ia(o,0)}if(function cp(s){for(let o=Sn(s);null!==o;o=Ci(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const d=u[c],g=d[3];0==(1024&d[2])&&Jo(g,1),d[2]|=1024}}}(o),function gC(s){for(let o=Sn(s);null!==o;o=Ci(o))for(let u=10;u<o.length;u++){const c=o[u],d=c[1];ps(c)&&yl(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&tC(s,o),!g)if(v){const x=s.contentCheckHooks;null!==x&&Xa(o,x)}else{const x=s.contentHooks;null!==x&&ms(o,x,1),ia(o,1)}!function eC(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)Xi(~d);else{const g=d,v=u[++c],C=u[++c];hc(v,g),C(2,o[g])}}}finally{Xi(-1)}}(s,o);const C=s.components;null!==C&&function nC(s,o){for(let u=0;u<o.length;u++)Rv(s,o[u])}(o,C);const b=s.viewQuery;if(null!==b&&Zm(2,b,c),!g)if(v){const x=s.viewCheckHooks;null!==x&&Xa(o,x)}else{const x=s.viewHooks;null!==x&&ms(o,x,2),ia(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),g||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Jo(o[3],-1))}finally{ra()}}function Ur(s,o,u,c){const d=o[10],g=!za(),v=mo(o);try{g&&!v&&d.begin&&d.begin(),v&&Nc(s,o,c),yl(s,o,u,c)}finally{g&&!v&&d.end&&d.end()}}function Br(s,o,u,c,d){const g=Qn(),v=2&c;try{Xi(-1),v&&o.length>20&&Fr(s,o,20,za()),u(c,d)}finally{Xi(g)}}function up(s,o,u){!Wa()||(function gh(s,o,u,c){const d=u.directiveStart,g=u.directiveEnd;s.firstCreatePass||pn(u,o),hr(c,o);const v=u.initialInputs;for(let C=d;C<g;C++){const b=s.data[C],x=zi(b);x&&Pi(o,u,b);const R=da(o,s,C,u);hr(R,o),null!==v&&Wm(0,C-d,R,b,0,v),x&&(cr(u.index,o)[8]=R)}}(s,o,u,lr(u,o)),128==(128&u.flags)&&function xT(s,o,u){const c=u.directiveStart,d=u.directiveEnd,v=u.index,C=function Zu(){return gt.lFrame.currentDirectiveIndex}();try{Xi(v);for(let b=c;b<d;b++){const x=s.data[b],R=o[b];Za(b),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&dC(x,R)}}finally{Xi(-1),Za(C)}}(s,o,u))}function Cv(s,o,u=lr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let g=0;g<c.length;g+=2){const v=c[g+1],C=-1===v?u(o,s):s[v];s[d++]=C}}}function iC(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=lp(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function lp(s,o,u,c,d,g,v,C,b,x){const R=20+c,L=R+d,H=function DT(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:xt);return u}(R,L),J="function"==typeof x?x():x;return H[1]={type:s,blueprint:H,template:u,queries:null,viewQuery:C,declTNode:o,data:H.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:b,consts:J,incompleteFirstPass:!1}}function aC(s,o,u,c){const d=Nv(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&pp(s).push(c,d.length-1))}function Iv(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,d):u[c]=[o,d]}return u}function ph(s,o,u,c){let d=!1;if(Wa()){const g=function Pc(s,o,u){const c=s.directiveRegistry;let d=null;if(c)for(let g=0;g<c.length;g++){const v=c[g];rt(u,v.selectors,!1)&&(d||(d=[]),dr(pn(u,o),s,v.type),zi(v)?(Sv(s,u),d.unshift(v)):d.push(v))}return d}(s,o,u),v=null===c?null:{"":-1};if(null!==g){d=!0,mh(u,s.data.length,g.length);for(let R=0;R<g.length;R++){const L=g[R];L.providersResolver&&L.providersResolver(L)}let C=!1,b=!1,x=_l(s,o,g.length,null);for(let R=0;R<g.length;R++){const L=g[R];u.mergedAttrs=wn(u.mergedAttrs,L.hostAttrs),Av(s,u,o,x,L),hC(x,L,v),null!==L.contentQueries&&(u.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(u.flags|=128);const H=L.type.prototype;!C&&(H.ngOnChanges||H.ngOnInit||H.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),C=!0),!b&&(H.ngOnChanges||H.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),b=!0),x++}!function TT(s,o){const c=o.directiveEnd,d=s.data,g=o.attrs,v=[];let C=null,b=null;for(let x=o.directiveStart;x<c;x++){const R=d[x],L=R.inputs,H=null===g||Xs(o)?null:fC(L,g);v.push(H),C=Iv(L,x,C),b=Iv(R.outputs,x,b)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=16),C.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=C,o.outputs=b}(s,u)}v&&function Gm(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const g=u[o[d+1]];if(null==g)throw new ke(-301,!1);c.push(o[d],g)}}}(u,c,v)}return u.mergedAttrs=wn(u.mergedAttrs,u.attrs),d}function cC(s,o,u,c,d,g){const v=g.hostBindings;if(v){let C=s.hostBindingOpCodes;null===C&&(C=s.hostBindingOpCodes=[]);const b=~o.index;(function AT(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(C)!=b&&C.push(b),C.push(c,d,v)}}function dC(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Sv(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function hC(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;zi(o)&&(u[""]=s)}}function mh(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function Av(s,o,u,c,d){s.data[c]=d;const g=d.factory||(d.factory=br(d.type)),v=new Yu(g,zi(d),null);s.blueprint[c]=v,u[c]=v,cC(s,o,0,c,_l(s,u,d.hostVars,xt),d)}function Pi(s,o,u){const c=lr(o,s),d=iC(u),g=s[10],v=vl(s,Rc(s,d,null,u.onPush?64:16,c,o,g,g.createRenderer(c,u),null,null));s[o.index]=v}function Lo(s,o,u,c,d,g){const v=lr(s,o);!function kc(s,o,u,c,d,g,v){if(null==g)rn(s)?s.removeAttribute(o,d,u):o.removeAttribute(d);else{const C=null==v?pe(g):v(g,c||"",d);rn(s)?s.setAttribute(o,d,C,u):u?o.setAttributeNS(u,d,C):o.setAttribute(d,C)}}(o[11],v,g,s.value,u,c,d)}function Wm(s,o,u,c,d,g){const v=g[o];if(null!==v){const C=c.setInput;for(let b=0;b<v.length;){const x=v[b++],R=v[b++],L=v[b++];null!==C?c.setInput(u,L,x,R):u[R]=L}}}function fC(s,o){let u=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===u&&(u=[]),u.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return u}function xv(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function Rv(s,o){const u=cr(o,s);if(ps(u)){const c=u[1];80&u[2]?yl(c,u,c.template,u[8]):u[5]>0&&dp(u)}}function dp(s){for(let c=Sn(s);null!==c;c=Ci(c))for(let d=10;d<c.length;d++){const g=c[d];if(1024&g[2]){const v=g[1];yl(v,g,v.template,g[8])}else g[5]>0&&dp(g)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const d=cr(u[c],s);ps(d)&&d[5]>0&&dp(d)}}function Mv(s,o){const u=cr(o,s),c=u[1];(function qm(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),Nc(c,u,u[8])}function vl(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function zm(s){for(;s;){s[2]|=64;const o=Ze(s);if(tc(s)&&!o)return s;s=o}return null}function _h(s,o,u){const c=o[10];c.begin&&c.begin();try{yl(s,o,s.template,u)}catch(d){throw wl(o,d),d}finally{c.end&&c.end()}}function Km(s){!function hp(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=rh(u),d=c[1];Ur(d,c,d.template,u)}}(s[8])}function Zm(s,o,u){Qa(0),o(s,u)}const fp=(()=>Promise.resolve(null))();function Nv(s){return s[7]||(s[7]=[])}function pp(s){return s.cleanup||(s.cleanup=[])}function wl(s,o){const u=s[9],c=u?u.get(ih,null):null;c&&c.handleError(o)}function Ym(s,o,u,c,d){for(let g=0;g<u.length;){const v=u[g++],C=u[g++],b=o[v],x=s.data[v];null!==x.setInput?x.setInput(b,d,c,C):b[C]=d}}function mu(s,o,u){const c=js(o,s);!function oh(s,o,u){rn(s)?s.setValue(o,u):o.textContent=u}(s[11],c,u)}function vh(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const C=o[v];"number"==typeof C?g=C:1==g?d=ce(d,C):2==g&&(c=ce(c,C+": "+o[++v]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}const Qm=new _n("INJECTOR",-1);class yC{get(o,u=ga){if(u===ga){const c=new Error(`NullInjectorError: No provider for ${oe(o)}!`);throw c.name="NullInjectorError",c}return u}}const _u=new _n("Set Injector scope."),bs={},Jm={};let Ch;function gp(){return void 0===Ch&&(Ch=new yC),Ch}function kv(s,o=null,u=null,c){const d=An(s,o,u,c);return d._resolveInjectorDefTypes(),d}function An(s,o=null,u=null,c){return new Xm(s,u,o||gp(),c)}class Xm{constructor(o,u,c,d=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];u&&Xr(u,C=>this.processProvider(C,o,u)),Xr([o],C=>this.processInjectorType(C,[],g)),this.records.set(Qm,Ih(void 0,this));const v=this.records.get(_u);this.scope=null!=v?v.value:null,this.source=d||("object"==typeof o?null:oe(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=ga,c=mt.Default){this.assertNotDestroyed();const d=re(this),g=kn(void 0);try{if(!(c&mt.SkipSelf)){let C=this.records.get(o);if(void 0===C){const b=function vC(s){return"function"==typeof s||"object"==typeof s&&s instanceof _n}(o)&&Ft(o);C=b&&this.injectableDefInScope(b)?Ih(Ov(o),bs):null,this.records.set(o,C)}if(null!=C)return this.hydrate(o,C)}return(c&mt.Self?gp():this.parent).get(o,u=c&mt.Optional&&u===ga?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[xo]=v[xo]||[]).unshift(oe(o)),d)throw v;return function tr(s,o,u,c){const d=s[xo];throw o[M]&&d.unshift(o[M]),s.message=function vs(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=oe(o);if(Array.isArray(o))d=o.map(oe).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let C=o[v];g.push(v+":"+("string"==typeof C?JSON.stringify(C):oe(C)))}d=`{${g.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(I,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[xo]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{kn(g),re(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,d)=>o.push(oe(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ke(205,!1)}processInjectorType(o,u,c){if(!(o=ne(o)))return!1;let d=Rr(o);const g=null==d&&o.ngModule||void 0,v=void 0===g?o:g,C=-1!==c.indexOf(v);if(void 0!==g&&(d=Rr(g)),null==d)return!1;if(null!=d.imports&&!C){let R;c.push(v);try{Xr(d.imports,L=>{this.processInjectorType(L,u,c)&&(void 0===R&&(R=[]),R.push(L))})}finally{}if(void 0!==R)for(let L=0;L<R.length;L++){const{ngModule:H,providers:J}=R[L];Xr(J,we=>this.processProvider(we,H,J||B))}}this.injectorDefTypes.add(v);const b=br(v)||(()=>new v);this.records.set(v,Ih(b,bs));const x=d.providers;if(null!=x&&!C){const R=o;Xr(x,L=>this.processProvider(L,R,x))}return void 0!==g&&void 0!==o.providers}processProvider(o,u,c){let d=Dh(o=ne(o))?o:ne(o&&o.provide);const g=function mp(s,o,u){return Fv(s)?Ih(void 0,s.useValue):Ih(bh(s),bs)}(o);if(Dh(o)||!0!==o.multi)this.records.get(d);else{let v=this.records.get(d);v||(v=Ih(void 0,bs,!0),v.factory=()=>Vt(v.multi),this.records.set(d,v)),d=o,v.multi.push(o)}this.records.set(d,g)}hydrate(o,u){return u.value===bs&&(u.value=Jm,u.value=u.factory()),"object"==typeof u.value&&u.value&&function El(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=ne(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function Ov(s){const o=Ft(s),u=null!==o?o.factory:br(s);if(null!==u)return u;if(s instanceof _n)throw new ke(204,!1);if(s instanceof Function)return function MT(s){const o=s.length;if(o>0)throw function So(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new ke(204,!1);const u=function ii(s){const o=s&&(s[ji]||s[Wr]);if(o){const u=function yr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new ke(204,!1)}function bh(s,o,u){let c;if(Dh(s)){const d=ne(s);return br(d)||Ov(d)}if(Fv(s))c=()=>ne(s.useValue);else if(function PT(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Vt(s.deps||[]));else if(function NT(s){return!(!s||!s.useExisting)}(s))c=()=>Ue(ne(s.useExisting));else{const d=ne(s&&(s.useClass||s.provide));if(!function _p(s){return!!s.deps}(s))return br(d)||Ov(d);c=()=>new d(...Vt(s.deps))}return c}function Ih(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function Fv(s){return null!==s&&"object"==typeof s&&U in s}function Dh(s){return"function"==typeof s}let to=(()=>{class s{static create(u,c){var d;if(Array.isArray(u))return kv({name:""},c,u,"");{const g=null!==(d=u.name)&&void 0!==d?d:"";return kv({name:g},u.parent,u.providers,g)}}}return s.THROW_IF_NOT_FOUND=ga,s.NULL=new yC,s.\u0275prov=Zt({token:s,providedIn:"any",factory:()=>Ue(Qm)}),s.__NG_ELEMENT_ID__=-1,s})();function UT(s,o){Ld(rh(s)[1],mn())}function i_(s){let o=function DC(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let d;if(zi(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ke(903,"");d=o.\u0275dir}if(d){if(u){c.push(d);const v=s;v.inputs=s_(s.inputs),v.declaredInputs=s_(s.declaredInputs),v.outputs=s_(s.outputs);const C=d.hostBindings;C&&yu(s,C);const b=d.viewQuery,x=d.contentQueries;if(b&&o_(s,b),x&&SC(s,x),le(s.inputs,d.inputs),le(s.declaredInputs,d.declaredInputs),le(s.outputs,d.outputs),zi(d)&&d.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let v=0;v<g.length;v++){const C=g[v];C&&C.ngInherit&&C(s),C===i_&&(u=!1)}}o=Object.getPrototypeOf(o)}!function TC(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=wn(d.hostAttrs,u=wn(u,d.hostAttrs))}}(c)}function s_(s){return s===Er?{}:s===B?[]:s}function o_(s,o){const u=s.viewQuery;s.viewQuery=u?(c,d)=>{o(c,d),u(c,d)}:o}function SC(s,o){const u=s.contentQueries;s.contentQueries=u?(c,d,g)=>{o(c,d,g),u(c,d,g)}:o}function yu(s,o){const u=s.hostBindings;s.hostBindings=u?(c,d)=>{o(c,d),u(c,d)}:o}let Cl=null;function Fc(){if(!Cl){const s=Lt.Symbol;if(s&&s.iterator)Cl=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Cl=c)}}}return Cl}function bl(s){return!!Sh(s)&&(Array.isArray(s)||!(s instanceof Map)&&Fc()in s)}function Sh(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function gr(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function Ep(s,o,u,c){const d=Ae();return gr(d,Hs(),o)&&(Nt(),Lo(Dn(),d,s,o,u,c)),Ep}function zv(s,o,u,c,d,g,v,C){const b=Ae(),x=Nt(),R=s+20,L=x.firstCreatePass?function jT(s,o,u,c,d,g,v,C,b){const x=o.consts,R=Mc(o,s,4,v||null,Si(x,C));ph(o,u,R,Si(x,b)),Ld(o,R);const L=R.tViews=lp(2,R,c,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,x);return null!==o.queries&&(o.queries.template(o,R),L.queries=o.queries.embeddedTView(R)),R}(R,x,b,o,u,c,d,g,v):x.data[R];li(L,!1);const H=b[11].createComment("");Mm(x,b,H,L),hr(H,b),vl(b,b[R]=xv(H,b,H,L)),qi(L)&&up(x,b,L),null!=v&&Cv(b,L,C)}function bp(s){return function Yi(s,o){return s[o]}(function qu(){return gt.lFrame.contextLView}(),20+s)}function Ia(s,o=mt.Default){const u=Ae();return null===u?Ue(s,o):Ws(mn(),u,ne(s),o)}function VC(){throw new Error("invalid")}function rr(s,o,u){const c=Ae();return gr(c,Hs(),o)&&function Ni(s,o,u,c,d,g,v,C){const b=lr(o,u);let R,x=o.inputs;!C&&null!=x&&(R=x[c])?(Ym(s,u,R,c,d),Cd(o)&&function Dv(s,o){const u=cr(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(c=function Hm(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=v?v(d,o.value||"",c):d,rn(g)?g.setProperty(b,c,d):di(c)||(b.setProperty?b.setProperty(c,d):b[c]=d))}(Nt(),Dn(),c,s,o,c[11],u,!1),rr}function Yv(s,o,u,c,d){const v=d?"class":"style";Ym(s,u,o.inputs[v],v,c)}function xn(s,o,u,c){const d=Ae(),g=Nt(),v=20+s,C=d[11],b=d[v]=ah(C,o,function Fd(){return gt.lFrame.currentNamespace}()),x=g.firstCreatePass?function Sl(s,o,u,c,d,g,v){const C=o.consts,x=Mc(o,s,2,d,Si(C,g));return ph(o,u,x,Si(C,v)),null!==x.attrs&&vh(x,x.attrs,!1),null!==x.mergedAttrs&&vh(x,x.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,x),x}(v,g,d,0,o,u,c):g.data[v];li(x,!0);const R=x.mergedAttrs;null!==R&&tt(C,b,R);const L=x.classes;null!==L&&av(C,b,L);const H=x.styles;return null!==H&&ov(C,b,H),64!=(64&x.flags)&&Mm(g,d,b,x),0===function Gu(){return gt.lFrame.elementDepthCount}()&&hr(b,d),function Ga(){gt.lFrame.elementDepthCount++}(),qi(x)&&(up(g,d,x),function ap(s,o,u){if(ju(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,u[g],g)}}}(g,x,d)),null!==c&&Cv(d,x),xn}function Da(){let s=mn();qa()?function cc(){gt.lFrame.isParent=!1}():(s=s.parent,li(s,!1));const o=s;!function ac(){gt.lFrame.elementDepthCount--}();const u=Nt();return u.firstCreatePass&&(Ld(u,s),ju(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Ud(s){return 0!=(16&s.flags)}(o)&&Yv(u,o,Ae(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Xg(s){return 0!=(32&s.flags)}(o)&&Yv(u,o,Ae(),o.stylesWithoutHost,!1),Da}function Tp(s,o,u,c){return xn(s,o,u,c),Da(),Tp}function Nh(){return Ae()}function h_(s){return!!s&&"function"==typeof s.then}function Ge(s){return!!s&&"function"==typeof s.subscribe}const wu=Ge;function Ph(s,o,u,c){const d=Ae(),g=Nt(),v=mn();return function kh(s,o,u,c,d,g,v,C){const b=qi(c),R=s.firstCreatePass&&pp(s),L=o[8],H=Nv(o);let J=!0;if(3&c.type||C){const $e=lr(c,o),st=C?C($e):$e,xe=H.length,ze=C?qt=>C(Yt(qt[c.index])):c.index;if(rn(u)){let qt=null;if(!C&&b&&(qt=function Ta(s,o,u,c){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const v=d[g];if(v===u&&d[g+1]===c){const C=o[7],b=d[g+2];return C.length>b?C[b]:null}"string"==typeof v&&(g+=2)}return null}(s,o,d,c.index)),null!==qt)(qt.__ngLastListenerFn__||qt).__ngNextListenerFn__=g,qt.__ngLastListenerFn__=g,J=!1;else{g=f_(c,o,L,g,!1);const dn=u.listen(st,d,g);H.push(g,dn),R&&R.push(d,ze,xe,xe+1)}}else g=f_(c,o,L,g,!0),st.addEventListener(d,g,v),H.push(g),R&&R.push(d,ze,xe,v)}else g=f_(c,o,L,g,!1);const we=c.outputs;let Le;if(J&&null!==we&&(Le=we[d])){const $e=Le.length;if($e)for(let st=0;st<$e;st+=2){const en=o[Le[st]][Le[st+1]].subscribe(g),Wl=H.length;H.push(g,en),R&&R.push(d,c.index,Wl,-(Wl+1))}}}(g,d,d[11],v,s,o,!!u,c),Ph}function Eu(s,o,u,c){try{return!1!==u(c)}catch(d){return wl(s,d),!1}}function f_(s,o,u,c,d){return function g(v){if(v===Function)return c;const C=2&s.flags?cr(s.index,o):o;0==(32&o[2])&&zm(C);let b=Eu(o,0,c,v),x=g.__ngNextListenerFn__;for(;x;)b=Eu(o,0,x,v)&&b,x=x.__ngNextListenerFn__;return d&&!1===b&&(v.preventDefault(),v.returnValue=!1),b}}function qc(s=1){return function Ji(s){return(gt.lFrame.contextLView=function Rf(s,o){for(;s>0;)o=o[15],s--;return o}(s,gt.lFrame.contextLView))[8]}(s)}function xp(s,o,u,c,d){const g=s[u+1],v=null===o;let C=c?Lr(g):Ea(g),b=!1;for(;0!==C&&(!1===b||v);){const R=s[C+1];iw(s[C],o)&&(b=!0,s[C+1]=c?np(R):Fm(R)),C=c?Lr(R):Ea(R)}b&&(s[u+1]=c?Fm(g):np(g))}function iw(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Ks(s,o)>=0}function aw(s,o){return function ro(s,o,u,c){const d=Ae(),g=Nt(),v=function Ai(s){const o=gt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);g.firstUpdatePass&&function qC(s,o,u,c){const d=s.data;if(null===d[u+1]){const g=d[Qn()],v=function WC(s,o){return o>=s.expandoStartIndex}(s,u);(function Zc(s,o){return 0!=(s.flags&(o?16:32))})(g,c)&&null===o&&!v&&(o=!1),o=function JT(s,o,u,c){const d=function Ya(s){const o=gt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(u=Np(u=uw(null,s,o,u,c),o.attrs,c),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(u=uw(d,s,o,u,c),null===g){let b=function zC(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==Ea(c))return s[Lr(c)]}(s,o,c);void 0!==b&&Array.isArray(b)&&(b=uw(null,s,o,b[1],c),b=Np(b,o.attrs,c),function XT(s,o,u,c){s[Lr(u?o.classBindings:o.styleBindings)]=c}(s,o,c,b))}else g=function eS(s,o,u){let c;const d=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<d;g++)c=Np(c,s[g].hostAttrs,u);return Np(c,o.attrs,u)}(s,o,c)}return void 0!==g&&(c?o.residualClasses=g:o.residualStyles=g),u}(d,g,o,c),function jC(s,o,u,c,d,g){let v=g?o.classBindings:o.styleBindings,C=Lr(v),b=Ea(v);s[c]=u;let R,x=!1;if(Array.isArray(u)){const L=u;R=L[1],(null===R||Ks(L,R)>0)&&(x=!0)}else R=u;if(d)if(0!==b){const H=Lr(s[C+1]);s[c+1]=pr(H,C),0!==H&&(s[H+1]=dv(s[H+1],c)),s[C+1]=function ET(s,o){return 131071&s|o<<17}(s[C+1],c)}else s[c+1]=pr(C,0),0!==C&&(s[C+1]=dv(s[C+1],c)),C=c;else s[c+1]=pr(b,0),0===C?C=c:s[b+1]=dv(s[b+1],c),b=c;x&&(s[c+1]=Fm(s[c+1])),xp(s,R,c,!0),xp(s,R,c,!1),function Rn(s,o,u,c,d){const g=d?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&Ks(g,o)>=0&&(u[c+1]=np(u[c+1]))}(o,R,s,c,g),v=pr(C,b),g?o.classBindings=v:o.styleBindings=v}(d,g,o,u,v,c)}}(g,s,v,c),o!==xt&&gr(d,v,o)&&function lw(s,o,u,c,d,g,v,C){if(!(3&o.type))return;const b=s.data,x=b[C+1];io(function hv(s){return 1==(1&s)}(x)?cw(b,o,u,d,Ea(x),v):void 0)||(io(g)||function jE(s){return 2==(2&s)}(x)&&(g=cw(b,null,u,d,C,v)),function sv(s,o,u,c,d){const g=rn(s);if(o)d?g?s.addClass(u,c):u.classList.add(c):g?s.removeClass(u,c):u.classList.remove(c);else{let v=-1===c.indexOf("-")?void 0:A.DashCase;if(null==d)g?s.removeStyle(u,c,v):u.style.removeProperty(c);else{const C="string"==typeof d&&d.endsWith("!important");C&&(d=d.slice(0,-10),v|=A.Important),g?s.setStyle(u,c,d,v):u.style.setProperty(c,d,C?"important":"")}}}(c,v,js(Qn(),u),d,g))}(g,g.data[Qn()],d,d[11],s,d[v+1]=function KC(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=oe(ya(s)))),s}(o,u),c,v)}(s,o,null,!0),aw}function uw(s,o,u,c,d){let g=null;const v=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<v&&(g=o[C],c=Np(c,g.hostAttrs,d),g!==s);)C++;return null!==s&&(u.directiveStylingLast=C),c}function Np(s,o,u){const c=u?1:2;let d=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?d=v:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Xn(s,v,!!u||o[++g]))}return void 0===s?null:s}function cw(s,o,u,c,d,g){const v=null===o;let C;for(;d>0;){const b=s[d],x=Array.isArray(b),R=x?b[1]:b,L=null===R;let H=u[d+1];H===xt&&(H=L?B:void 0);let J=L?su(H,c):R===c?H:void 0;if(x&&!io(J)&&(J=su(b,c)),io(J)&&(C=J,v))return C;const we=s[d+1];d=v?Lr(we):Ea(we)}if(null!==o){let b=g?o.residualClasses:o.residualStyles;null!=b&&(C=su(b,c))}return C}function io(s){return void 0!==s}function ZC(s,o=""){const u=Ae(),c=Nt(),d=s+20,g=c.firstCreatePass?Mc(c,d,1,o,null):c.data[d],v=u[d]=function sh(s,o){return rn(s)?s.createText(o):s.createTextNode(o)}(u[11],o);Mm(c,u,v,g),li(g,!1)}function Pp(s){return kp("",s,""),Pp}function kp(s,o,u){const c=Ae(),d=function vu(s,o,u,c){return gr(s,Hs(),u)?o+pe(u)+c:xt}(c,s,o,u);return d!==xt&&mu(c,Qn(),d),kp}const jo=void 0;var cb=["en",[["a","p"],["AM","PM"],jo],[["AM","PM"],jo,jo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],jo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],jo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",jo,"{1} 'at' {0}",jo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Xc(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let ed={};function td(s){const o=function fb(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=sr(o);if(u)return u;const c=o.split("-")[0];if(u=sr(c),u)return u;if("en"===c)return cb;throw new Error(`Missing locale data for the locale "${s}".`)}function hb(s){return td(s)[vt.PluralCase]}function sr(s){return s in ed||(ed[s]=Lt.ng&&Lt.ng.common&&Lt.ng.common.locales&&Lt.ng.common.locales[s]),ed[s]}var vt=(()=>((vt=vt||{})[vt.LocaleId=0]="LocaleId",vt[vt.DayPeriodsFormat=1]="DayPeriodsFormat",vt[vt.DayPeriodsStandalone=2]="DayPeriodsStandalone",vt[vt.DaysFormat=3]="DaysFormat",vt[vt.DaysStandalone=4]="DaysStandalone",vt[vt.MonthsFormat=5]="MonthsFormat",vt[vt.MonthsStandalone=6]="MonthsStandalone",vt[vt.Eras=7]="Eras",vt[vt.FirstDayOfWeek=8]="FirstDayOfWeek",vt[vt.WeekendRange=9]="WeekendRange",vt[vt.DateFormat=10]="DateFormat",vt[vt.TimeFormat=11]="TimeFormat",vt[vt.DateTimeFormat=12]="DateTimeFormat",vt[vt.NumberSymbols=13]="NumberSymbols",vt[vt.NumberFormats=14]="NumberFormats",vt[vt.CurrencyCode=15]="CurrencyCode",vt[vt.CurrencySymbol=16]="CurrencySymbol",vt[vt.CurrencyName=17]="CurrencyName",vt[vt.Currencies=18]="Currencies",vt[vt.Directionality=19]="Directionality",vt[vt.PluralCase=20]="PluralCase",vt[vt.ExtraData=21]="ExtraData",vt))();const Fi="en-US";let sn=Fi;function T_(s,o,u,c,d){if(s=ne(s),Array.isArray(s))for(let g=0;g<s.length;g++)T_(s[g],o,u,c,d);else{const g=Nt(),v=Ae();let C=Dh(s)?s:ne(s.provide),b=bh(s);const x=mn(),R=1048575&x.providerIndexes,L=x.directiveStart,H=x.providerIndexes>>20;if(Dh(s)||!s.multi){const J=new Yu(b,d,Ia),we=mr(C,o,d?R:R+H,L);-1===we?(dr(pn(x,v),g,C),Hp(g,s,o.length),o.push(C),x.directiveStart++,x.directiveEnd++,d&&(x.providerIndexes+=1048576),u.push(J),v.push(J)):(u[we]=J,v[we]=J)}else{const J=mr(C,o,R+H,L),we=mr(C,o,R,R+H),Le=J>=0&&u[J],$e=we>=0&&u[we];if(d&&!$e||!d&&!Le){dr(pn(x,v),g,C);const st=function Pl(s,o,u,c,d){const g=new Yu(s,u,Ia);return g.multi=[],g.index=o,g.componentProviders=0,Sw(g,d,c&&!u),g}(d?xw:Aw,u.length,d,c,b);!d&&$e&&(u[we].providerFactory=st),Hp(g,s,o.length,0),o.push(C),x.directiveStart++,x.directiveEnd++,d&&(x.providerIndexes+=1048576),u.push(st),v.push(st)}else Hp(g,s,J>-1?J:we,Sw(u[d?we:J],b,!d&&c));!d&&c&&$e&&u[we].componentProviders++}}}function Hp(s,o,u,c){const d=Dh(o),g=function kT(s){return!!s.useClass}(o);if(d||g){const b=(g?ne(o.useClass):o).prototype.ngOnDestroy;if(b){const x=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const R=x.indexOf(u);-1===R?x.push(u,[c,b]):x[R+1].push(c,b)}else x.push(u,b)}}}function Sw(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function mr(s,o,u,c){for(let d=u;d<c;d++)if(o[d]===s)return d;return-1}function Aw(s,o,u,c){return $p(this.multi,[])}function xw(s,o,u,c){const d=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,C=da(u,u[1],this.providerFactory.index,c);g=C.slice(0,v),$p(d,g);for(let b=v;b<C.length;b++)g.push(C[b])}else g=[],$p(d,g);return g}function $p(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function Rw(s,o=[]){return u=>{u.providersResolver=(c,d)=>function sd(s,o,u){const c=Nt();if(c.firstCreatePass){const d=zi(s);T_(u,c.data,c.blueprint,d,!0),T_(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class Mw{}class Xh{resolveComponentFactory(o){throw function S_(s){const o=Error(`No component factory found for ${oe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Ol=(()=>{class s{}return s.NULL=new Xh,s})();function Rb(){return Fl(mn(),Ae())}function Fl(s,o){return new od(lr(s,o))}let od=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=Rb,s})();function Mb(s){return s instanceof od?s.nativeElement:s}class Nw{}let Nb=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Gp(){const s=Ae(),u=cr(mn().index,s);return function Pw(s){return s[11]}(Yr(u)?u:s)}(),s})(),ad=(()=>{class s{}return s.\u0275prov=Zt({token:s,providedIn:"root",factory:()=>null}),s})();class Pb{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const kw=new Pb("13.2.7"),Ow={};function A_(s,o,u,c,d=!1){for(;null!==u;){const g=o[u.index];if(null!==g&&c.push(Yt(g)),Wi(g))for(let C=10;C<g.length;C++){const b=g[C],x=b[1].firstChild;null!==x&&A_(b[1],b,x,c)}const v=u.type;if(8&v)A_(s,o,u.child,c);else if(32&v){const C=Z(u,o);let b;for(;b=C();)c.push(b)}else if(16&v){const C=UE(o,u);if(Array.isArray(C))c.push(...C);else{const b=Ze(o[16]);A_(b[1],b,C,c,!0)}}u=d?u.projectionNext:u.next}return c}class Wp{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return A_(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Wi(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(Yy(o,c),To(u,c))}this._attachedToViewContainer=!1}Qy(this._lView[1],this._lView)}onDestroy(o){aC(this._lView[1],this._lView,null,o)}markForCheck(){zm(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){_h(this._lView[1],this._lView,this.context)}checkNoChanges(){!function mC(s,o,u){zu(!0);try{_h(s,o,u)}finally{zu(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new ke(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Xf(s,o){Nm(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ke(902,"");this._appRef=o}}class qp extends Wp{constructor(o){super(o),this._view=o}detectChanges(){Km(this._view)}checkNoChanges(){!function _C(s){zu(!0);try{Km(s)}finally{zu(!1)}}(this._view)}get context(){return null}}class Ll extends Ol{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=$n(o);return new Fw(u,this.ngModule)}}function Vl(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class Fw extends Mw{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function cv(s){return s.map(vT).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return Vl(this.componentDef.inputs)}get outputs(){return Vl(this.componentDef.outputs)}create(o,u,c,d){const g=(d=d||this.ngModule)?function kS(s,o){return{get:(u,c,d)=>{const g=s.get(u,Ow,d);return g!==Ow||c===Ow?g:o.get(u,c,d)}}}(o,d.injector):o,v=g.get(Nw,ja),C=g.get(ad,null),b=v.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",R=c?function jm(s,o,u){if(rn(s))return s.selectRootElement(o,u===Bt.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(b,c,this.componentDef.encapsulation):ah(v.createRenderer(null,this.componentDef),x,function kb(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(x)),L=this.componentDef.onPush?576:528,H=function IC(s,o){return{components:[],scheduler:s||Ky,clean:fp,playerHandler:o||null,flags:0}}(),J=lp(0,null,null,1,0,null,null,null,null,null),we=Rc(null,J,H,L,null,null,v,b,C,g);let Le,$e;ta(we);try{const st=function nr(s,o,u,c,d,g){const v=u[1];u[20]=s;const b=Mc(v,20,2,"#host",null),x=b.mergedAttrs=o.hostAttrs;null!==x&&(vh(b,x,!0),null!==s&&(tt(d,s,x),null!==b.classes&&av(d,s,b.classes),null!==b.styles&&ov(d,s,b.styles)));const R=c.createRenderer(s,o),L=Rc(u,iC(o),null,o.onPush?64:16,u[20],b,c,R,g||null,null);return v.firstCreatePass&&(dr(pn(b,u),v,o.type),Sv(v,b),mh(b,u.length,1)),vl(u,L),u[20]=L}(R,this.componentDef,we,v,b);if(R)if(c)tt(b,R,["ng-version",kw.full]);else{const{attrs:xe,classes:ze}=function wT(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===d?""!==g&&o.push(g,s[++c]):8===d&&u.push(g);else{if(!Fo(d))break;d=g}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);xe&&tt(b,R,xe),ze&&ze.length>0&&av(b,R,ze.join(" "))}if($e=vn(J,20),void 0!==u){const xe=$e.projection=[];for(let ze=0;ze<this.ngContentSelectors.length;ze++){const qt=u[ze];xe.push(null!=qt?Array.from(qt):null)}}Le=function jv(s,o,u,c,d){const g=u[1],v=function lC(s,o,u){const c=mn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),Av(s,c,o,_l(s,o,1,null),u));const d=da(o,s,c.directiveStart,c);hr(d,o);const g=lr(c,o);return g&&hr(g,o),d}(g,u,o);if(c.components.push(v),s[8]=v,d&&d.forEach(b=>b(v,o)),o.contentQueries){const b=mn();o.contentQueries(1,v,b.directiveStart)}const C=mn();return!g.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Xi(C.index),cC(u[1],C,0,C.directiveStart,C.directiveEnd,o),dC(o,v)),v}(st,this.componentDef,we,H,[UT]),Nc(J,we,null)}finally{ra()}return new OS(this.componentType,Le,Fl($e,we),we,$e)}}class OS extends class PS{}{constructor(o,u,c,d,g){super(),this.location=c,this._rootLView=d,this._tNode=g,this.instance=u,this.hostView=this.changeDetectorRef=new qp(d),this.componentType=o}get injector(){return new Co(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class xa{}class zp{}const bu=new Map;class Iu extends xa{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ll(this);const c=Gn(o);this._bootstrapComponents=Es(c.bootstrap),this._r3Injector=An(o,u,[{provide:xa,useValue:this},{provide:Ol,useValue:this.componentFactoryResolver}],oe(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=to.THROW_IF_NOT_FOUND,c=mt.Default){return o===to||o===xa||o===Qm?this:this._r3Injector.get(o,u,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Ul extends zp{constructor(o){super(),this.moduleType=o,null!==Gn(o)&&function Fb(s){const o=new Set;!function u(c){const d=Gn(c,!0),g=d.id;null!==g&&(function Vi(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${oe(o)} vs ${oe(o.name)}`)}(g,bu.get(g),c),bu.set(g,c));const v=Es(d.imports);for(const C of v)o.has(C)||(o.add(C),u(C))}(s)}(o)}create(o){return new Iu(this.moduleType,o)}}function Qp(s){return o=>{setTimeout(s,void 0,o)}}const us=class Hw extends p.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){var d,g,v;let C=o,b=u||(()=>null),x=c;if(o&&"object"==typeof o){const L=o;C=null===(d=L.next)||void 0===d?void 0:d.bind(L),b=null===(g=L.error)||void 0===g?void 0:g.bind(L),x=null===(v=L.complete)||void 0===v?void 0:v.bind(L)}this.__isAsync&&(b=Qp(b),C&&(C=Qp(C)),x&&(x=Qp(x)));const R=super.subscribe({next:C,error:b,complete:x});return o instanceof ee.w0&&o.add(R),R}};function R_(){return this._results[Fc()]()}class Jp{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Fc(),c=Jp.prototype;c[u]||(c[u]=R_)}get changes(){return this._changes||(this._changes=new us)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=gi(o);(this._changesDetected=!function vc(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],g=o[c];if(u&&(d=u(d),g=u(g)),g!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Xp=(()=>{class s{}return s.__NG_ELEMENT_ID__=HS,s})();const $w=Xp,qb=class extends $w{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o){const u=this._declarationTContainer.tViews,c=Rc(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(c[19]=g.createEmbeddedView(u)),Nc(u,c,o),new Wp(c)}};function HS(){return eg(mn(),Ae())}function eg(s,o){return 4&s.type?new qb(o,s,Fl(s,o)):null}let tg=(()=>{class s{}return s.__NG_ELEMENT_ID__=Gw,s})();function Gw(){return Kb(mn(),Ae())}const $S=tg,Ww=class extends $S{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return Fl(this._hostTNode,this._hostLView)}get injector(){return new Co(this._hostTNode,this._hostLView)}get parentInjector(){const o=$s(this._hostTNode,this._hostLView);if(Bd(o)){const u=ln(o,this._hostLView),c=es(o);return new Co(u[1].data[c+8],u)}return new Co(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=zb(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){const d=o.createEmbeddedView(u||{});return this.insert(d,c),d}createComponent(o,u,c,d,g){const v=o&&!function Do(s){return"function"==typeof s}(o);let C;if(v)C=u;else{const L=u||{};C=L.index,c=L.injector,d=L.projectableNodes,g=L.ngModuleRef}const b=v?o:new Fw($n(o)),x=c||this.parentInjector;if(!g&&null==b.ngModule){const H=(v?x:this.parentInjector).get(xa,null);H&&(g=H)}const R=b.create(x,d,void 0,g);return this.insert(R.hostView,C),R}insert(o,u){const c=o._lView,d=c[1];if(function $a(s){return Wi(s[3])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const L=c[3],H=new Ww(L,L[6],L[3]);H.detach(H.indexOf(o))}}const g=this._adjustIndex(u),v=this._lContainer;!function ko(s,o,u,c){const d=10+c,g=u.length;c>0&&(u[d-1][4]=o),c<g-10?(o[4]=u[d],fa(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const v=o[17];null!==v&&u!==v&&function ml(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(v,o);const C=o[19];null!==C&&C.insertView(s),o[2]|=128}(d,c,v,g);const C=nv(g,v),b=c[11],x=ep(b,v[7]);return null!==x&&function Jf(s,o,u,c,d,g){c[0]=d,c[6]=o,Nm(s,c,u,1,d,g)}(d,v[6],b,c,x,C),o.attachToViewContainerRef(),fa(M_(v),g,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=zb(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=Yy(this._lContainer,u);c&&(To(M_(this._lContainer),u),Qy(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=Yy(this._lContainer,u);return c&&null!=To(M_(this._lContainer),u)?new Wp(c):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function zb(s){return s[8]}function M_(s){return s[8]||(s[8]=[])}function Kb(s,o){let u;const c=o[s.index];if(Wi(c))u=c;else{let d;if(8&s.type)d=Yt(c);else{const g=o[11];d=g.createComment("");const v=lr(s,o);Cs(g,ep(g,v),d,function yT(s,o){return rn(s)?s.nextSibling(o):o.nextSibling}(g,v),!1)}o[s.index]=u=xv(c,o,d,s),vl(o,u)}return new Ww(u,s,o)}class sf{constructor(o){this.queryList=o,this.matches=null}clone(){return new sf(this.queryList)}setDirty(){this.queryList.setDirty()}}class N_{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let g=0;g<c;g++){const v=u.getByIndex(g);d.push(this.queries[v.indexInDeclarationView].clone())}return new N_(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Qw(o,u).matches&&this.queries[u].setDirty()}}class qw{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class P_{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,g=this.getByIndex(c).embeddedTView(o,d);g&&(g.indexInDeclarationView=c,null!==u?u.push(g):u=[g])}return null!==u?new P_(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class zw{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new zw(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const g=c[d];this.matchTNodeWithReadOption(o,u,Kw(u,g)),this.matchTNodeWithReadOption(o,u,Eo(u,o,g,!1,!1))}else c===Xp?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Eo(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===od||d===tg||d===Xp&&4&u.type)this.addMatch(u.index,-2);else{const g=Eo(u,o,d,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function Kw(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function Zw(s,o,u,c){return-1===u?function GS(s,o){return 11&s.type?Fl(s,o):4&s.type?eg(s,o):null}(o,s):-2===u?function WS(s,o,u){return u===od?Fl(o,s):u===Xp?eg(o,s):u===tg?Kb(o,s):void 0}(s,o,c):da(s,s[1],u,o)}function Yb(s,o,u,c){const d=o[19].queries[c];if(null===d.matches){const g=s.data,v=u.matches,C=[];for(let b=0;b<v.length;b+=2){const x=v[b];C.push(x<0?null:Zw(o,g[x],v[b+1],u.metadata.read))}d.matches=C}return d.matches}function ng(s,o,u,c){const d=s.queries.getByIndex(u),g=d.matches;if(null!==g){const v=Yb(s,o,d,u);for(let C=0;C<g.length;C+=2){const b=g[C];if(b>0)c.push(v[C/2]);else{const x=g[C+1],R=o[-b];for(let L=10;L<R.length;L++){const H=R[L];H[17]===H[3]&&ng(H[1],H,x,c)}if(null!==R[9]){const L=R[9];for(let H=0;H<L.length;H++){const J=L[H];ng(J[1],J,x,c)}}}}}return c}function Ar(s){const o=Ae(),u=Nt(),c=fc();Qa(c+1);const d=Qw(u,c);if(s.dirty&&mo(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?ng(u,o,c,[]):Yb(u,o,d,c);s.reset(g,Mb),s.notifyOnChanges()}return!0}return!1}function Qb(s,o,u,c){const d=Nt();if(d.firstCreatePass){const g=mn();(function eI(s,o,u){null===s.queries&&(s.queries=new P_),s.queries.track(new zw(o,u))})(d,new qw(o,u,c),g.index),function Yw(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function Xb(s,o,u){const c=new Jp(4==(4&u));aC(s,o,c,c.destroy),null===o[19]&&(o[19]=new N_),o[19].queries.push(new sf(c))}(d,Ae(),u)}function Jb(){return function zS(s,o){return s[19].queries[o].queryList}(Ae(),fc())}function Qw(s,o){return s.queries.getByIndex(o)}function G_(...s){}const fI=new _n("Application Initializer");let dg=(()=>{class s{constructor(u){this.appInits=u,this.resolve=G_,this.reject=G_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(h_(g))u.push(g);else if(wu(g)){const v=new Promise((C,b)=>{g.subscribe({complete:C,error:b})});u.push(v)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(Ue(fI,8))},s.\u0275prov=Zt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const o0=new _n("AppId",{providedIn:"root",factory:function W_(){return`${hg()}${hg()}${hg()}`}});function hg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const hd=new _n("Platform Initializer"),Su=new _n("Platform ID"),q_=new _n("appBootstrapListener");let fd=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Zt({token:s,factory:s.\u0275fac}),s})();const $l=new _n("LocaleId",{providedIn:"root",factory:()=>ft($l,mt.Optional|mt.SkipSelf)||function gI(){return"undefined"!=typeof $localize&&$localize.locale||Fi}()}),rA=new _n("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class a0{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let u0=(()=>{class s{compileModuleSync(u){return new Ul(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),g=Es(Gn(u).declarations).reduce((v,C)=>{const b=$n(C);return b&&v.push(new Fw(b)),v},[]);return new a0(c,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Zt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const l0=(()=>Promise.resolve(0))();function pg(s){"undefined"==typeof Zone?l0.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class so{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new us(!1),this.onMicrotaskEmpty=new us(!1),this.onStable=new us(!1),this.onError=new us(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function sA(){let s=Lt.requestAnimationFrame,o=Lt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function vI(s){const o=()=>{!function yI(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Lt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,K_(s),s.isCheckStableRunning=!0,z_(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),K_(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,g,v,C)=>{try{return wI(s),u.invokeTask(d,g,v,C)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),EI(s)}},onInvoke:(u,c,d,g,v,C,b)=>{try{return wI(s),u.invoke(d,g,v,C,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),EI(s)}},onHasTask:(u,c,d,g)=>{u.hasTask(d,g),c===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,K_(s),z_(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,c,d,g)=>(u.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!so.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(so.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+d,o,oA,G_,G_);try{return g.runTask(v,u,c)}finally{g.cancelTask(v)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const oA={};function z_(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function K_(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function wI(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function EI(s){s._nesting--,z_(s)}class aA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new us,this.onMicrotaskEmpty=new us,this.onStable=new us,this.onError=new us}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}let CI=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{so.assertNotInAngularZone(),pg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())pg(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(Ue(so))},s.\u0275prov=Zt({token:s,factory:s.\u0275fac}),s})(),Z_=(()=>{class s{constructor(){this._applications=new Map,h0.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return h0.findTestabilityInTree(this,u,c)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Zt({token:s,factory:s.\u0275fac}),s})();class c0{addToWindow(o){}findTestabilityInTree(o,u,c){return null}}function d0(s){h0=s}let Ds,h0=new c0;const Y_=new _n("AllowMultipleToken");class DI{constructor(o,u){this.name=o,this.token=u}}function Q_(s,o,u=[]){const c=`Platform: ${o}`,d=new _n(c);return(g=[])=>{let v=SI();if(!v||v.injector.get(Y_,!1))if(s)s(u.concat(g).concat({provide:d,useValue:!0}));else{const C=u.concat(g).concat({provide:d,useValue:!0},{provide:_u,useValue:"platform"});!function lA(s){if(Ds&&!Ds.destroyed&&!Ds.injector.get(Y_,!1))throw new ke(400,"");Ds=s.get(J_);const o=s.get(hd,null);o&&o.forEach(u=>u())}(to.create({providers:C,name:c}))}return function cA(s){const o=SI();if(!o)throw new ke(401,"");return o}()}}function SI(){return Ds&&!Ds.destroyed?Ds:null}let J_=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const C=function dA(s,o){let u;return u="noop"===s?new aA:("zone.js"===s?void 0:s)||new so({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),b=[{provide:so,useValue:C}];return C.run(()=>{const x=to.create({providers:b,parent:this.injector,name:u.moduleType.name}),R=u.create(x),L=R.injector.get(ih,null);if(!L)throw new ke(402,"");return C.runOutsideAngular(()=>{const H=C.onError.subscribe({next:J=>{L.handleError(J)}});R.onDestroy(()=>{Gl(this._modules,R),H.unsubscribe()})}),function f0(s,o,u){try{const c=u();return h_(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(L,C,()=>{const H=R.injector.get(dg);return H.runInitializers(),H.donePromise.then(()=>(function uS(s){Ot(s,"Expected localeId to be defined"),"string"==typeof s&&(sn=s.toLowerCase().replace(/_/g,"-"))}(R.injector.get($l,Fi)||Fi),this._moduleDoBootstrap(R),R))})})}bootstrapModule(u,c=[]){const d=X_({},c);return function uA(s,o,u){const c=new Ul(u);return Promise.resolve(c)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(u){const c=u.injector.get(gg);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new ke(403,"");u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ke(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(Ue(to))},s.\u0275prov=Zt({token:s,factory:s.\u0275fac}),s})();function X_(s,o){return Array.isArray(o)?o.reduce(X_,s):Object.assign(Object.assign({},s),o)}let gg=(()=>{class s{constructor(u,c,d,g,v){this._zone=u,this._injector=c,this._exceptionHandler=d,this._componentFactoryResolver=g,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const C=new F.y(x=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{x.next(this._stable),x.complete()})}),b=new F.y(x=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{so.assertNotInAngularZone(),pg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,x.next(!0))})})});const L=this._zone.onUnstable.subscribe(()=>{so.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{x.next(!1)}))});return()=>{R.unsubscribe(),L.unsubscribe()}});this.isStable=(0,ue.T)(C,b.pipe((0,ie.B)()))}bootstrap(u,c){if(!this._initStatus.done)throw new ke(405,"");let d;d=u instanceof Mw?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(d.componentType);const g=function II(s){return s.isBoundToModule}(d)?void 0:this._injector.get(xa),C=d.create(to.NULL,[],c||d.selector,g),b=C.location.nativeElement,x=C.injector.get(CI,null),R=x&&C.injector.get(Z_);return x&&R&&R.registerApplication(b,x),C.onDestroy(()=>{this.detachView(C.hostView),Gl(this.components,C),R&&R.unregisterApplication(b)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new ke(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;Gl(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(q_,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(Ue(so),Ue(to),Ue(ih),Ue(Ol),Ue(dg))},s.\u0275prov=Zt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Gl(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let AI=!0,ey=!1;function Au(){return ey=!0,AI}function m0(){if(ey)throw new Error("Cannot enable prod mode after platform setup.");AI=!1}let hA=(()=>{class s{}return s.__NG_ELEMENT_ID__=_0,s})();function _0(s){return function fA(s,o,u){if(Cd(s)&&!u){const c=cr(s.index,o);return new Wp(c,c)}return 47&s.type?new Wp(o[16],o):null}(mn(),Ae(),16==(16&s))}class UI{constructor(){}supports(o){return bl(o)}create(o){return new _A(o)}}const mA=(s,o)=>o;class _A{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||mA}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,g=null;for(;u||c;){const v=!c||u&&u.currentIndex<E0(c,d,g)?u:c,C=E0(v,d,g),b=v.currentIndex;if(v===c)d--,c=c._nextRemoved;else if(u=u._next,null==v.previousIndex)d++;else{g||(g=[]);const x=C-d,R=b-d;if(x!=R){for(let H=0;H<x;H++){const J=H<g.length?g[H]:g[H]=0,we=J+H;R<=we&&we<x&&(g[H]=J+1)}g[v.previousIndex]=R-x}}C!==b&&o(v,C,b)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!bl(o))throw new ke(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,v,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let C=0;C<this.length;C++)g=o[C],v=this._trackByFn(C,g),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,g,v,C)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,v,C),c=!0),u=u._next}else d=0,function Gv(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Fc()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,C=>{v=this._trackByFn(d,C),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,C,v,d)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,v,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,g,d)):o=this._addAfter(new yA(u,c),g,d),o}_verifyReinsertion(o,u,c,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new ny),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ny),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class yA{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class BI{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class ny{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new BI,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function E0(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class ry{constructor(){}supports(o){return o instanceof Map||Sh(o)}create(){return new C0}}class C0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Sh(o)))throw new ke(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const g=d._prev,v=d._next;return g&&(g._next=v),v&&(v._prev=g),d._next=null,d._prev=null,d}const c=new b0(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class b0{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function vg(){return new wg([new UI])}let wg=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||vg()),deps:[[s,new yi,new mi]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new ke(901,"")}}return s.\u0275prov=Zt({token:s,providedIn:"root",factory:vg}),s})();function iy(){return new sy([new ry])}let sy=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||iy()),deps:[[s,new yi,new mi]]}}find(u){const c=this.factories.find(g=>g.supports(u));if(c)return c;throw new ke(901,"")}}return s.\u0275prov=Zt({token:s,providedIn:"root",factory:iy}),s})();const wA=Q_(null,"core",[{provide:Su,useValue:"unknown"},{provide:J_,deps:[to]},{provide:Z_,deps:[]},{provide:fd,deps:[]}]);let HI=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(Ue(gg))},s.\u0275mod=Mr({type:s}),s.\u0275inj=$t({}),s})()},3942:(Xe,Ee,O)=>{O.d(Ee,{Z:()=>ke});var p=O(2090),ee=O(4859),F=O(9681),ue=O(1877);class ie{constructor(pe,Te){this._delegate=pe,this.firebase=Te,(0,F._addComponent)(pe,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(pe,Te=F._DEFAULT_ENTRY_NAME){var qe;this._delegate.checkDestroyed();const Qe=this._delegate.container.getProvider(pe);return!Qe.isInitialized()&&"EXPLICIT"===(null===(qe=Qe.getComponent())||void 0===qe?void 0:qe.instantiationMode)&&Qe.initialize(),Qe.getImmediate({identifier:Te})}_removeServiceInstance(pe,Te=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(Te)}_addComponent(pe){(0,F._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,F._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function ce(){const Be=function oe(Be){const pe={},Te={__esModule:!0,initializeApp:function Se(He,G={}){const Ce=F.initializeApp(He,G);if((0,p.r3)(pe,Ce.name))return pe[Ce.name];const Y=new Be(Ce,Te);return pe[Ce.name]=Y,Y},app:Qe,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function Ie(He){const G=He.name,Ce=G.replace("-compat","");if(F._registerComponent(He)&&"PUBLIC"===He.type){const Y=(se=Qe())=>{if("function"!=typeof se[Ce])throw le.create("invalid-app-argument",{appName:G});return se[Ce]()};void 0!==He.serviceProps&&(0,p.ZB)(Y,He.serviceProps),Te[Ce]=Y,Be.prototype[Ce]=function(...se){return this._getService.bind(this,G).apply(this,He.multipleInstances?se:[])}}return"PUBLIC"===He.type?Te[Ce]:null},removeApp:function qe(He){delete pe[He]},useAsService:function je(He,G){return"serverAuth"===G?null:G},modularAPIs:F}};function Qe(He){if(!(0,p.r3)(pe,He=He||F._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:He});return pe[He]}return Te.default=Te,Object.defineProperty(Te,"apps",{get:function be(){return Object.keys(pe).map(He=>pe[He])}}),Qe.App=Be,Te}(ie);return Be.INTERNAL=Object.assign(Object.assign({},Be.INTERNAL),{createFirebaseNamespace:ce,extendNamespace:function pe(Te){(0,p.ZB)(Be,Te)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),Be}(),$=new ue.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Be=self.firebase.SDK_VERSION;Be&&Be.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ke=W;!function Re(Be){(0,F.registerVersion)("@firebase/app-compat","0.1.25",Be)}()},9681:(Xe,Ee,O)=>{O.r(Ee),O.d(Ee,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>ji,_DEFAULT_ENTRY_NAME:()=>Ot,_addComponent:()=>tn,_addOrOverwriteComponent:()=>Zt,_apps:()=>Jt,_clearComponents:()=>Bi,_components:()=>Pn,_getProvider:()=>$t,_registerComponent:()=>xr,_removeServiceInstance:()=>Ft,deleteApp:()=>mt,getApp:()=>Wr,getApps:()=>Hi,initializeApp:()=>Ps,onLog:()=>kn,registerVersion:()=>In,setLogLevel:()=>ks});var p=O(5861),ee=O(4859),F=O(1877),ue=O(2090),ie=O(8766);class me{constructor(X){this.container=X}getPlatformInfoString(){return this.container.getProviders().map(Ne=>{if(function le(q){const X=q.getComponent();return"VERSION"===(null==X?void 0:X.type)}(Ne)){const et=Ne.getImmediate();return`${et.library}/${et.version}`}return null}).filter(Ne=>Ne).join(" ")}}const oe="@firebase/app",W=new F.Yd("@firebase/app"),Ot="[DEFAULT]",Je={[oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Jt=new Map,Pn=new Map;function tn(q,X){try{q.container.addComponent(X)}catch(Ne){W.debug(`Component ${X.name} failed to register with FirebaseApp ${q.name}`,Ne)}}function Zt(q,X){q.container.addOrOverwriteComponent(X)}function xr(q){const X=q.name;if(Pn.has(X))return W.debug(`There were multiple attempts to register component ${X}.`),!1;Pn.set(X,q);for(const Ne of Jt.values())tn(Ne,q);return!0}function $t(q,X){const Ne=q.container.getProvider("heartbeat").getImmediate({optional:!0});return Ne&&Ne.triggerHeartbeat(),q.container.getProvider(X)}function Ft(q,X,Ne=Ot){$t(q,X).clearInstance(Ne)}function Bi(){Pn.clear()}const yr=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Rr{constructor(X,Ne,et){this._isDeleted=!1,this._options=Object.assign({},X),this._config=Object.assign({},Ne),this._name=Ne.name,this._automaticDataCollectionEnabled=Ne.automaticDataCollectionEnabled,this._container=et,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(X){this.checkDestroyed(),this._automaticDataCollectionEnabled=X}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(X){this._isDeleted=X}checkDestroyed(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}}const ji="9.8.1";function Ps(q,X={}){"object"!=typeof X&&(X={name:X});const Ne=Object.assign({name:Ot,automaticDataCollectionEnabled:!1},X),et=Ne.name;if("string"!=typeof et||!et)throw yr.create("bad-app-name",{appName:String(et)});const pt=Jt.get(et);if(pt){if((0,ue.vZ)(q,pt.options)&&(0,ue.vZ)(Ne,pt.config))return pt;throw yr.create("duplicate-app",{appName:et})}const bt=new ee.H0(et);for(const Et of Pn.values())bt.addComponent(Et);const hn=new Rr(q,Ne,bt);return Jt.set(et,hn),hn}function Wr(q=Ot){const X=Jt.get(q);if(!X)throw yr.create("no-app",{appName:q});return X}function Hi(){return Array.from(Jt.values())}function mt(q){return si.apply(this,arguments)}function si(){return(si=(0,p.Z)(function*(q){const X=q.name;Jt.has(X)&&(Jt.delete(X),yield Promise.all(q.container.getProviders().map(Ne=>Ne.delete())),q.isDeleted=!0)})).apply(this,arguments)}function In(q,X,Ne){var et;let pt=null!==(et=Je[q])&&void 0!==et?et:q;Ne&&(pt+=`-${Ne}`);const bt=pt.match(/\s|\//),hn=X.match(/\s|\//);if(bt||hn){const Et=[`Unable to register library "${pt}" with version "${X}":`];return bt&&Et.push(`library name "${pt}" contains illegal characters (whitespace or "/")`),bt&&hn&&Et.push("and"),hn&&Et.push(`version name "${X}" contains illegal characters (whitespace or "/")`),void W.warn(Et.join(" "))}xr(new ee.wA(`${pt}-version`,()=>({library:pt,version:X}),"VERSION"))}function kn(q,X){if(null!==q&&"function"!=typeof q)throw yr.create("invalid-log-argument");(0,F.Am)(q,X)}function ks(q){(0,F.Ub)(q)}const On="firebase-heartbeat-store";let oi=null;function uo(){return oi||(oi=(0,ie.X3)("firebase-heartbeat-database",1,{upgrade:(q,X)=>{0===X&&q.createObjectStore(On)}}).catch(q=>{throw yr.create("storage-open",{originalErrorMessage:q.message})})),oi}function at(){return(at=(0,p.Z)(function*(q){try{return(yield uo()).transaction(On).objectStore(On).get(ai(q))}catch(X){throw yr.create("storage-get",{originalErrorMessage:X.message})}})).apply(this,arguments)}function wt(q,X){return vr.apply(this,arguments)}function vr(){return(vr=(0,p.Z)(function*(q,X){try{const et=(yield uo()).transaction(On,"readwrite");return yield et.objectStore(On).put(X,ai(q)),et.done}catch(Ne){throw yr.create("storage-set",{originalErrorMessage:Ne.message})}})).apply(this,arguments)}function ai(q){return`${q.name}!${q.options.appId}`}class wr{constructor(X){this.container=X,this._heartbeatsCache=null;const Ne=this.container.getProvider("app").getImmediate();this._storage=new z(Ne),this._heartbeatsCachePromise=this._storage.read().then(et=>(this._heartbeatsCache=et,et))}triggerHeartbeat(){var X=this;return(0,p.Z)(function*(){const et=X.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),pt=Er();if(null===X._heartbeatsCache&&(X._heartbeatsCache=yield X._heartbeatsCachePromise),X._heartbeatsCache.lastSentHeartbeatDate!==pt&&!X._heartbeatsCache.heartbeats.some(bt=>bt.date===pt))return X._heartbeatsCache.heartbeats.push({date:pt,agent:et}),X._heartbeatsCache.heartbeats=X._heartbeatsCache.heartbeats.filter(bt=>{const hn=new Date(bt.date).valueOf();return Date.now()-hn<=2592e6}),X._storage.overwrite(X._heartbeatsCache)})()}getHeartbeatsHeader(){var X=this;return(0,p.Z)(function*(){if(null===X._heartbeatsCache&&(yield X._heartbeatsCachePromise),null===X._heartbeatsCache||0===X._heartbeatsCache.heartbeats.length)return"";const Ne=Er(),{heartbeatsToSend:et,unsentEntries:pt}=function B(q,X=1024){const Ne=[];let et=q.slice();for(const pt of q){const bt=Ne.find(hn=>hn.agent===pt.agent);if(bt){if(bt.dates.push(pt.date),K(Ne)>X){bt.dates.pop();break}}else if(Ne.push({agent:pt.agent,dates:[pt.date]}),K(Ne)>X){Ne.pop();break}et=et.slice(1)}return{heartbeatsToSend:Ne,unsentEntries:et}}(X._heartbeatsCache.heartbeats),bt=(0,ue.L)(JSON.stringify({version:2,heartbeats:et}));return X._heartbeatsCache.lastSentHeartbeatDate=Ne,pt.length>0?(X._heartbeatsCache.heartbeats=pt,yield X._storage.overwrite(X._heartbeatsCache)):(X._heartbeatsCache.heartbeats=[],X._storage.overwrite(X._heartbeatsCache)),bt})()}}function Er(){return(new Date).toISOString().substring(0,10)}class z{constructor(X){this.app=X,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var X=this;return(0,p.Z)(function*(){return(yield X._canUseIndexedDBPromise)&&(yield function Bt(q){return at.apply(this,arguments)}(X.app))||{heartbeats:[]}})()}overwrite(X){var Ne=this;return(0,p.Z)(function*(){var et;if(yield Ne._canUseIndexedDBPromise){const bt=yield Ne.read();return wt(Ne.app,{lastSentHeartbeatDate:null!==(et=X.lastSentHeartbeatDate)&&void 0!==et?et:bt.lastSentHeartbeatDate,heartbeats:X.heartbeats})}})()}add(X){var Ne=this;return(0,p.Z)(function*(){var et;if(yield Ne._canUseIndexedDBPromise){const bt=yield Ne.read();return wt(Ne.app,{lastSentHeartbeatDate:null!==(et=X.lastSentHeartbeatDate)&&void 0!==et?et:bt.lastSentHeartbeatDate,heartbeats:[...bt.heartbeats,...X.heartbeats]})}})()}}function K(q){return(0,ue.L)(JSON.stringify({version:2,heartbeats:q})).length}!function De(q){xr(new ee.wA("platform-logger",X=>new me(X),"PRIVATE")),xr(new ee.wA("heartbeat",X=>new wr(X),"PRIVATE")),In(oe,"0.7.24",q),In(oe,"0.7.24","esm2017"),In("fire-js","")}("")},4859:(Xe,Ee,O)=>{O.d(Ee,{wA:()=>F,H0:()=>oe,zt:()=>ie});var p=O(5861),ee=O(2090);class F{constructor(W,$,ne){this.name=W,this.instanceFactory=$,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const ue="[DEFAULT]";class ie{constructor(W,$){this.name=W,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const $=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has($)){const ne=new ee.BH;if(this.instancesDeferred.set($,ne),this.isInitialized($)||this.shouldAutoInitialize())try{const We=this.getOrInitializeService({instanceIdentifier:$});We&&ne.resolve(We)}catch(We){}}return this.instancesDeferred.get($).promise}getImmediate(W){var $;const ne=this.normalizeInstanceIdentifier(null==W?void 0:W.identifier),We=null!==($=null==W?void 0:W.optional)&&void 0!==$&&$;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if(We)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(Re){if(We)return null;throw Re}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function le(ce){return"EAGER"===ce.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:ue})}catch($){}for(const[$,ne]of this.instancesDeferred.entries()){const We=this.normalizeInstanceIdentifier($);try{const Re=this.getOrInitializeService({instanceIdentifier:We});ne.resolve(Re)}catch(Re){}}}}clearInstance(W=ue){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,p.Z)(function*(){const $=Array.from(W.instances.values());yield Promise.all([...$.filter(ne=>"INTERNAL"in ne).map(ne=>ne.INTERNAL.delete()),...$.filter(ne=>"_delete"in ne).map(ne=>ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=ue){return this.instances.has(W)}getOptions(W=ue){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:$={}}=W,ne=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(ne))throw Error(`${this.name}(${ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const We=this.getOrInitializeService({instanceIdentifier:ne,options:$});for(const[Re,ke]of this.instancesDeferred.entries())ne===this.normalizeInstanceIdentifier(Re)&&ke.resolve(We);return We}onInit(W,$){var ne;const We=this.normalizeInstanceIdentifier($),Re=null!==(ne=this.onInitCallbacks.get(We))&&void 0!==ne?ne:new Set;Re.add(W),this.onInitCallbacks.set(We,Re);const ke=this.instances.get(We);return ke&&W(ke,We),()=>{Re.delete(W)}}invokeOnInitCallbacks(W,$){const ne=this.onInitCallbacks.get($);if(ne)for(const We of ne)try{We(W,$)}catch(Re){}}getOrInitializeService({instanceIdentifier:W,options:$={}}){let ne=this.instances.get(W);if(!ne&&this.component&&(ne=this.component.instanceFactory(this.container,{instanceIdentifier:(ce=W,ce===ue?void 0:ce),options:$}),this.instances.set(W,ne),this.instancesOptions.set(W,$),this.invokeOnInitCallbacks(ne,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,ne)}catch(We){}var ce;return ne||null}normalizeInstanceIdentifier(W=ue){return this.component?this.component.multipleInstances?W:ue:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class oe{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const $=this.getProvider(W.name);if($.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);$.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const $=new ie(W,this);return this.providers.set(W,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(Xe,Ee,O)=>{O.d(Ee,{in:()=>ee,Yd:()=>le,Ub:()=>oe,Am:()=>ce});const p=[];var ee=(()=>{return(W=ee||(ee={}))[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",ee;var W})();const F={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},ue=ee.INFO,ie={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},me=(W,$,...ne)=>{if($<W.logLevel)return;const We=(new Date).toISOString(),Re=ie[$];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Re](`[${We}]  ${W.name}:`,...ne)};class le{constructor($){this.name=$,this._logLevel=ue,this._logHandler=me,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in ee))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?F[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...$),this._logHandler(this,ee.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...$),this._logHandler(this,ee.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...$),this._logHandler(this,ee.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...$),this._logHandler(this,ee.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...$),this._logHandler(this,ee.ERROR,...$)}}function oe(W){p.forEach($=>{$.setLogLevel(W)})}function ce(W,$){for(const ne of p){let We=null;$&&$.level&&(We=F[$.level]),ne.userLogHandler=null===W?null:(Re,ke,...Be)=>{const pe=Be.map(Te=>{if(null==Te)return null;if("string"==typeof Te)return Te;if("number"==typeof Te||"boolean"==typeof Te)return Te.toString();if(Te instanceof Error)return Te.message;try{return JSON.stringify(Te)}catch(qe){return null}}).filter(Te=>Te).join(" ");ke>=(null!=We?We:Re.logLevel)&&W({level:ee[ke].toLowerCase(),message:pe,args:Be,type:Re.name})}}}},8766:(Xe,Ee,O)=>{O.d(Ee,{Lj:()=>Se,X3:()=>Qe});var p=O(5861);let F,ue;const le=new WeakMap,oe=new WeakMap,ce=new WeakMap,W=new WeakMap,$=new WeakMap;let Re={get(G,Ce,Y){if(G instanceof IDBTransaction){if("done"===Ce)return oe.get(G);if("objectStoreNames"===Ce)return G.objectStoreNames||ce.get(G);if("store"===Ce)return Y.objectStoreNames[1]?void 0:Y.objectStore(Y.objectStoreNames[0])}return Te(G[Ce])},set:(G,Ce,Y)=>(G[Ce]=Y,!0),has:(G,Ce)=>G instanceof IDBTransaction&&("done"===Ce||"store"===Ce)||Ce in G};function pe(G){return"function"==typeof G?function Be(G){return G!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function me(){return ue||(ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(G)?function(...Ce){return G.apply(qe(this),Ce),Te(le.get(this))}:function(...Ce){return Te(G.apply(qe(this),Ce))}:function(Ce,...Y){const se=G.call(qe(this),Ce,...Y);return ce.set(se,Ce.sort?Ce.sort():[Ce]),Te(se)}}(G):(G instanceof IDBTransaction&&function We(G){if(oe.has(G))return;const Ce=new Promise((Y,se)=>{const te=()=>{G.removeEventListener("complete",ve),G.removeEventListener("error",ae),G.removeEventListener("abort",ae)},ve=()=>{Y(),te()},ae=()=>{se(G.error||new DOMException("AbortError","AbortError")),te()};G.addEventListener("complete",ve),G.addEventListener("error",ae),G.addEventListener("abort",ae)});oe.set(G,Ce)}(G),((G,Ce)=>Ce.some(Y=>G instanceof Y))(G,function ie(){return F||(F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(G,Re):G)}function Te(G){if(G instanceof IDBRequest)return function ne(G){const Ce=new Promise((Y,se)=>{const te=()=>{G.removeEventListener("success",ve),G.removeEventListener("error",ae)},ve=()=>{Y(Te(G.result)),te()},ae=()=>{se(G.error),te()};G.addEventListener("success",ve),G.addEventListener("error",ae)});return Ce.then(Y=>{Y instanceof IDBCursor&&le.set(Y,G)}).catch(()=>{}),$.set(Ce,G),Ce}(G);if(W.has(G))return W.get(G);const Ce=pe(G);return Ce!==G&&(W.set(G,Ce),$.set(Ce,G)),Ce}const qe=G=>$.get(G);function Qe(G,Ce,{blocked:Y,upgrade:se,blocking:te,terminated:ve}={}){const ae=indexedDB.open(G,Ce),Oe=Te(ae);return se&&ae.addEventListener("upgradeneeded",dt=>{se(Te(ae.result),dt.oldVersion,dt.newVersion,Te(ae.transaction))}),Y&&ae.addEventListener("blocked",()=>Y()),Oe.then(dt=>{ve&&dt.addEventListener("close",()=>ve()),te&&dt.addEventListener("versionchange",()=>te())}).catch(()=>{}),Oe}function Se(G,{blocked:Ce}={}){const Y=indexedDB.deleteDatabase(G);return Ce&&Y.addEventListener("blocked",()=>Ce()),Te(Y).then(()=>{})}const be=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],je=new Map;function He(G,Ce){if(!(G instanceof IDBDatabase)||Ce in G||"string"!=typeof Ce)return;if(je.get(Ce))return je.get(Ce);const Y=Ce.replace(/FromIndex$/,""),se=Ce!==Y,te=Ie.includes(Y);if(!(Y in(se?IDBIndex:IDBObjectStore).prototype)||!te&&!be.includes(Y))return;const ve=function(){var ae=(0,p.Z)(function*(Oe,...dt){const Ut=this.transaction(Oe,te?"readwrite":"readonly");let Ot=Ut.store;return se&&(Ot=Ot.index(dt.shift())),(yield Promise.all([Ot[Y](...dt),te&&Ut.done]))[0]});return function(dt){return ae.apply(this,arguments)}}();return je.set(Ce,ve),ve}!function ke(G){Re=G(Re)}(G=>bF(CF({},G),{get:(Ce,Y,se)=>He(Ce,Y)||G.get(Ce,Y,se),has:(Ce,Y)=>!!He(Ce,Y)||G.has(Ce,Y)}))},5861:(Xe,Ee,O)=>{function p(F,ue,ie,me,le,oe,ce){try{var W=F[oe](ce),$=W.value}catch(ne){return void ie(ne)}W.done?ue($):Promise.resolve($).then(me,le)}function ee(F){return function(){var ue=this,ie=arguments;return new Promise(function(me,le){var oe=F.apply(ue,ie);function ce($){p(oe,me,le,ce,W,"next",$)}function W($){p(oe,me,le,ce,W,"throw",$)}ce(void 0)})}}O.d(Ee,{Z:()=>ee})}},Xe=>{Xe(Xe.s=6003)}]);